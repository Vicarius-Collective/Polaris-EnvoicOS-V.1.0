!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("osjsClient",[],t):"object"==typeof exports?exports.osjsClient=t():e.osjsClient=t()}(window,(function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=24)}([function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){function n(t){return e.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},e.exports.default=e.exports,e.exports.__esModule=!0,n(t)}e.exports=n,e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){var r=n(25),o=n(26),i=n(17),s=n(27);e.exports=function(e){return r(e)||o(e)||i(e)||s()},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){var r=n(18);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){var r=n(14).default,o=n(12);e.exports=function(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?o(e):t},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){(function(t){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}},function(e,t,n){e.exports=n(3)},function(e,t,n){"use strict";n.r(t),n.d(t,"EventEmitter",(function(){return c}));var r=n(0),o=n.n(r),i=n(1),s=n.n(i),a=function(e){return e instanceof Array?e:String(e).replace(/\s+/g,"").split(",")},c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"undefined";o()(this,e),this.name=t,this.events={}}return s()(e,[{key:"destroy",value:function(){this.events={}}},{key:"on",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(r=r||{},"function"!=typeof t)throw new TypeError("Invalid callback");return a(e).forEach((function(e){n.events[e]||(n.events[e]=[]),n.events[e].push({callback:t,options:r})})),this}},{key:"once",value:function(e,t){return this.on(e,t,{once:!0})}},{key:"off",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return a(e).filter((function(e){return!!t.events[e]})).forEach((function(e){if(n)for(var o=t.events[e].length;o--;){var i=t.events[e][o];(!i.options.persist||r)&&i.callback===n&&t.events[e].splice(o,1)}else t.events[e]=r?[]:t.events[e].filter((function(e){return!0===e.options.persist}))})),this}},{key:"emit",value:function(e){for(var t=this,n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return a(e).forEach((function(e){if(t.events[e])for(var n=t.events[e].length;n--;){var o=t.events[e][n],i=o.options,s=o.callback;try{s.apply(void 0,r)}catch(e){console.warn(e)}i&&i.once&&t.events[e].splice(n,1)}})),this}}]),e}()}])}).call(this,n(19))},function(e,t,n){var r=n(28);function o(t,n,i){return"undefined"!=typeof Reflect&&Reflect.get?(e.exports=o=Reflect.get,e.exports.default=e.exports,e.exports.__esModule=!0):(e.exports=o=function(e,t,n){var o=r(e,t);if(o){var i=Object.getOwnPropertyDescriptor(o,t);return i.get?i.get.call(n):i.value}},e.exports.default=e.exports,e.exports.__esModule=!0),o(t,n,i||t)}e.exports=o,e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){(function(e){!function(e,t){for(var n in t)e[n]=t[n]}(t,function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=16)}([function(e,t){function n(t){return e.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},n(t)}e.exports=n},function(e,t,n){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}},function(e,t,n){e.exports=n(3)},function(e,t,n){"use strict";n.r(t),n.d(t,"EventEmitter",(function(){return c}));var r=n(0),o=n.n(r),i=n(1),s=n.n(i),a=function(e){return e instanceof Array?e:String(e).replace(/\s+/g,"").split(",")},c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"undefined";o()(this,e),this.name=t,this.events={}}return s()(e,[{key:"destroy",value:function(){this.events={}}},{key:"on",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(r=r||{},"function"!=typeof t)throw new TypeError("Invalid callback");return a(e).forEach((function(e){n.events[e]||(n.events[e]=[]),n.events[e].push({callback:t,options:r})})),this}},{key:"once",value:function(e,t){return this.on(e,t,{once:!0})}},{key:"off",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return a(e).filter((function(e){return!!t.events[e]})).forEach((function(e){if(n)for(var o=t.events[e].length;o--;){var i=t.events[e][o];(!i.options.persist||r)&&i.callback===n&&t.events[e].splice(o,1)}else t.events[e]=r?[]:t.events[e].filter((function(e){return!0===e.options.persist}))})),this}},{key:"emit",value:function(e){for(var t=this,n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return a(e).forEach((function(e){if(t.events[e])for(var n=t.events[e].length;n--;){var o=t.events[e][n],i=o.options,s=o.callback;try{s.apply(void 0,r)}catch(e){console.warn(e)}i&&i.once&&t.events[e].splice(n,1)}})),this}}]),e}()}])},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}},function(e,t,n){"use strict";var r=function(e){return function(e){return!!e&&"object"==typeof e}(e)&&!function(e){var t=Object.prototype.toString.call(e);return"[object RegExp]"===t||"[object Date]"===t||function(e){return e.$$typeof===o}(e)}(e)},o="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function i(e,t){return!1!==t.clone&&t.isMergeableObject(e)?u((n=e,Array.isArray(n)?[]:{}),e,t):e;var n}function s(e,t,n){return e.concat(t).map((function(e){return i(e,n)}))}function a(e){return Object.keys(e).concat(function(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter((function(t){return e.propertyIsEnumerable(t)})):[]}(e))}function c(e,t){try{return t in e}catch(e){return!1}}function u(e,t,n){(n=n||{}).arrayMerge=n.arrayMerge||s,n.isMergeableObject=n.isMergeableObject||r,n.cloneUnlessOtherwiseSpecified=i;var o=Array.isArray(t);return o===Array.isArray(e)?o?n.arrayMerge(e,t,n):function(e,t,n){var r={};return n.isMergeableObject(e)&&a(e).forEach((function(t){r[t]=i(e[t],n)})),a(t).forEach((function(o){(function(e,t){return c(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))})(e,o)||(c(e,o)&&n.isMergeableObject(t[o])?r[o]=function(e,t){if(!t.customMerge)return u;var n=t.customMerge(e);return"function"==typeof n?n:u}(o,n)(e[o],t[o],n):r[o]=i(t[o],n))})),r}(e,t,n):i(t,n)}u.all=function(e,t){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce((function(e,n){return u(e,n,t)}),{})};var l=u;e.exports=l},function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},function(e,t,n){var r=n(20),o=n(21),i=n(22),s=n(23);e.exports=function(e){return r(e)||o(e)||i(e)||s()}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n(24))},function(e,t,n){e.exports=n(33)},function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}},function(e,t,n){"use strict";
/*!
   * isobject <https://github.com/jonschlinkert/isobject>
   *
   * Copyright (c) 2014-2017, Jon Schlinkert.
   * Released under the MIT License.
   */e.exports=function(e){return null!=e&&"object"==typeof e&&!1===Array.isArray(e)}},function(e,t,n){var r=n(17);function o(t,n,i){return"undefined"!=typeof Reflect&&Reflect.get?e.exports=o=Reflect.get:e.exports=o=function(e,t,n){var o=r(e,t);if(o){var i=Object.getOwnPropertyDescriptor(o,t);return i.get?i.get.call(n):i.value}},o(t,n,i||t)}e.exports=o},function(e,t,n){var r=n(18);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}},function(e,t,n){var r=n(19),o=n(5);e.exports=function(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?o(e):t}},function(e,t,n){"use strict";var r=n(26),o=n(27);e.exports=function e(t,n){if(void 0===t)return{};if(Array.isArray(t)){for(var i=0;i<t.length;i++)t[i]=e(t[i],n);return t}if(!r(t))return t;if("string"==typeof n&&(n=[n]),!Array.isArray(n))return t;for(var s=0;s<n.length;s++)o(t,n[s]);for(var a in t)t.hasOwnProperty(a)&&(t[a]=e(t[a],n));return t}},function(e,t){function n(e,t,n,r,o,i,s){try{var a=e[i](s),c=a.value}catch(e){return void n(e)}a.done?t(c):Promise.resolve(c).then(r,o)}e.exports=function(e){return function(){var t=this,r=arguments;return new Promise((function(o,i){var s=e.apply(t,r);function a(e){n(s,o,i,a,c,"next",e)}function c(e){n(s,o,i,a,c,"throw",e)}a(void 0)}))}}},function(e,t,n){e.exports=n(34)},function(e,t,n){var r=n(0);e.exports=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=r(e)););return e}},function(e,t){function n(t,r){return e.exports=n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},n(t,r)}e.exports=n},function(e,t){function n(t){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?e.exports=n=function(e){return typeof e}:e.exports=n=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(t)}e.exports=n},function(e,t,n){var r=n(9);e.exports=function(e){if(Array.isArray(e))return r(e)}},function(e,t){e.exports=function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}},function(e,t,n){var r=n(9);e.exports=function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(25),o=function(){function e(){this.nodes={},this.outgoingEdges={},this.incomingEdges={}}return e.prototype.addNode=function(e){if(this.hasNode(e.name))throw new Error('A node with the name of "'+e.name+'" already exists in the graph!');this.nodes[e.name]=e,this.outgoingEdges[e.name]=[],this.incomingEdges[e.name]=[]},e.prototype.removeNode=function(e){if(!this.hasNode(e))throw new Error('A node with the name of "'+e+'" does not exist in the graph!');for(var t in delete this.nodes[e],delete this.outgoingEdges[e],delete this.incomingEdges[e],this.incomingEdges)this.incomingEdges[t].includes(e)&&this.incomingEdges[t].splice(t.indexOf(e),1);for(var n in this.outgoingEdges)this.outgoingEdges[n].includes(e)&&this.outgoingEdges[n].splice(n.indexOf(e),1)},e.prototype.hasNode=function(e){return this.nodes.hasOwnProperty(e)},Object.defineProperty(e.prototype,"size",{get:function(){return Object.keys(this.nodes).length},enumerable:!0,configurable:!0}),e.prototype.getNode=function(e){if(this.hasNode(e))return this.nodes[e];throw new Error('Node "'+e+'" not found!')},e.prototype.addDependency=function(e,t){if(!this.hasNode(e))throw new Error("Node does not exist: "+e);if(!this.hasNode(t))throw new Error("Node does not exist: "+t);if(e===t)throw new Error("Cannot add self dependency: "+t);this.outgoingEdges[e].includes(t)||this.outgoingEdges[e].push(t),this.incomingEdges[t].includes(e)||this.incomingEdges[t].push(e)},e.prototype.removeDependency=function(e,t){if(console.warn("removeDependency() has not been tested."),!this.hasNode(e))throw new Error("Node does not exist: "+e);if(!this.hasNode(t))throw new Error("Node does not exist: "+t);if(e===t)throw new Error("Cannot remove self dependency: "+t);this.outgoingEdges[e].includes(t)||this.outgoingEdges[e].splice(this.outgoingEdges[e].indexOf(t),1),this.incomingEdges[t].includes(e)||this.incomingEdges[t].splice(this.incomingEdges[t].indexOf(t),1)},e.prototype.dependenciesOf=function(e){return this.outgoingEdges[e]},e.prototype.dependentsOf=function(e){return this.incomingEdges[e]},e.prototype.traverse=function(){var e=this;Object.keys(this.nodes).map((function(t){return e.getNode(t).clearMutex()}));var t=function(n){return Promise.all(e.dependenciesOf(n.name).map((function(t){return e.nodes[t].awaitData()}))).then((function(){return n.signalDependenciesReady(),e.dependentsOf(n.name).length>0?Promise.all(e.dependentsOf(n.name).map((function(n){return t(e.getNode(n))}))):n.awaitData()}))},n=Object.keys(this.nodes).filter((function(t){return 0===e.dependenciesOf(t).length}));return 0===n.length&&Object.keys(this.nodes).length>0?Promise.reject(new Error("The graph is circular. Cannot traverse graph due to no root node.")):Promise.all(n.map((function(n){return t(e.nodes[n])})))},e.prototype.clearNodeAndDependents=function(e){var t=this,n=this.getNode(e),r=function(e){return e.hasData()?(e.clearData(),Promise.all(t.dependentsOf(e.name).map((function(e){return r(t.getNode(e))})))):Promise.resolve()};return r(n)},e.prototype.reset=function(){for(var e in this.nodes)this.nodes[e].reset()},e.prototype.ls=function(){for(var e in this.nodes)console.log(e),console.log(this.dependentsOf(e))},e}();t.Graph=o;var i=function(){function e(e,t){this.locked=!1,this._name=e,this._promise=t}return Object.defineProperty(e.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),e.prototype.awaitData=function(){var e=this;return this.mutex||(this.mutex=new r.Mutex((function(){return void 0!==e._data}))),new Promise((function(t,n){e.mutex.await((function(r){if(r)return n(r);t(e._data)}))}))},e.prototype.signalDependenciesReady=function(){var e=this;if(this.mutex||(this.mutex=new r.Mutex((function(){return void 0!==e._data}))),void 0===this._data){if(!0===this.locked)return;this.locked=!0;var t=this._promise();if(void 0===t)throw new Error('Node "'+this._name+'" has undefined promise.');t.then((function(t){e._data=t,e.locked=!1,e.mutex.ready()})).catch((function(t){e._data=null,e.locked=!1,e.mutex.ready(t)}))}else this.mutex.ready()},e.prototype.setData=function(e){this._data=e,this.signalDependenciesReady()},e.prototype.reset=function(){this.clearData(),this.clearMutex()},e.prototype.clearMutex=function(){this.hasData()&&(this.mutex=void 0)},e.prototype.hasData=function(){return void 0!==this._data},e.prototype.clearData=function(){this._data=void 0},e}();t.Node=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.readyTest=e}return e.prototype.await=function(e){!0===this.readyTest()?e():(this.waiting=this.waiting||[],this.waiting.push(e))},e.prototype.ready=function(e){this.waiting&&this.waiting.forEach((function(t){return t(e)})),delete this.waiting},e}();t.Mutex=r},function(e,t,n){"use strict";
/*!
   * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
   *
   * Copyright (c) 2014-2017, Jon Schlinkert.
   * Released under the MIT License.
   */var r=n(10);function o(e){return!0===r(e)&&"[object Object]"===Object.prototype.toString.call(e)}e.exports=function(e){var t,n;return!1!==o(e)&&"function"==typeof(t=e.constructor)&&!1!==o(n=t.prototype)&&!1!==n.hasOwnProperty("isPrototypeOf")}},function(e,t,n){"use strict";
/*!
   * unset-value <https://github.com/jonschlinkert/unset-value>
   *
   * Copyright (c) 2015, 2017, Jon Schlinkert.
   * Released under the MIT License.
   */var r=n(10),o=n(28);e.exports=function(e,t){if(!r(e))throw new TypeError("expected an object.");if(e.hasOwnProperty(t))return delete e[t],!0;if(o(e,t)){for(var n=t.split("."),i=n.pop();n.length&&"\\"===n[n.length-1].slice(-1);)i=n.pop().slice(0,-1)+"."+i;for(;n.length;)e=e[t=n.shift()];return delete e[i]}return!0}},function(e,t,n){"use strict";
/*!
   * has-value <https://github.com/jonschlinkert/has-value>
   *
   * Copyright (c) 2014-2016, Jon Schlinkert.
   * Licensed under the MIT License.
   */var r=n(29),o=n(31),i=n(32);e.exports=function(e,t,n){return r(e)?o(i(e,t),n):o(e,t)}},function(e,t,n){"use strict";
/*!
   * isobject <https://github.com/jonschlinkert/isobject>
   *
   * Copyright (c) 2014-2015, Jon Schlinkert.
   * Licensed under the MIT License.
   */var r=n(30);e.exports=function(e){return null!=e&&"object"==typeof e&&!1===r(e)}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){"use strict";
/*!
   * has-values <https://github.com/jonschlinkert/has-values>
   *
   * Copyright (c) 2014-2015, Jon Schlinkert.
   * Licensed under the MIT License.
   */e.exports=function(e,t){if(null==e)return!1;if("boolean"==typeof e)return!0;if("number"==typeof e)return 0!==e||!0!==t;if(void 0!==e.length)return 0!==e.length;for(var n in e)if(e.hasOwnProperty(n))return!0;return!1}},function(e,t){function n(e){return e?Array.isArray(e)?e.join("."):e:""}
/*!
   * get-value <https://github.com/jonschlinkert/get-value>
   *
   * Copyright (c) 2014-2015, Jon Schlinkert.
   * Licensed under the MIT License.
   */e.exports=function(e,t,r,o,i){if(null===(s=e)||"object"!=typeof s&&"function"!=typeof s||!t)return e;var s;if(t=n(t),r&&(t+="."+n(r)),o&&(t+="."+n(o)),i&&(t+="."+n(i)),t in e)return e[t];for(var a=t.split("."),c=a.length,u=-1;e&&++u<c;){for(var l=a[u];"\\"===l[l.length-1];)l=l.slice(0,-1)+"."+a[++u];e=e[l]}return e}},function(e,t,n){var r=function(e){"use strict";var t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",s=r.toStringTag||"@@toStringTag";function a(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{a({},"")}catch(e){a=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var o=t&&t.prototype instanceof f?t:f,i=Object.create(o.prototype),s=new A(r||[]);return i._invoke=function(e,t,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return{value:void 0,done:!0}}for(n.method=o,n.arg=i;;){var s=n.delegate;if(s){var a=y(s,n);if(a){if(a===l)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=u(e,t,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===l)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}(e,n,s),i}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var l={};function f(){}function d(){}function p(){}var L={};L[o]=function(){return this};var h=Object.getPrototypeOf,_=h&&h(h(B([])));_&&_!==t&&n.call(_,o)&&(L=_);var m=p.prototype=f.prototype=Object.create(L);function v(e){["next","throw","return"].forEach((function(t){a(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){var r;this._invoke=function(o,i){function s(){return new t((function(r,s){!function r(o,i,s,a){var c=u(e[o],e,i);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==typeof f&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,s,a)}),(function(e){r("throw",e,s,a)})):t.resolve(f).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,a)}))}a(c.arg)}(o,i,r,s)}))}return r=r?r.then(s,s):s()}}function y(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,y(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=u(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,l;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function g(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(g,this),this.reset(!0)}function B(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return d.prototype=m.constructor=p,p.constructor=d,d.displayName=a(p,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,a(e,s,"GeneratorFunction")),e.prototype=Object.create(m),e},e.awrap=function(e){return{__await:e}},v(E.prototype),E.prototype[i]=function(){return this},e.AsyncIterator=E,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var s=new E(c(t,n,r,o),i);return e.isGeneratorFunction(n)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},v(m),a(m,s,"Generator"),m[o]=function(){return this},m.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=B,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return s.type="throw",s.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],s=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var a=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(a&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=e,s.arg=t,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),O(n),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;O(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:B(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},e}(e.exports);try{regeneratorRuntime=r}catch(e){Function("r","regeneratorRuntime = r")(r)}},function(e,t,n){"use strict";n.r(t),n.d(t,"CoreBase",(function(){return S})),n.d(t,"ServiceProvider",(function(){return w})),n.d(t,"EventEmitter",(function(){return y.EventHandler}));var r=n(2),o=n.n(r),i=n(3),s=n.n(i),a=n(5),c=n.n(a),u=n(11),l=n.n(u),f=n(12),d=n.n(f),p=n(13),L=n.n(p),h=n(0),_=n.n(h),m=n(6),v=n.n(m),E=n(7),y=n(1),g=n(4),O=n.n(g),A=n(14),B=n.n(A);var S=function(e){d()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var o=_()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return L()(this,n)}}(n);function n(e,r,i){var s;o()(this,n),s=t.call(this,"Core");var a=O.a.default?O.a.default:O.a,u=B()(e,i.omit||[]);return s.logger=console,s.configuration=a(u,r),s.options=i,s.booted=!1,s.started=!1,s.destroyed=!1,s.providers=function(e){var t={},n=[],r=[],o=function(e,t){var n=new E.Graph,r=e.map((function(e){return"function"==typeof e.provider.provides?e.provider.provides():[]}));return e.forEach((function(e,r){n.addNode(new E.Node(String(r),(function(){try{return Promise.resolve(e.provider[t]())}catch(e){return Promise.reject(e)}})))})),e.forEach((function(e,t){var o,i=e.options.depends instanceof Array?e.options.depends:[],s="function"==typeof e.provider.depends?e.provider.depends():[],a=[].concat(v()(i),v()(s));if(a.length>0){var c=(o=a,r.findIndex((function(e){return e.some((function(e){return-1!==o.indexOf(e)}))})));-1!==c&&n.addDependency(String(t),String(c))}})),n.traverse().catch((function(e){return console.warn(e)}))};return{register:function(t,r){try{n.push({provider:new t(e,r.args),options:r})}catch(e){console.error("Provider register error",e)}},init:function(e){return t=e?n.filter((function(e){return e.options.before})):n.filter((function(e){return!e.options.before})),o(t,"init").then((function(){return o(t,"start")}));var t},bind:function(t,n,o){e.logger.info("Provider binding",t),r.push({singleton:n,name:t,make:function(){return o.apply(void 0,arguments)}})},has:function(e){return-1!==r.findIndex((function(t){return t.name===e}))},make:function(e){var n=r.find((function(t){return t.name===e}));if(!n)throw new Error("Provider '".concat(e,"' not found"));for(var o=arguments.length,i=new Array(o>1?o-1:0),s=1;s<o;s++)i[s-1]=arguments[s];return n.singleton?(t[e]||n&&(t[e]=n.make.apply(n,i)),t[e]):n.make.apply(n,i)},destroy:function(){var e,o=(e=n,"destroy",Promise.all(e.map((function(e){try{return e.provider.destroy()}catch(e){return Promise.reject(e)}}))).catch((function(e){return console.warn(e)})));return t={},r=[],o}}}(c()(s)),s}return s()(n,[{key:"destroy",value:function(){if(this.destroyed)return!1;this.booted=!1,this.destroyed=!0,this.started=!1;var e=this.providers.destroy();return l()(_()(n.prototype),"destroy",this).call(this),e}},{key:"boot",value:function(){return this.booted?Promise.resolve(!0):(this.started=!1,this.destroyed=!1,this.booted=!0,this.providers.init(!0).then((function(){return!0})))}},{key:"start",value:function(){return this.started?Promise.resolve(!0):(this.started=!0,this.providers.init(!1).then((function(){return!0})))}},{key:"config",value:function(e,t){return e?function(e,t,n){var r;try{r=t.split(/\./g).reduce((function(e,t){return e[t]}),Object.assign({},e))}catch(e){}return void 0===r?n:r}(this.configuration,e,t):Object.assign({},this.configuration)}},{key:"register",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.providers.register(e,t)}},{key:"instance",value:function(e,t){this.providers.bind(e,!1,t)}},{key:"singleton",value:function(e,t){this.providers.bind(e,!0,t)}},{key:"make",value:function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return(t=this.providers).make.apply(t,[e].concat(r))}},{key:"has",value:function(e){return this.providers.has(e)}}]),n}(y.EventEmitter),b=n(8),T=n.n(b),P=n(15),R=n.n(P),w=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o()(this,e),this.core=t,this.options=n}var t;return s()(e,[{key:"provides",value:function(){return[]}},{key:"depends",value:function(){return[]}},{key:"init",value:(t=R()(T.a.mark((function e(){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)})},{key:"start",value:function(){}},{key:"destroy",value:function(){}}]),e}()}]))}).call(this,n(19))},function(e,t,n){var r=n(29),o=n(30),i=n(17),s=n(31);e.exports=function(e,t){return r(e)||o(e,t)||i(e,t)||s()},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){"use strict";var r=function(e){return function(e){return!!e&&"object"==typeof e}(e)&&!function(e){var t=Object.prototype.toString.call(e);return"[object RegExp]"===t||"[object Date]"===t||function(e){return e.$$typeof===o}(e)}(e)};var o="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function i(e,t){return!1!==t.clone&&t.isMergeableObject(e)?l((n=e,Array.isArray(n)?[]:{}),e,t):e;var n}function s(e,t,n){return e.concat(t).map((function(e){return i(e,n)}))}function a(e){return Object.keys(e).concat(function(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter((function(t){return e.propertyIsEnumerable(t)})):[]}(e))}function c(e,t){try{return t in e}catch(e){return!1}}function u(e,t,n){var r={};return n.isMergeableObject(e)&&a(e).forEach((function(t){r[t]=i(e[t],n)})),a(t).forEach((function(o){(function(e,t){return c(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))})(e,o)||(c(e,o)&&n.isMergeableObject(t[o])?r[o]=function(e,t){if(!t.customMerge)return l;var n=t.customMerge(e);return"function"==typeof n?n:l}(o,n)(e[o],t[o],n):r[o]=i(t[o],n))})),r}function l(e,t,n){(n=n||{}).arrayMerge=n.arrayMerge||s,n.isMergeableObject=n.isMergeableObject||r,n.cloneUnlessOtherwiseSpecified=i;var o=Array.isArray(t);return o===Array.isArray(e)?o?n.arrayMerge(e,t,n):u(e,t,n):i(t,n)}l.all=function(e,t){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce((function(e,n){return l(e,n,t)}),{})};var f=l;e.exports=f},function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){var r,o;
/*!
 * JavaScript Cookie v2.2.1
 * https://github.com/js-cookie/js-cookie
 *
 * Copyright 2006, 2015 Klaus Hartl & Fagner Brack
 * Released under the MIT license
 */!function(i){if(void 0===(o="function"==typeof(r=i)?r.call(t,n,t,e):r)||(e.exports=o),!0,e.exports=i(),!!0){var s=window.Cookies,a=window.Cookies=i();a.noConflict=function(){return window.Cookies=s,a}}}((function(){function e(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var r in n)t[r]=n[r]}return t}function t(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function n(r){function o(){}function i(t,n,i){if("undefined"!=typeof document){"number"==typeof(i=e({path:"/"},o.defaults,i)).expires&&(i.expires=new Date(1*new Date+864e5*i.expires)),i.expires=i.expires?i.expires.toUTCString():"";try{var s=JSON.stringify(n);/^[\{\[]/.test(s)&&(n=s)}catch(e){}n=r.write?r.write(n,t):encodeURIComponent(String(n)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var a="";for(var c in i)i[c]&&(a+="; "+c,!0!==i[c]&&(a+="="+i[c].split(";")[0]));return document.cookie=t+"="+n+a}}function s(e,n){if("undefined"!=typeof document){for(var o={},i=document.cookie?document.cookie.split("; "):[],s=0;s<i.length;s++){var a=i[s].split("="),c=a.slice(1).join("=");n||'"'!==c.charAt(0)||(c=c.slice(1,-1));try{var u=t(a[0]);if(c=(r.read||r)(c,u)||t(c),n)try{c=JSON.parse(c)}catch(e){}if(o[u]=c,e===u)break}catch(e){}}return e?o[e]:o}}return o.set=i,o.get=function(e){return s(e,!1)},o.getJSON=function(e){return s(e,!0)},o.remove=function(t,n){i(t,"",e(n,{expires:-1}))},o.defaults={},o.withConverter=n,o}((function(){}))}))},function(e,t){function n(t){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?(e.exports=n=function(e){return typeof e},e.exports.default=e.exports,e.exports.__esModule=!0):(e.exports=n=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.default=e.exports,e.exports.__esModule=!0),n(t)}e.exports=n,e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){window,e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=3)}([function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(t){return"function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?e.exports=r=function(e){return n(e)}:e.exports=r=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":n(e)},r(t)}e.exports=r},function(e,t,n){var r=n(5),o=n(6),i=n(7);e.exports=function(e,t){return r(e)||o(e,t)||i()}},function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},function(e,t,n){e.exports=n(4)},function(e,t,n){"use strict";n.r(t);var r=n(1),o=n.n(r),i=n(2),s=n.n(i),a=n(0),c=n.n(a),u=function(e){return void 0===e?e:JSON.parse(JSON.stringify(e))},l=function(e){return e.split(/\./g)},f=function(e){return null==e},d=function(e){return!!e&&"object"===c()(e)&&!Array.isArray(e)},p=function e(t,n){if(d(t)&&d(n)){for(var r in n)d(n[r])?(t[r]&&c()(t[r])===c()(n[r])||Object.assign(t,s()({},r,{})),e(t[r],n[r])):Object.assign(t,s()({},r,n[r]));return t}return n},L=function(e,t,n){if(f(t))return e;var r;try{r=l(t).reduce((function(e,t){return e[t]}),Object.assign({},e))}catch(e){}return void 0===r?n:r},h=function(e,t,n){var r=l(t),o=r.length;if(n)for(var i=e,s=0;s<o;s++){var a=r[s];void 0===i[a]&&(i[a]={}),i=i[a]}var c=1===o?r[0]:r.pop();return[1===o?e:L(e,r.join(".")),c]};t.default=function(e){var t,n=function(e){return t=u(e)};return n(e),{get:function(e,n){return u(L(t,e,n))},set:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return u(function(e,t,n,r){if(!1!==r.parse)try{n=void 0===n?n:JSON.parse(n)}catch(e){}if(f(t)){var i=!1!==r.merge?p(e,n):n;return Object.assign(e,i)}var s=h(e,t,!0),a=o()(s,2),c=a[0],u=a[1];f(c[u])&&(c[u]={});var l=!1!==r.merge?p(c[u],n):n;return c[u]=l,l}(t,e,n,r))},push:function(e,n){return u(function(e,t,n){var r=L(e,t);if(!Array.isArray(r))throw new Error("The key '".concat(t,"' is not an array"));return r.push(n),r}(t,e,n))},remove:function(e){return u(function(e,t){var n=h(e,t),r=o()(n,2),i=r[0],s=r[1];return void 0!==i[s]&&(i instanceof Array?i.splice(i.indexOf(i[s]),1):delete i[s]),i}(t,e))},reset:function(t){return u(n(t||e))},toString:function(){return JSON.stringify(t)}}}},function(e,t){e.exports=function(e){if(Array.isArray(e))return e}},function(e,t){e.exports=function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==a.return||a.return()}finally{if(o)throw i}}return n}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}}])},function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){var r=n(16);e.exports=function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){function n(t,r){return e.exports=n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},e.exports.default=e.exports,e.exports.__esModule=!0,n(t,r)}e.exports=n,e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";t.match=function(e,t){return c(e).some((function(e){var n=e.inverse,r="all"===e.type||t.type===e.type;if(r&&n||!r&&!n)return!1;var o=e.expressions.every((function(e){var n=e.feature,r=e.modifier,o=e.value,i=t[n];if(!i)return!1;switch(n){case"orientation":case"scan":return i.toLowerCase()===o.toLowerCase();case"width":case"height":case"device-width":case"device-height":o=f(o),i=f(i);break;case"resolution":o=l(o),i=l(i);break;case"aspect-ratio":case"device-aspect-ratio":case"device-pixel-ratio":o=u(o),i=u(i);break;case"grid":case"color":case"color-index":case"monochrome":o=parseInt(o,10)||1,i=parseInt(i,10)||0}switch(r){case"min":return i>=o;case"max":return i<=o;default:return i===o}}));return o&&!n||!o&&n}))},t.parse=c;var r=/(?:(only|not)?\s*([^\s\(\)]+)(?:\s*and)?\s*)?(.+)?/i,o=/\(\s*([^\s\:\)]+)\s*(?:\:\s*([^\s\)]+))?\s*\)/,i=/^(?:(min|max)-)?(.+)/,s=/(em|rem|px|cm|mm|in|pt|pc)?$/,a=/(dpi|dpcm|dppx)?$/;function c(e){return e.split(",").map((function(e){var t=(e=e.trim()).match(r),n=t[1],s=t[2],a=t[3]||"",c={};return c.inverse=!!n&&"not"===n.toLowerCase(),c.type=s?s.toLowerCase():"all",a=a.match(/\([^\)]+\)/g)||[],c.expressions=a.map((function(e){var t=e.match(o),n=t[1].toLowerCase().match(i);return{modifier:n[1],feature:n[2],value:t[2]}})),c}))}function u(e){var t,n=Number(e);return n||(n=(t=e.match(/^(\d+)\s*\/\s*(\d+)$/))[1]/t[2]),n}function l(e){var t=parseFloat(e);switch(String(e).match(a)[1]){case"dpcm":return t/2.54;case"dppx":return 96*t;default:return t}}function f(e){var t=parseFloat(e);switch(String(e).match(s)[1]){case"em":case"rem":return 16*t;case"cm":return 96*t/2.54;case"mm":return 96*t/2.54/10;case"in":return 96*t;case"pt":return 72*t;case"pc":return 72*t/12;default:return t}}},function(e,t,n){var r;!function(o){"use strict";var i,s,a,c=(i=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZWN]|"[^"]*"|'[^']*'/g,s=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,a=/[^-+\dA-Z]/g,function(e,t,n,r){if(1!==arguments.length||"string"!==d(e)||/\d/.test(e)||(t=e,e=void 0),(e=e||new Date)instanceof Date||(e=new Date(e)),isNaN(e))throw TypeError("Invalid date");var o=(t=String(c.masks[t]||t||c.masks.default)).slice(0,4);"UTC:"!==o&&"GMT:"!==o||(t=t.slice(4),n=!0,"GMT:"===o&&(r=!0));var p=n?"getUTC":"get",L=e[p+"Date"](),h=e[p+"Day"](),_=e[p+"Month"](),m=e[p+"FullYear"](),v=e[p+"Hours"](),E=e[p+"Minutes"](),y=e[p+"Seconds"](),g=e[p+"Milliseconds"](),O=n?0:e.getTimezoneOffset(),A=l(e),B=f(e),S={d:L,dd:u(L),ddd:c.i18n.dayNames[h],dddd:c.i18n.dayNames[h+7],m:_+1,mm:u(_+1),mmm:c.i18n.monthNames[_],mmmm:c.i18n.monthNames[_+12],yy:String(m).slice(2),yyyy:m,h:v%12||12,hh:u(v%12||12),H:v,HH:u(v),M:E,MM:u(E),s:y,ss:u(y),l:u(g,3),L:u(Math.round(g/10)),t:v<12?c.i18n.timeNames[0]:c.i18n.timeNames[1],tt:v<12?c.i18n.timeNames[2]:c.i18n.timeNames[3],T:v<12?c.i18n.timeNames[4]:c.i18n.timeNames[5],TT:v<12?c.i18n.timeNames[6]:c.i18n.timeNames[7],Z:r?"GMT":n?"UTC":(String(e).match(s)||[""]).pop().replace(a,""),o:(O>0?"-":"+")+u(100*Math.floor(Math.abs(O)/60)+Math.abs(O)%60,4),S:["th","st","nd","rd"][L%10>3?0:(L%100-L%10!=10)*L%10],W:A,N:B};return t.replace(i,(function(e){return e in S?S[e]:e.slice(1,e.length-1)}))});function u(e,t){for(e=String(e),t=t||2;e.length<t;)e="0"+e;return e}function l(e){var t=new Date(e.getFullYear(),e.getMonth(),e.getDate());t.setDate(t.getDate()-(t.getDay()+6)%7+3);var n=new Date(t.getFullYear(),0,4);n.setDate(n.getDate()-(n.getDay()+6)%7+3);var r=t.getTimezoneOffset()-n.getTimezoneOffset();t.setHours(t.getHours()-r);var o=(t-n)/6048e5;return 1+Math.floor(o)}function f(e){var t=e.getDay();return 0===t&&(t=7),t}function d(e){return null===e?"null":void 0===e?"undefined":"object"!=typeof e?typeof e:Array.isArray(e)?"array":{}.toString.call(e).slice(8,-1).toLowerCase()}c.masks={default:"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:sso",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'",expiresHeaderFormat:"ddd, dd mmm yyyy HH:MM:ss Z"},c.i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"],timeNames:["a","p","am","pm","A","P","AM","PM"]},void 0===(r=function(){return c}.call(t,n,t,e))||(e.exports=r)}()},function(e,t,n){var r=n(18),o=n(32);function i(t,n,s){return o()?(e.exports=i=Reflect.construct,e.exports.default=e.exports,e.exports.__esModule=!0):(e.exports=i=function(e,t,n){var o=[null];o.push.apply(o,t);var i=new(Function.bind.apply(e,o));return n&&r(i,n.prototype),i},e.exports.default=e.exports,e.exports.__esModule=!0),i.apply(null,arguments)}e.exports=i,e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){var r=n(33);e.exports=function(e,t){if(null==e)return{};var n,o,i=r(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(o=0;o<s.length;o++)n=s[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){e.exports=n(34)},function(e,t,n){var r=n(16);e.exports=function(e){if(Array.isArray(e))return r(e)},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){var r=n(1);e.exports=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=r(e)););return e},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=function(e){if(Array.isArray(e))return e},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],s=!0,a=!1;try{for(n=n.call(e);!(s=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);s=!0);}catch(e){a=!0,o=e}finally{try{s||null==n.return||n.return()}finally{if(a)throw o}}return i}},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){"use strict";n.r(t),n.d(t,"Core",(function(){return pt})),n.d(t,"Window",(function(){return Ae})),n.d(t,"Desktop",(function(){return on})),n.d(t,"Application",(function(){return Ne})),n.d(t,"Notification",(function(){return cn})),n.d(t,"Notifications",(function(){return ln})),n.d(t,"WindowBehavior",(function(){return _n})),n.d(t,"Auth",(function(){return Cn})),n.d(t,"Login",(function(){return bn})),n.d(t,"Websocket",(function(){return q})),n.d(t,"CoreServiceProvider",(function(){return _r})),n.d(t,"DesktopServiceProvider",(function(){return vr})),n.d(t,"NotificationServiceProvider",(function(){return yr})),n.d(t,"VFSServiceProvider",(function(){return Zr})),n.d(t,"AuthServiceProvider",(function(){return Xr})),n.d(t,"SettingsServiceProvider",(function(){return co})),n.d(t,"logger",(function(){return D})),n.d(t,"Splash",(function(){return Ce})),n.d(t,"Settings",(function(){return oo})),n.d(t,"Tray",(function(){return $n})),n.d(t,"Search",(function(){return en})),n.d(t,"Packages",(function(){return Wn})),n.d(t,"Filesystem",(function(){return zr})),n.d(t,"Clipboard",(function(){return zn})),n.d(t,"Middleware",(function(){return Yn})),n.d(t,"BasicApplication",(function(){return pr})),n.d(t,"configuration",(function(){return qe})),n.d(t,"icon",(function(){return R}));var r={};n.r(r),n.d(r,"draggable",(function(){return ne})),n.d(r,"droppable",(function(){return re}));var o={};n.r(o),n.d(o,"parentDirectory",(function(){return gt})),n.d(o,"pathJoin",(function(){return Ot})),n.d(o,"humanFileSize",(function(){return wt})),n.d(o,"transformReaddir",(function(){return Nt})),n.d(o,"transformArrayBuffer",(function(){return Ct})),n.d(o,"getFileIcon",(function(){return jt})),n.d(o,"createFileIter",(function(){return kt})),n.d(o,"basename",(function(){return It})),n.d(o,"pathname",(function(){return Dt})),n.d(o,"parseMontpointPrefix",(function(){return Mt})),n.d(o,"filterMountByGroups",(function(){return xt})),n.d(o,"createWatchEvents",(function(){return Ft}));var i={};n.r(i),n.d(i,"en_EN",(function(){return Zn})),n.d(i,"fr_FR",(function(){return qn})),n.d(i,"nb_NO",(function(){return Xn})),n.d(i,"sl_SI",(function(){return Qn})),n.d(i,"vi_VN",(function(){return Jn})),n.d(i,"de_DE",(function(){return er})),n.d(i,"zh_CN",(function(){return tr})),n.d(i,"fa_FA",(function(){return nr})),n.d(i,"pt_BR",(function(){return rr})),n.d(i,"ru_RU",(function(){return or})),n.d(i,"tr_TR",(function(){return ir})),n.d(i,"sv_SE",(function(){return sr}));var s={};n.r(s),n.d(s,"readdir",(function(){return Br})),n.d(s,"readfile",(function(){return Sr})),n.d(s,"writefile",(function(){return br})),n.d(s,"copy",(function(){return Tr})),n.d(s,"rename",(function(){return Pr})),n.d(s,"move",(function(){return Rr})),n.d(s,"mkdir",(function(){return wr})),n.d(s,"unlink",(function(){return Nr})),n.d(s,"exists",(function(){return Cr})),n.d(s,"stat",(function(){return jr})),n.d(s,"url",(function(){return kr})),n.d(s,"download",(function(){return Ir})),n.d(s,"search",(function(){return Dr})),n.d(s,"touch",(function(){return Mr}));var a=n(4),c=n.n(a),u=n(0),l=n.n(u),f=n(2),d=n.n(f),p=n(3),L=n.n(p),h=n(12),_=n.n(h),m=n(8),v=n.n(m),E=n(5),y=n.n(E),g=n(6),O=n.n(g),A=n(1),B=n.n(A),S=n(11),b=n.n(S),T=n(7),P=n(20),R=n.p+"881c86876af63b732063d7bdd51bb226.png",w=["debug","log","info","warn","error"],N=[],C=function(e,t){return N.reduce((function(t,n){return n.apply(void 0,[e].concat(c()(t)))}),t)},j=function(e){var t=function(e,t){return"function"==typeof t[e].bind?t[e].bind(t):Function.prototype.bind.apply(t[e],t)}(e,console);return N.length>0?function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t.apply(void 0,c()(C(e,r)))}:t},k=function(e){return w.forEach((function(t){return e[t]=j(t)}))},I={addMiddleware:function(e){N.push(e),k(I)},clearMiddleware:function(){N=[],k(I)}};k(I);var D=I;function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}
/*
 * OS.js - JavaScript Cloud/Web Desktop Platform
 *
 * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * 1. Redistributions of source code must retain the above copyright notice, this
 *    list of conditions and the following disclaimer
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 *    this list of conditions and the following disclaimer in the documentation
 *    and/or other materials provided with the distribution
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR
 * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
 * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * @author  Anders Evenrud <andersevenrud@gmail.com>
 * @license Simplified BSD License
 */var F=function(e){return x({classNames:[],modal:!1,ontop:!1,gravity:!1,moveable:!0,resizable:!0,focusable:!0,maximizable:!0,minimizable:!0,sessionable:!0,closeable:!0,header:!0,controls:!0,visibility:"global",shadowDOM:!1,clamp:!0,droppable:!0,mediaQueries:{small:"screen and (max-width: 640px)",medium:"screen and (min-width: 640px) and (max-width: 1024px)",big:"screen and (min-width: 1024px)"},minDimension:{width:100,height:100},maxDimension:{width:-1,height:-1}},e)},U=function(e,t,n){return x({title:t.title||t.id,icon:t.icon||R,media:null,moving:!1,resizing:!1,loading:!1,focused:!1,maximized:!1,minimized:!1,zIndex:1,styles:{},position:x({left:null,top:null},t.position),dimension:x({width:Math.max(n.minDimension.width,100),height:Math.max(n.minDimension.height,100)},t.dimension)},e)},H=function(e,t){var n=t.dimension,r=t.position,o=e.width-n.width,i=e.height-n.height+e.top;return{left:Math.max(0,Math.min(o,r.left)),top:Math.max(0,Math.max(e.top,Math.min(i,r.top)))}},G=function(e,t){if("function"==typeof t){if(e.attributes.shadowDOM)try{var n="string"==typeof e.attributes.shadowDOM?e.attributes.shadowDOM:"open";return void t(e.$content.attachShadow({mode:n}),e)}catch(e){D.warn("Shadow DOM not supported?",e)}t(e.$content,e)}},K=function(e,t){var n=function(e){var t=e.attributes,n=t.maxDimension,r=t.minDimension,o=e.state,i=o.position,s=o.dimension,a={left:i.left+s.width-r.width,top:i.top+s.height-r.height},c=function(e,t,n){var r=-1===e?n:Math.max(e,n);return-1===t?r:Math.min(t,r)};return function(e,t,o,i){return{width:c(r.width,n.width,e),height:c(r.height,n.height,t),top:c(-1,a.top,o),left:c(-1,a.left,i)}}}(e),r=e.state,o=r.position,i=r.dimension,s=t.getAttribute("data-direction").split(""),a=function(e){return-1!==s.indexOf(e)},c=a("e")?1:a("w")?-1:0,u=a("s")?1:a("n")?-1:0;return function(e,t){var r=i.width+e*c,s=i.height+t*u,a=-1===u?o.top+t:o.top,l=-1===c?o.left+e:o.left;return n(r,s,a,l)}},W=function(e){return Object.keys(e.attributes.mediaQueries).filter((function(t){return P.match(e.attributes.mediaQueries[t],{type:"screen",orientation:(n=window.screen,n&&n.orientation?n.orientation.type:window.matchMedia("(orientation: portrait)")?"portrait":"landscape"),width:e.$element.offsetWidth||e.state.dimension.width,height:e.$element.offsetHeight||e.state.dimension.height});var n})).pop()},V=function(e,t,n){var r=function(e,t){return t instanceof RegExp?!!e.match(t):e===t},o=e.find((function(e){var o=e.application,i=e.window;return!(!o&&!i)&&(!(o&&!r(t,o))&&!(i&&!r(n||"",i)))})),i=o&&o.options?o.options:{};return["position","dimension","attributes"].reduce((function(e,t){return i[t]?x(x({},e),{},l()({},t,i[t])):e}),{})};function $(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}
/*
 * OS.js - JavaScript Cloud/Web Desktop Platform
 *
 * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * 1. Redistributions of source code must retain the above copyright notice, this
 *    list of conditions and the following disclaimer
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 *    this list of conditions and the following disclaimer in the documentation
 *    and/or other materials provided with the distribution
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR
 * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
 * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * @author  Anders Evenrud <andersevenrud@gmail.com>
 * @license Simplified BSD License
 */();return function(){var n,r=B()(e);if(t){var o=B()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return O()(this,n)}}var Z=["open","close","message","error"],q=function(e){y()(n,e);var t=Y(n);function n(e,r){var o,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return d()(this,n),D.debug("Websocket::constructor()",e,r),(o=t.call(this,"Websocket@"+e)).uri=r,o.closed=!1,o.connected=!1,o.connecting=!1,o.reconnecting=!1,o.connectfailed=!1,o.options=z({reconnect:!0,interval:1e3,open:!0},i),o.connection=null,o._attachEvents(),o.options.open&&o.open(),o}return L()(n,[{key:"_destroyConnection",value:function(){var e=this;this.connection&&(Z.forEach((function(t){e.connection["on".concat(t)]=function(){}})),this.reconnecting=clearInterval(this.reconnecting),this.connection=null)}},{key:"_attachEvents",value:function(){var e=this;this.on("open",(function(t){var n=!!e.reconnecting;e.connected=!0,e.reconnecting=!1,e.connectfailed=!1,e.reconnecting=clearInterval(e.reconnecting),e.emit("connected",t,n)})),this.on("close",(function(t){e.connected||e.connectfailed||(e.emit("failed",t),e.connectfailed=!0),clearInterval(e.reconnecting),e._destroyConnection(),e.connected=!1,e.options.reconnect&&(e.reconnecting=setInterval((function(){e.closed||e.open()}),e.options.interval)),e.emit("disconnected",t,e.closed)}))}},{key:"open",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.connection&&!t||(this._destroyConnection(),this.reconnecting=clearInterval(this.reconnecting),this.connection=new WebSocket(this.uri),this.closed=!1,Z.forEach((function(t){e.connection["on".concat(t)]=function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return e.emit.apply(e,[t].concat(r))}})))}},{key:"send",value:function(){var e;return(e=this.connection).send.apply(e,arguments)}},{key:"close",value:function(){var e;return this.closed=!0,(e=this.connection).close.apply(e,arguments)}}]),n}(T.EventEmitter);function X(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?X(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):X(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}
/*
 * OS.js - JavaScript Cloud/Web Desktop Platform
 *
 * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * 1. Redistributions of source code must retain the above copyright notice, this
 *    list of conditions and the following disclaimer
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 *    this list of conditions and the following disclaimer in the documentation
 *    and/or other materials provided with the distribution
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR
 * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
 * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * @author  Anders Evenrud <andersevenrud@gmail.com>
 * @license Simplified BSD License
 */var J=function(e){try{for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var o=e.apply(void 0,n);if("boolean"==typeof o)return o}catch(e){D.warn("droppable value parsing error",e)}return!0},ee=function(e,t){var n,r=[];if(e.dataTransfer){r=e.dataTransfer.files?Array.from(e.dataTransfer.files):[];try{var o=e.dataTransfer.getData(t);try{n="application/json"===t?void 0===o?o:JSON.parse(o):o}catch(e){n=o,D.warn("droppable dataTransfer parsing error",e)}}catch(e){D.warn("droppable dataTransfer parsing error",e)}}return{files:r,data:n}},te=function(e,t,n,r){var o="function"==typeof r,i="application/json"===e?JSON.stringify(n):n;return function(n,s,a){if(n.dataTransfer){if(n.dataTransfer.setDragImage&&o)try{r(n,s,a)}catch(e){D.warn("draggable dragstart setDragImage error",e)}try{n.dataTransfer.effectAllowed=t,n.dataTransfer.setData(e,i)}catch(e){D.warn("draggable dragstart dataTransfer error",e)}}}},ne=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Q({type:"application/json",effect:"move",ondragstart:function(){return!0},ondragend:function(){return!0},setDragImage:null},t),r=n.type,o=n.effect,i=n.data,s=n.ondragstart,a=n.ondragend,c=n.setDragImage,u=te(r,o,i,c),l=function(n){return e.setAttribute("aria-grabbed","true"),u(n,e,t),s(n)},f=function(t){return e.setAttribute("aria-grabbed","false"),a(t)},d=function(){e.removeAttribute("draggable"),e.removeAttribute("aria-grabbed"),e.removeEventListener("dragstart",l),e.removeEventListener("dragend",f),e.classList.remove("osjs__draggable")};return e.setAttribute("draggable","true"),e.setAttribute("aria-grabbed","false"),e.addEventListener("dragstart",l),e.addEventListener("dragend",f),e.classList.add("osjs__draggable"),{destroy:d}},re=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Q({type:"application/json",effect:"move",ondragenter:function(){return!0},ondragover:function(){return!0},ondragleave:function(){return!0},ondrop:function(){return!0},strict:!1},t),r=n.strict,o=n.type,i=n.effect,s=n.ondragenter,a=n.ondragover,c=n.ondragleave,u=n.ondrop,l=function(e){return s(e)},f=function(t){return e.classList.remove("osjs__drop"),J(c,t)},d=function(t){return t.preventDefault(),e.contains(t.target)?(t.stopPropagation(),t.dataTransfer.dropEffect=i,e.classList.add("osjs__drop"),J(a,t)):(e.classList.remove("osjs__drop"),!1)},p=function(t){if(r&&t.target!==e)return!1;var n=ee(t,o),i=n.files,s=n.data;return t.stopPropagation(),t.preventDefault(),e.classList.remove("osjs__drop"),J(u,t,s,i)},L=function(){e.removeAttribute("aria-dropeffect",i),e.removeEventListener("dragenter",l),e.removeEventListener("dragover",d),e.removeEventListener("dragleave",f),e.removeEventListener("drop",p),e.classList.remove("osjs__droppable")};return e.setAttribute("aria-dropeffect",i),e.addEventListener("dragenter",l),e.addEventListener("dragover",d),e.addEventListener("dragleave",f),e.addEventListener("drop",p),e.classList.add("osjs__droppable"),{destroy:L}};function oe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ie(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oe(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}
/*
 * OS.js - JavaScript Cloud/Web Desktop Platform
 *
 * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * 1. Redistributions of source code must retain the above copyright notice, this
 *    list of conditions and the following disclaimer
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 *    this list of conditions and the following disclaimer in the documentation
 *    and/or other materials provided with the distribution
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR
 * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
 * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * @author  Anders Evenrud <andersevenrud@gmail.com>
 * @license Simplified BSD License
 */var se,ae,ce="Notification"in window,ue=function(e,t){return new Promise((function(n,r){var o=document.createElement("link");return o.setAttribute("rel","stylesheet"),o.setAttribute("type","text/css"),o.onload=function(){return n(o)},o.onerror=function(e){return r(e)},o.setAttribute("href",t),e.appendChild(o),o}))},le=function(e,t){return new Promise((function(n,r){var o=document.createElement("script");return o.onreadystatechange=function(){"complete"!==this.readyState&&"loaded"!==this.readyState||n(o)},o.onerror=function(e){return r(e)},o.onload=function(){return n(o)},o.src=t,e.appendChild(o),o}))},fe=function(e){return Object.keys(e).map((function(e){return[e,e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()]})).map((function(t){return"".concat(t[1],": ").concat(e[t[0]])})).join(";")},de=function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){return e=!0}});window.addEventListener("testPassive",null,t),window.removeEventListener("testPassive",null,t)}catch(e){}return function(){return e}}(),pe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=ie({volume:1},t),r=new Audio;r.voule=n.volume,r.src=e;try{var o=r.play();if(o instanceof Promise)return o.then((function(){return r})).catch((function(t){return D.warn("Failed to play sound",e,t)}))}catch(t){D.warn("Failed to play sound",e,t)}return Promise.resolve(r)},Le=(se=document.createElement("div"),ae=["WebkitTransition","MozTransition","OTransition","transition"].some((function(e){return void 0!==se.style[e]})),function(){return ae});function he(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _e(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?he(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):he(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function me(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}
/*
 * OS.js - JavaScript Cloud/Web Desktop Platform
 *
 * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * 1. Redistributions of source code must retain the above copyright notice, this
 *    list of conditions and the following disclaimer
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 *    this list of conditions and the following disclaimer in the documentation
 *    and/or other materials provided with the distribution
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR
 * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
 * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * @author  Anders Evenrud <andersevenrud@gmail.com>
 * @license Simplified BSD License
 */();return function(){var n,r=B()(e);if(t){var o=B()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return O()(this,n)}}var ve=[],Ee=0,ye=1,ge=null,Oe='<div class="osjs-window-inner">\n  <div class="osjs-window-header">\n    <div class="osjs-window-icon">\n      <div></div>\n    </div>\n    <div class="osjs-window-title"></div>\n    <div class="osjs-window-button" data-action="minimize">\n      <div></div>\n    </div>\n    <div class="osjs-window-button" data-action="maximize">\n      <div></div>\n    </div>\n    <div class="osjs-window-button" data-action="close">\n      <div></div>\n    </div>\n  </div>\n  <div class="osjs-window-content">\n  </div>\n  <div class="osjs-window-resize" data-direction="n"></div>\n  <div class="osjs-window-resize" data-direction="nw"></div>\n  <div class="osjs-window-resize" data-direction="w"></div>\n  <div class="osjs-window-resize" data-direction="sw"></div>\n  <div class="osjs-window-resize" data-direction="s"></div>\n  <div class="osjs-window-resize" data-direction="se"></div>\n  <div class="osjs-window-resize" data-direction="e"></div>\n  <div class="osjs-window-resize" data-direction="ne"></div>\n</div>'.replace(/\n\s+/g,"").trim(),Ae=function(e){y()(n,e);var t=me(n);function n(e){var r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return d()(this,n),o=_e({id:null,title:null,parent:null,template:null,ondestroy:null,attributes:{},position:{},dimension:{},state:{}},o),D.debug("Window::constructor()",o),r=t.call(this,"Window@"+o.id),"string"==typeof o.position&&(o.attributes.gravity=o.position,o.position={}),r.id=o.id,r.wid=++Ee,r.parent=o.parent,r.children=[],r.core=e,r.destroyed=!1,r.rendered=!1,r.inited=!1,r.attributes=F(o.attributes),r.state=U(o.state,o,r.attributes),r.$element=document.createElement("div"),r.$content=null,r.$header=null,r.$icon=null,r.$title=null,r._preventDefaultPosition=!1,r._loadingDebounce=null,r._template=o.template,r._ondestroy=o.ondestroy||function(){return!0},r._lastCssText="",r._lastAttributes={},ve.push(_()(r)),r}return L()(n,[{key:"destroy",value:function(){var e=this;if(!this.destroyed&&("function"!=typeof this._ondestroy||!1!==this._ondestroy())){this.destroyed=!0,D.debug("Window::destroy()"),this.emit("destroy",this),this.core.emit("osjs/window:destroy",this),this.children.forEach((function(e){return e.destroy()})),this.$element&&this.$element.remove(),ge===this&&(ge=null);var t=ve.findIndex((function(t){return t===e}));-1!==t&&ve.splice(t,1),this.children=[],this.parent=null,this.$element=null,this.$content=null,this.$header=null,this.$icon=null,this.$title=null,v()(B()(n.prototype),"destroy",this).call(this)}}},{key:"init",value:function(){var e=this;return this.inited||(this.parent&&(this.on("destroy",(function(){var t=e.parent.children.findIndex((function(t){return t===e}));-1!==t&&e.parent.children.splice(t,1)})),this.parent.children.push(this)),this._initTemplate(),this._initBehavior(),this.inited=!0,this.emit("init",this),this.core.emit("osjs/window:create",this)),this}},{key:"_initTemplate",value:function(){var e=this.core.config("windows.template")||Oe;this._template?this.$element.innerHTML="function"==typeof this._template?this._template(this,e):this._template:this.$element.innerHTML=e,this.$content=this.$element.querySelector(".osjs-window-content"),this.$header=this.$element.querySelector(".osjs-window-header"),this.$icon=this.$element.querySelector(".osjs-window-icon > div"),this.$title=this.$element.querySelector(".osjs-window-title")}},{key:"_initBehavior",value:function(){var e=this;if(this.core.has("osjs/desktop")){var t=function(e,t,n){var r=t.width,o=t.height,i=n.top,s=n.left,a=function(t,n){return isNaN(t)||t>1&&Number.isInteger(t)?t:Math.round(e[n]*parseFloat(t))};return{dimension:{width:a(r,"width"),height:a(o,"height")},position:{top:a(i,"height"),left:a(s,"width")}}}(this.core.make("osjs/desktop").getRect(),this.state.dimension,this.state.position),n=t.dimension,r=t.position;this.state.dimension=n,this.state.position=r}var o=this.core.make("osjs/window-behavior");if(o&&o.init(this),this.attributes.droppable){var i=re(this.$element,{ondragenter:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.emit.apply(e,["dragenter"].concat(n,[e]))},ondragover:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.emit.apply(e,["dragover"].concat(n,[e]))},ondragleave:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.emit.apply(e,["dragleave"].concat(n,[e]))},ondrop:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.emit.apply(e,["drop"].concat(n,[e]))}});this.on("destroy",(function(){return i.destroy()}))}}},{key:"_checkModal",value:function(){var e=this;this.parent&&(this.attributes.modal&&(this.on("render",(function(){return e.parent.setState("loading",!0)})),this.on("destroy",(function(){return e.parent.setState("loading",!1)}))),this.on("destroy",(function(){return e.parent.focus()})))}},{key:"_setClassNames",value:function(){var e=this,t=["osjs-window"].concat(c()(this.attributes.classNames));this.id&&t.push("Window_".concat(this.id)),t.filter((function(e){return!!e})).forEach((function(t){return e.$element.classList.add(t)}))}},{key:"render",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};return this.rendered||(this.inited||this.init(),this._setClassNames(),this._updateButtons(),this._updateAttributes(),this._updateStyles(),this._updateTitle(),this._updateIconStyles(),this._updateHeaderStyles(),this._checkModal(),this._preventDefaultPosition||this.gravitate(this.attributes.gravity),this.attributes.clamp&&this.clampToViewport(!1),this.setNextZindex(!0),this.core.$contents.appendChild(this.$element),G(this,t),this.rendered=!0,setTimeout((function(){e.emit("render",e),e.core.emit("osjs/window:render",e)}),1)),this}},{key:"close",value:function(){return!this.destroyed&&(this.emit("close",this),this.destroy(),!0)}},{key:"focus",value:function(){return!(this.state.minimized||!this._toggleState("focused",!0,"focus"))&&(this._focus(),!0)}},{key:"_focus",value:function(){ge&&ge!==this&&ge.blur(),ge=this,this.setNextZindex()}},{key:"blur",value:function(){var e=function(e){if(e){var t=document.activeElement;return e.contains(t)?t:null}return null}(this.$element);return e&&e.blur(),this._toggleState("focused",!1,"blur")}},{key:"minimize",value:function(){return!(!this.attributes.minimizable||!this._toggleState("minimized",!0,"minimize"))&&(this.blur(),!0)}},{key:"raise",value:function(){return this._toggleState("minimized",!1,"raise")}},{key:"maximize",value:function(){return!!this.attributes.maximizable&&this._maximize(!0)}},{key:"restore",value:function(){return this._maximize(!1)}},{key:"_maximize",value:function(e){var t=this;if(this._toggleState("maximized",e,e?"maximize":"restore")){var n=function(){return t.emit("resized",{width:t.$element?t.$element.offsetWidth:-1,height:t.$element?t.$element.offsetHeight:-1},t)};return Le()?this.once("transitionend",n):n(),!0}return!1}},{key:"resizeFit",value:function(e){if(e=e||this.$content.firstChild){var t=function(e,t,n){var r=(n.parentNode.classList.contains("osjs-gui")?n.parentNode:n).getBoundingClientRect(),o=e.$content.getBoundingClientRect(),i=Math.ceil(o.height-r.height),s=Math.ceil(o.width-r.width),a=e.$header.offsetHeight,c=e.state.position,u=c.left,l=c.top,f=e.attributes.minDimension,d=e.attributes.maxDimension,p=Math.max(n.offsetWidth+s,f.width),L=Math.max(n.offsetHeight+i+a,f.height);return d.width>0&&(p=Math.min(p,d.width)),d.height>0&&(L=Math.min(L,d.height)),p=Math.max(p,n.offsetWidth),L=Math.max(L,n.offsetHeight),t&&(p=Math.min(p,t.width-u),L=Math.min(L,t.height-l)),{width:p,height:L}}(this,this.core.has("osjs/desktop")?this.core.make("osjs/desktop").getRect():null,e),n=t.width,r=t.height;isNaN(n)||isNaN(r)||this.setDimension({width:n,height:r})}}},{key:"clampToViewport",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.core.has("osjs/desktop")){var t=this.core.make("osjs/desktop").getRect();this.state.position=_e(_e({},this.state.position),H(t,this.state)),e&&this._updateStyles()}}},{key:"setIcon",value:function(e){this.state.icon=e,this._updateIconStyles()}},{key:"setTitle",value:function(e){this.state.title=e||"",this._updateTitle(),this.core.emit("osjs/window:change",this,"title",e)}},{key:"setDimension",value:function(e){var t=_e(_e({},this.state.dimension),e||{}),n=t.width,r=t.height;this.state.dimension.width=n,this.state.dimension.height=r,this._updateStyles()}},{key:"setPosition",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=_e(_e({},this.state.position),e||{}),r=n.left,o=n.top;this.state.position.top=o,this.state.position.left=r,t&&(this._preventDefaultPosition=!0),this._updateStyles()}},{key:"setZindex",value:function(e){this.state.zIndex=e,D.debug("Window::setZindex()",e),this._updateStyles()}},{key:"setNextZindex",value:function(e){(e||this._checkNextZindex())&&(this.setZindex(ye),ye++)}},{key:"setState",value:function(e,t){var n=this,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=function(){return n._setState(e,t,r)};"loading"===e&&r&&(clearTimeout(this._loadingDebounce),!0===t)?this._loadingDebounce=setTimeout((function(){return o()}),250):o()}},{key:"gravitate",value:function(e){if(this.core.has("osjs/desktop")){var t=function(e,t,n){var r=e.state.position,o=r.left,i=r.top;if("center"===n)o=t.width/2-e.state.dimension.width/2,i=t.height/2-e.state.dimension.height/2;else if(n){var s=n.match(/top|bottom/),a=n.match(/left|rigth/);n.match(/top/)?i=t.top:n.match(/bottom/)&&(i=t.height-e.state.dimension.height+t.top),n.match(/left/)?o=t.left:n.match(/right/)&&(o=t.width-e.state.dimension.width),!s&&n.match(/center/)?i=t.height/2-e.state.dimension.height/2:!a&&n.match(/center/)&&(o=t.width/2-e.state.dimension.width/2)}return{left:o,top:i}}(this,this.core.make("osjs/desktop").getRect(),e);this.setPosition(t)}}},{key:"getState",value:function(e){var t=this.state[e];return-1!==["position","dimension","styles"].indexOf(e)?_e({},t):t}},{key:"getSession",value:function(){return!1===this.attributes.sessionable?null:{id:this.id,maximized:this.state.maximized,minimized:this.state.minimized,position:_e({},this.state.position),dimension:_e({},this.state.dimension)}}},{key:"_setState",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=this.state[e];this.state[e]=t,n&&(r!==t&&D.debug("Window::_setState()",e,t),this._updateAttributes(),this._updateStyles())}},{key:"_toggleState",value:function(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return this.state[e]!==t&&(D.debug("Window::_toggleState()",e,t,n,r),this.state[e]=t,this.emit(n,this),this.core.emit("osjs/window:change",this,e,t),r&&this._updateAttributes(),!0)}},{key:"_checkNextZindex",value:function(){var e=this,t=this.attributes.ontop,n=this.state.zIndex,r=ve.filter((function(e){return e.attributes.ontop===t})).filter((function(t){return t.wid!==e.wid})).map((function(e){return e.state.zIndex}));return n<(r.length>0?Math.max.apply(null,r):0)}},{key:"_updateDOM",value:function(){this._updateAttributes(),this._updateStyles()}},{key:"_updateButtons",value:function(){var e=this,t={maximizable:"maximize",minimizable:"minimize",closeable:"close"};this.attributes.controls?Object.keys(t).forEach((function(n){var r;e.attributes[n]||(r=t[n],e.$header.querySelector(".osjs-window-button[data-action=".concat(r,"]")).style.display="none")})):Array.from(this.$header.querySelectorAll(".osjs-window-button")).forEach((function(e){return e.style.display="none"}))}},{key:"_updateTitle",value:function(){if(this.$title){var e=(t=this.state.title,(n=document.createElement("div")).innerHTML=t,n.textContent);this.$title.innerHTML!==e&&(this.$title.innerHTML=e)}var t,n}},{key:"_updateIconStyles",value:function(){if(this.$icon){var e="url(".concat(this.state.icon,")");this.$icon.style.backgroundImage!==e&&(this.$icon.style.backgroundImage=e)}}},{key:"_updateHeaderStyles",value:function(){if(this.$header){var e=this.attributes.header?void 0:"none";this.$header.style.display!==e&&(this.$header.style.display=e)}}},{key:"_updateAttributes",value:function(){var e,t,n,r=this;if(this.$element){var o=(e=this.id,t=this.state,n=this.attributes,{id:e,media:t.media,moving:t.moving,resizing:t.resizing,loading:t.loading,focused:t.focused,maximized:t.maximized,minimized:t.minimized,modal:n.modal,ontop:n.ontop,resizable:n.resizable,moveable:n.moveable,maximizable:n.maximizable,minimizable:n.minimizable}),i=Object.keys(o).filter((function(e){return o[e]!==r._lastAttributes[e]}));i.length>0&&(i.forEach((function(e){return r.$element.setAttribute("data-".concat(e),String(o[e]))})),this._lastAttributes=o)}}},{key:"_updateStyles",value:function(){if(this.$element){var e=fe((t=this.state,n=this.attributes,r=t.zIndex,o=t.styles,i=t.position,s=i.top,a=i.left,c=t.dimension,u=c.width,l=c.height,f=n.ontop,x({top:String(s)+"px",left:String(a)+"px",height:String(l)+"px",width:String(u)+"px",zIndex:10+(f?8388635:0)+r},o)));e!==this._lastCssText&&(this.$element.style.cssText=e,this._lastCssText=e)}var t,n,r,o,i,s,a,c,u,l,f}}],[{key:"getWindows",value:function(){return ve}},{key:"lastWindow",value:function(){return ge}}]),n}(T.EventEmitter);function Be(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Se(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Be(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Be(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function be(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}
/*
 * OS.js - JavaScript Cloud/Web Desktop Platform
 *
 * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * 1. Redistributions of source code must retain the above copyright notice, this
 *    list of conditions and the following disclaimer
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 *    this list of conditions and the following disclaimer in the documentation
 *    and/or other materials provided with the distribution
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR
 * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
 * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * @author  Anders Evenrud <andersevenrud@gmail.com>
 * @license Simplified BSD License
 */();return function(){var n,r=B()(e);if(t){var o=B()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return O()(this,n)}}var Te,Pe=[],Re=0,we=function(e){return"osjs/application/"+e.name},Ne=function(e){y()(n,e);var t=be(n);function n(e,r){var o;d()(this,n),r=Se({args:{},options:{},metadata:{}},r),D.debug("Application::constructor()",r);var i=r.options.settings?Se({},r.options.settings):{},s=r.metadata&&r.metadata.name?"Application@"+r.metadata.name:"Application"+String(Re);return(o=t.call(this,s)).pid=Re,o.core=e,o.args=r.args,o.options=Se({sessionable:!0,windowAutoFocus:!0},r.options),o.metadata=r.metadata,o.windows=[],o.workers=[],o.requestOptions={},o.destroyed=!1,o.settings=e.make("osjs/settings").get(we(o.metadata),null,i),o.started=new Date,o.sockets=[],Pe.push(_()(o)),Re++,o.core.emit("osjs/application:create",_()(o)),o}return L()(n,[{key:"destroy",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(!this.destroyed){this.destroyed=!0,this.emit("destroy"),this.core.emit("osjs/application:destroy",this);var r=function(e,t){try{e.forEach(t)}catch(e){D.warn("Exception on application destruction",e)}return[]};if(this.windows=r(this.windows,(function(e){return e.destroy()})),this.sockets=r(this.sockets,(function(e){return e.close()})),this.workers=r(this.workers,(function(e){return e.terminate()})),t){var o=Pe.findIndex((function(t){return t===e}));-1!==o&&Pe.splice(o,1)}v()(B()(n.prototype),"destroy",this).call(this)}}},{key:"relaunch",value:function(){var e=this,t=this.windows.map((function(e){return e.getSession()}));this.destroy(),setTimeout((function(){e.core.run(e.metadata.name,Se({},e.args),Se(Se({},e.options),{},{forcePreload:e.core.config("development"),restore:{windows:t}}))}),1)}},{key:"resource",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.core.url(e,t,this.metadata)}},{key:"request",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"json",r=this.resource(e);return this.core.request(r,t,n)}},{key:"socket",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/socket",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t=Se({socket:{}},t);var n=this.resource(e,{type:"websocket"}),r=new q(this.metadata.name,n,t.socket);return this.sockets.push(r),r}},{key:"send",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.core.send("osjs/application:socket:message",{pid:this.pid,name:this.metadata.name,args:t})}},{key:"worker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.resource(e),r=new Worker(n,Se({credentials:"same-origin"},t));return this.workers.push(r),r}},{key:"createWindow",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this.windows.find((function(e){return e.id===t.id}));if(n){var r=this.core.make("osjs/locale").translate("ERR_WINDOW_ID_EXISTS",t.id);throw new Error(r)}var o=this.core.config("application.windows",[]),i=V(o,this.metadata.name,t.id),s=new Ae(this.core,b()(t,i));if(this.options.restore){var a=this.options.restore.windows||[],c=a.findIndex((function(e){return e.id===s.id}));if(-1!==c){var u=a[c];s.setPosition(u.position,!0),s.setDimension(u.dimension),u.minimized?s.minimize():u.maximized&&s.maximize(),this.options.restore.windows.splice(c,1)}}return s.init(),this.windows.push(s),this.emit("create-window",s),s.on("destroy",(function(){if(!e.destroyed){var t=e.windows.findIndex((function(e){return e===s}));-1!==t&&e.windows.splice(t,1)}e.emit("destroy-window",s)})),this.options.windowAutoFocus&&s.focus(),s}},{key:"removeWindow",value:function(e){this.windows.filter(e).forEach((function(e){return e.destroy()}))}},{key:"getSession",value:function(){return{args:Se({},this.args),name:this.metadata.name,windows:this.windows.map((function(e){return e.getSession()})).filter((function(e){return null!==e}))}}},{key:"emitAll",value:function(e){var t=this;D.warn("Application#emitAll is deprecated. Use Core#broadcast instead");var n=function(e){return e.pid!==t.pid},r="function"==typeof e?e:"string"==typeof e?function(t){return n(t)&&t.metadata.name===e}:n;return function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];return Pe.filter(r).map((function(t){return t.emit.apply(t,[e].concat(n))}))}}},{key:"saveSettings",value:function(){var e=this.core.make("osjs/settings"),t=we(this.metadata);return e.set(t,null,this.settings),e.save()}}],[{key:"getApplications",value:function(){return Pe}},{key:"destroyAll",value:function(){Pe.forEach((function(e){try{e.destroy(!1)}catch(e){D.warn("Exception on destroyAll",e)}})),Pe.splice(0,Pe.length)}}]),n}(T.EventEmitter),Ce=function(){function e(t){var n=this;d()(this,e),this.core=t,this.$loading=document.createElement("div"),this.$loading.className="osjs-boot-splash",t.on("osjs/core:boot",(function(){return n.show()})),t.on("osjs/core:booted",(function(){return n.destroy()})),t.on("osjs/core:logged-in",(function(){return n.show()})),t.on("osjs/core:started",(function(){return n.destroy()}))}return L()(e,[{key:"init",value:function(){this.$loading.appendChild(document.createTextNode("Loading..."))}},{key:"show",value:function(){this.$loading.parentNode||this.core.$root.appendChild(this.$loading)}},{key:"destroy",value:function(){this.$loading.parentNode&&this.$loading.remove()}}]),e}(),je=n(9),ke=n(21),Ie=n.n(ke),De={nb:"nb_NO"},Me=/\{(\d+)\}/g,xe=function(e){return function(t,n){return n in e?e[n]:t}},Fe=function(e,t){var n=function(e,t){return e.config("locale."+t)}(e,t);return{defaultLocale:n,userLocale:function(e,t,n){return e.make("osjs/settings").get("osjs/locale",t,n)}(e,t,n)}},Ue=function(e,t,n,r){var o=e.en_EN||{},i=e[t]||e[n]||{};return void 0===i[r]?o[r]||r:i[r]},He=function(e,t,n,r){for(var o=Ue(e,t,n,r),i=arguments.length,s=new Array(i>4?i-4:0),a=4;a<i;a++)s[a-4]=arguments[a];return o.replace(Me,xe(s))},Ge=function(e){return function(t,n){var r=Fe(e,"language"),o=r.defaultLocale;return t[r.userLocale]||t[o]||t.en_EN||n}},Ke=function(e){return function(t){var n=Fe(e,"language"),r=n.defaultLocale,o=n.userLocale;return function(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),s=1;s<n;s++)i[s-1]=arguments[s];return He.apply(void 0,[t,o,r,e].concat(i))}}},We=(Te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.userLanguage||e.language||"",n=function(e){return De[e]?De[e]:e.match(/_/)?e:e?"".concat(e,"_").concat(e.toUpperCase()):""},r=(e.languages||[t]).map((function(e){return n(e.replace("-","_"))})).filter((function(e){return!!e}));return r[r.length-1]}(navigator),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"en_EN",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=Te||e;return t.lenght>0&&-1===t.indexOf(Te)?e:n}),Ve=n.p+"f4cfc6708cf6bfc17d4b1e775f594ae2.png",$e=function(e){return e.replace(/(index\.(html?|php))$/,"").replace(/\/?$/,"/")},ze=$e(window.location.pathname),Ye=$e(window.location.href),Ze={en_EN:"English",nb_NO:"Norwegian, Norsk (bokml)",vi_VN:"Vietnamese, Vietnamese",fr_FR:"French",de_DE:"German",sl_SI:"Slovenian, Slovenina",zh_CN:"Chinese (simplified)",fa_FA:"Persian",pt_BR:"Portugus (Brasil)",ru_RU:" (Russian)",tr_TR:"Trke (Turkish)",sv_SE:"Svenska (Swedish)"},qe={development:!"production".match(/^prod/i),standalone:!1,languages:Ze,http:{ping:!0,public:ze,uri:Ye},ws:{connectInterval:5e3,uri:Ye.replace(/^http/,"ws"),disabled:!1},packages:{manifest:"/metadata.json",metadata:[],hidden:[],permissions:{},overrideMetadata:{}},application:{pinned:[],autostart:[],categories:{development:{label:"LBL_APP_CAT_DEVELOPMENT",icon:"applications-development"},science:{label:"LBL_APP_CAT_SCIENCE",icon:"applications-science"},games:{label:"LBL_APP_CAT_GAMES",icon:"applications-games"},graphics:{label:"LBL_APP_CAT_GRAPHICS",icon:"applications-graphics"},network:{label:"LBL_APP_CAT_NETWORK",icon:"applications-internet"},multimedia:{label:"LBL_APP_CAT_MULTIMEDIA",icon:"applications-multimedia"},office:{label:"LBL_APP_CAT_OFFICE",icon:"applications-office"},system:{label:"LBL_APP_CAT_SYSTEM",icon:"applications-system"},utilities:{label:"LBL_APP_CAT_UTILITIES",icon:"applications-utilities"},other:{label:"LBL_APP_CAT_OTHER",icon:"applications-other"}},windows:[]},auth:{ui:{},cookie:{name:"osjs.auth",expires:7,enabled:!1,secure:!1},login:{username:null,password:null},defaultUserData:{id:null,username:"osjs",groups:[]}},settings:{lock:[],defaults:{"osjs/default-application":{},"osjs/session":[],"osjs/desktop":{},"osjs/locale":{}}},search:{enabled:!0},notifications:{native:!1},desktop:{lock:!1,contextmenu:{enabled:!0,defaults:!0},settings:{font:"Roboto",theme:"StandardTheme",sounds:"FreedesktopSounds",icons:"GnomeIcons",animations:!1,panels:[{position:"top",items:[{name:"menu"},{name:"windows"},{name:"tray"},{name:"clock"}]}],widgets:[],keybindings:{"open-application-menu":"shift+alt+a","close-window":"shift+alt+w"},notifications:{position:"top-right"},background:{src:Ve,color:"#572a79",style:"cover"},iconview:{enabled:!0,path:"home:/.desktop",fontColorStyle:"system",fontColor:"#ffffff"}}},locale:{language:We("en_EN",Object.keys(Ze)),rtl:["az","fa","he","uz","ar"],format:{shortDate:"yyyy-mm-dd",mediumDate:"dS mmm yyyy",longDate:"dS mmmm yyyy",fullDate:"dddd dS mmmm yyyy",shortTime:"HH:MM",longTime:"HH:MM:ss"}},windows:{lofi:!1,mobile:!1,template:null,clampToViewport:!0,moveKeybinding:"ctrl"},vfs:{watch:!0,defaultPath:"home:/",defaultAdapter:"system",adapters:{},mountpoints:[{name:"apps",label:"Applications",adapter:"apps",icon:R,attributes:{visibility:"restricted",readOnly:!0}},{name:"osjs",label:"OS.js",adapter:"system",icon:{name:"folder-publicshare"}},{name:"home",label:"Home",adapter:"system",icon:{name:"user-home"}}],icons:{"^application/zip":{name:"package-x-generic"},"^application/javascript":{name:"text-x-script"},"^application/json":{name:"text-x-script"},"^application/x-python":{name:"text-x-script"},"^application/php":{name:"text-x-script"},"^application/pdf":{name:"x-office-document"},"^application/rtf":{name:"x-office-document"},"^application/msword":{name:"x-office-document"},"^application/(xz|tar|gzip)":{name:"package-x-generic"},"^text/css":{name:"text-x-script"},"^text/html":{name:"text-html"},"^(application|text)/xml":{name:"text-html"},"^application":{name:"application-x-executable"},"^text":{name:"text-x-generic"},"^audio":{name:"audio-x-generic"},"^video":{name:"video-x-generic"},"^image":{name:"image-x-generic"}}},providers:{globalBlacklist:["osjs/websocket","osjs/clipboard","osjs/gapi"],globalWhitelist:[]}},Xe=n(10),Qe=n.n(Xe),Je=n(14),et=n.n(Je);function tt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function nt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tt(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}
/*
 * OS.js - JavaScript Cloud/Web Desktop Platform
 *
 * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * 1. Redistributions of source code must retain the above copyright notice, this
 *    list of conditions and the following disclaimer
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 *    this list of conditions and the following disclaimer in the documentation
 *    and/or other materials provided with the distribution
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR
 * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
 * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * @author  Anders Evenrud <andersevenrud@gmail.com>
 * @license Simplified BSD License
 */var rt=[window.ArrayBuffer,window.ArrayBufferView,window.Blob,window.File,window.URLSearchParams,window.FormData].filter((function(e){return!!e})),ot=function(e,t,n){var r,o=nt({credentials:"same-origin",method:"get",headers:{}},t);"json"===n&&(o.headers=nt(nt({},o.headers),{},{Accept:"application/json, text/plain, */*","Content-Type":"application/json"})),o.body&&"get"===o.method.toLowerCase()&&(e+="?"+(r=o.body,Object.keys(r).filter((function(e){return"object"!==et()(r[e])})).map((function(e){return encodeURIComponent(e)+"="+encodeURIComponent(r[e])})).join("&")),delete o.body);var i=void 0!==o.body,s="string"==typeof o.body;"json"===n&&i&&!s&&(o.body instanceof FormData||rt.find((function(e){return o.body instanceof e}))||(o.body=JSON.stringify(o.body)));return[e,o]},it=function(e,t){return new Promise((function(n,r){var o=new XMLHttpRequest,i=function(e){return function(t){console.warn(e,t),r(new Error(e))}};"function"==typeof t.onProgress&&("GET"===t.method.toUpperCase()?o:o.upload).addEventListener("progress",(function(e){if(e.lengthComputable){var n=Math.round(e.loaded/e.total*100);t.onProgress(e,n)}}));o.addEventListener("load",(function(){n({status:o.status,statusText:o.statusText,ok:o.status>=200&&o.status<=299,headers:{get:function(e){return o.getResponseHeader(e)}},text:function(){return Promise.resolve(JSON.responseText)},json:function(){return Promise.resolve(JSON.parse(o.responseText))},arrayBuffer:function(){return Promise.resolve(o.response)}})})),o.addEventListener("error",i("An error occured while performing XHR request")),o.addEventListener("abort",i("XHR request was aborted")),o.open(t.method,e),Object.entries(t.headers).forEach((function(e){var t=Qe()(e,2),n=t[0],r=t[1];return o.setRequestHeader(n,r)})),o.responseType=t.responseType||"",o.send(t.body)}))},st=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=ot(e,t,n),o=Qe()(r,2),i=o[0],s=o[1],a=function(e,t){return Promise.reject(new Error(t||"".concat(e.status," (").concat(e.statusText,")")))},c=t.xhr?it(i,s):window.fetch(i,s);return c.then((function(e){if(!e.ok){var t=e.headers.get("content-type"),r=t&&-1!==t.indexOf("application/json")?"json":"text";return e[r]().then((function(t){return a(e,t.error)}))}return"json"===n?e.json():e}))};function at(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ct(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?at(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):at(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}
/*
 * OS.js - JavaScript Cloud/Web Desktop Platform
 *
 * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * 1. Redistributions of source code must retain the above copyright notice, this
 *    list of conditions and the following disclaimer
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 *    this list of conditions and the following disclaimer in the documentation
 *    and/or other materials provided with the distribution
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR
 * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
 * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * @author  Anders Evenrud <andersevenrud@gmail.com>
 * @license Simplified BSD License
 */var ut=function(e){var t=e.http,n=e.ws;return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("string"!=typeof e)return t.public;if(e.match(/^(http|ws|ftp)s?:/i))return e;var i=ct({type:null,prefix:"websocket"===r.type},r),s=i.type,a=i.prefix,c="websocket"===s?n.uri:t.uri,u=e.replace(/^\/+/,"");if(o.type){var l=e.replace(/^\/?/,"/"),f="theme"===o.type?"themes":"icons"===o.type?"icons":"apps";u="".concat(f,"/").concat(o.name).concat(l)}return a?c.replace(/\/$/,"")+u.replace(/^\/?/,"/"):t.public.replace(/^\/?/,"/")+u}};function lt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ft(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lt(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function dt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}
/*
 * OS.js - JavaScript Cloud/Web Desktop Platform
 *
 * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * 1. Redistributions of source code must retain the above copyright notice, this
 *    list of conditions and the following disclaimer
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 *    this list of conditions and the following disclaimer in the documentation
 *    and/or other materials provided with the distribution
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR
 * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
 * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * @author  Anders Evenrud <andersevenrud@gmail.com>
 * @license Simplified BSD License
 */();return function(){var n,r=B()(e);if(t){var o=B()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return O()(this,n)}}var pt=function(e){y()(n,e);var t=dt(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};d()(this,n),o=ft({classNames:["osjs-root"],root:document.body},o||{}),e=t.call(this,qe,r,o);var i=document.createElement("div");i.className="osjs-contents",e.logger=D,e.ws=null,e.ping=null,e.splash=o.splash?o.splash(_()(e)):new Ce(_()(e)),e.$root=o.root,e.$contents=i,e.$resourceRoot=o.resourceRoot||document.querySelector("head"),e.requestOptions={},e.urlResolver=ut(e.configuration),e.user=e.config("auth.defaultUserData"),e.options.classNames.forEach((function(t){return e.$root.classList.add(t)}));var s=e.configuration.ws.uri;if(!s.match(/^wss?:/)){var a=window.location,c=a.protocol,u=a.host;e.configuration.ws.uri=c.replace(/^http/,"ws")+"//"+u+s.replace(/^\/+/,"/")}return e.splash.init(),e}return L()(n,[{key:"destroy",value:function(){return this.destroyed?Promise.resolve():(this.emit("osjs/core:destroy"),this.ping=clearInterval(this.ping),Ne.destroyAll(),this.ws&&this.ws.close(),this.$contents&&(this.$contents.remove(),this.$contents=void 0),this.user=this.config("auth.defaultUserData"),this.ws=null,this.ping=null,v()(B()(n.prototype),"destroy",this).call(this))}},{key:"boot",value:function(){var e=this,t=function(t){return t&&D.error("Error while booting",t),console.groupEnd(),e.start()};return this.booted?Promise.resolve(!1):(console.group("Core::boot()"),this.$root.appendChild(this.$contents),this._attachEvents(),this.emit("osjs/core:boot"),v()(B()(n.prototype),"boot",this).call(this).then((function(){return e.emit("osjs/core:booted"),e.has("osjs/auth")?e.make("osjs/auth").show((function(n){var r=e.config("auth.defaultUserData");e.user=ft(ft({},r),n),e.has("osjs/settings")?e.make("osjs/settings").load().then((function(){return t()})).catch((function(){return t()})):t()})):(D.debug("OS.js STARTED WITHOUT ANY AUTHENTICATION"),t())})).catch(t))}},{key:"start",value:function(){var e=this,t=function(t){return e.emit("osjs/core:started"),t&&D.warn("Error while starting",t),console.groupEnd(),!t};return this.started?Promise.resolve(!1):(console.group("Core::start()"),this.emit("osjs/core:start"),this._createListeners(),v()(B()(n.prototype),"start",this).call(this).then((function(n){return console.groupEnd(),!!n&&new Promise((function(t,n){try{!1===e._createConnection((function(e){return e?n(e):t()}))&&t()}catch(e){n(e)}})).then((function(){return t()})).catch((function(e){return t(e)}))})).catch(t))}},{key:"_attachEvents",value:function(){var e=this;this.on("osjs/core:started",(function(){e.has("osjs/sounds")&&e.make("osjs/sounds").play("service-login")})),this.on("osjs/core:destroy",(function(){e.has("osjs/sounds")&&e.make("osjs/sounds").play("service-logout")})),this.on("osjs/application:socket:message",(function(e){var t=e.pid,n=e.args,r=Ne.getApplications().find((function(e){return e&&e.pid===t}));r&&r.emit.apply(r,["ws:message"].concat(c()(n)))})),this.on("osjs/core:connected",(function(t){var n=e.config("http.ping");if(n){var r="number"==typeof n?n:t.cookie.maxAge/2;e.ping=setInterval((function(){e.ws&&e.ws.connected&&!e.ws.reconnecting&&e.request("/ping").catch((function(e){return D.warn("Error on ping",e)}))}),r)}}));var t=function(){try{var t=e.make("osjs/settings").get("osjs/locale","language");e.$root.setAttribute("data-locale",t)}catch(e){console.warn(e)}};this.on("osjs/locale:change",t),this.on("osjs/settings:load",t),this.on("osjs/settings:save",t)}},{key:"_createConnection",value:function(e){var t=this;if(this.configuration.standalone||this.configuration.ws.disabled)return!1;var n=this.config("ws").uri,r=!1;return D.debug("Creating websocket connection on",n),this.ws=new q("CoreSocket",n,{interval:this.config("ws.connectInterval",1e3)}),this.ws.once("connected",(function(){setTimeout((function(){r=!0,e()}),100)})),this.ws.on("connected",(function(e,n){t.emit("osjs/core:connect",e,n)})),this.ws.once("failed",(function(n){r||(e(new Error("Connection closed")),t.emit("osjs/core:connection-failed",n))})),this.ws.on("disconnected",(function(e){t.emit("osjs/core:disconnect",e)})),this.ws.on("message",(function(e){try{var n=JSON.parse(e.data),r=n.params||[];t.emit.apply(t,[n.name].concat(c()(r)))}catch(e){D.warn("Exception on websocket message",e)}})),!0}},{key:"_createListeners",value:function(){var e=function(e){var t=e.pid,n=e.wid,r=e.args,o=Ne.getApplications().find((function(e){return e.pid===t})),i=o?o.windows.find((function(e){return e.wid===n})):null;i&&i.emit.apply(i,["iframe:get"].concat(c()(r||[])))};window.addEventListener("message",(function(t){var n=t.data||{};n&&"osjs/iframe:message"===n.name&&e.apply(void 0,c()(n.params||[]))}))}},{key:"url",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.urlResolver(e,t,n)}},{key:"request",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=this.has("osjs/locale")?this.make("osjs/locale").translate:function(e){return e};return this.config("standalone")&&!r?Promise.reject(new Error(o("ERR_REQUEST_STANDALONE"))):(e.match(/^((http|ws|ftp)s?:)/i)||(e=this.url(e),t=ft(ft({},t||{}),this.requestOptions||{})),st(e,t,n).catch((function(e){throw D.warn(e),new Error(o("ERR_REQUEST_NOT_OK",e))})))}},{key:"run",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return D.debug("Core::run()",e,t,n),this.make("osjs/packages").launch(e,t,n)}},{key:"open",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("osjs/application"===e.mime)return this.run(e.path.split("/").pop());var r=function(r){return t.run(r,{file:e},n)},o=this.make("osjs/packages").getCompatiblePackages(e.mime);if(o.length>0){if(o.length>1)try{return this._openApplicationDialog(n,o,e,r),!0}catch(e){D.warn("Exception on compability check",e)}return r(o[0].name),Promise.resolve(!0)}return Promise.resolve(!1)}},{key:"_openApplicationDialog",value:function(e,t,n,r){var o=this,i=this.make("osjs/locale").translate,s=e.useDefault&&this.has("osjs/settings"),a=s?this.make("osjs/settings").get("osjs/default-application",n.mime):null,c=s?"defaultApplication":"choice",u={title:i("LBL_LAUNCH_SELECT"),message:i("LBL_LAUNCH_SELECT_MESSAGE",n.path),choices:t.reduce((function(e,t){return ft(ft({},e),{},l()({},t.name,t.name))}),{}),value:a};a&&!e.forceDialog?r(a):this.make("osjs/dialog",c,u,(function(e,t){var i;"ok"===e&&("defaultApplication"===c?(s&&(i=t.checked?t.value:null,o.make("osjs/settings").set("osjs/default-application",n.mime,i).save()),r(t.value)):t&&r(t))}))}},{key:"off",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e.match(/^osjs\//)&&"function"!=typeof t)throw new TypeError("The callback must be a function");return v()(B()(n.prototype),"off",this).call(this,e,t,r)}},{key:"broadcast",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];var i="function"==typeof e?e:function(t){return t.metadata.name===e},s=Ne.getApplications().filter(i);return s.map((function(e){return e.emit.apply(e,[t].concat(r)),e.name}))}},{key:"send",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return this.ws.send(JSON.stringify({name:e,params:n}))}},{key:"setRequestOptions",value:function(e){this.requestOptions=ft({},e)}},{key:"getUser",value:function(){return ft({},this.user)}},{key:"middleware",value:function(e,t){return this.make("osjs/middleware").add(e,t)}}]),n}(je.CoreBase),Lt=["ctrl","shift","alt","meta"],ht=function(e,t){var n=String(e).toLowerCase().split("+"),r=String(t.key).toLowerCase();return n.every((function(e){return-1!==Lt.indexOf(e)?t[e+"Key"]:r===e}))},_t=function(e){var t=e.clientX,n=e.clientY,r=e.target,o=e.touches||e.changedTouches||[];return o.length&&(t=o[0].clientX,n=o[0].clientY),{clientX:t,clientY:n,touch:o.length>0,target:r}};
/*
 * OS.js - JavaScript Cloud/Web Desktop Platform
 *
 * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * 1. Redistributions of source code must retain the above copyright notice, this
 *    list of conditions and the following disclaimer
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 *    this list of conditions and the following disclaimer in the documentation
 *    and/or other materials provided with the distribution
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR
 * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
 * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * @author  Anders Evenrud <andersevenrud@gmail.com>
 * @license Simplified BSD License
 */function mt(e,t){for(var n=[],r=[],o=arguments.length;o-- >2;)n.push(arguments[o]);for(;n.length;){var i=n.pop();if(i&&i.pop)for(o=i.length;o--;)n.push(i[o]);else null!=i&&!0!==i&&!1!==i&&r.push(i)}return"function"==typeof e?e(t||{},r):{nodeName:e,attributes:t||{},children:r,key:t&&t.key}}function vt(e,t,n,r){var o,i=[].map,s=r&&r.children[0]||null,a=s&&function e(t){return{nodeName:t.nodeName.toLowerCase(),attributes:{},children:i.call(t.childNodes,(function(t){return 3===t.nodeType?t.nodeValue:e(t)}))}}(s),c=[],u=!0,l=h(e),f=function e(t,n,r){for(var o in r)"function"==typeof r[o]?function(e,o){r[e]=function(e){var i=o(e);return"function"==typeof i&&(i=i(m(t,l),r)),i&&i!==(n=m(t,l))&&!i.then&&L(l=_(t,h(n,i),l)),i}}(o,r[o]):e(t.concat(o),n[o]=h(n[o]),r[o]=h(r[o]));return r}([],l,h(t));return L(),f;function d(e){return"function"==typeof e?d(e(l,f)):null!=e?e:""}function p(){o=!o;var e=d(n);for(r&&!o&&(s=function e(t,n,r,o,i){if(o===r);else if(null==r||r.nodeName!==o.nodeName){var s=function e(t,n){var r="string"==typeof t||"number"==typeof t?document.createTextNode(t):(n=n||"svg"===t.nodeName)?document.createElementNS("http://www.w3.org/2000/svg",t.nodeName):document.createElement(t.nodeName),o=t.attributes;if(o){o.oncreate&&c.push((function(){o.oncreate(r)}));for(var i=0;i<t.children.length;i++)r.appendChild(e(t.children[i]=d(t.children[i]),n));for(var s in o)y(r,s,o[s],null,n)}return r}(o,i);t.insertBefore(s,n),null!=r&&g(t,n,r),n=s}else if(null==r.nodeName)n.nodeValue=o;else{!function(e,t,n,r){for(var o in h(t,n))n[o]!==("value"===o||"checked"===o?e[o]:t[o])&&y(e,o,n[o],t[o],r);var i=u?n.oncreate:n.onupdate;i&&c.push((function(){i(e,t)}))}(n,r.attributes,o.attributes,i=i||"svg"===o.nodeName);for(var a={},l={},f=[],p=r.children,L=o.children,_=0;_<p.length;_++){f[_]=n.childNodes[_],null!=(E=v(p[_]))&&(a[E]=[f[_],p[_]])}_=0;for(var m=0;m<L.length;){var E=v(p[_]),O=v(L[m]=d(L[m]));if(l[E])_++;else if(null==O||O!==v(p[_+1]))if(null==O||u)null==E&&(e(n,f[_],p[_],L[m],i),m++),_++;else{var A=a[O]||[];E===O?(e(n,A[0],A[1],L[m],i),_++):A[0]?e(n,n.insertBefore(A[0],f[_]),A[1],L[m],i):e(n,f[_],null,L[m],i),l[O]=L[m],m++}else null==E&&g(n,f[_],p[_]),_++}for(;_<p.length;)null==v(p[_])&&g(n,f[_],p[_]),_++;for(var _ in a)l[_]||g(n,a[_][0],a[_][1])}return n}(r,s,a,a=e)),u=!1;c.length;)c.pop()()}function L(){o||(o=!0,setTimeout(p))}function h(e,t){var n={};for(var r in e)n[r]=e[r];for(var r in t)n[r]=t[r];return n}function _(e,t,n){var r={};return e.length?(r[e[0]]=e.length>1?_(e.slice(1),t,n[e[0]]):t,h(n,r)):t}function m(e,t){for(var n=0;n<e.length;)t=t[e[n++]];return t}function v(e){return e?e.key:null}function E(e){return e.currentTarget.events[e.type](e)}function y(e,t,n,r,o){if("key"===t);else if("style"===t)if("string"==typeof n)e.style.cssText=n;else for(var i in"string"==typeof r&&(r=e.style.cssText=""),h(r,n)){var s=null==n||null==n[i]?"":n[i];"-"===i[0]?e.style.setProperty(i,s):e.style[i]=s}else"o"===t[0]&&"n"===t[1]?(t=t.slice(2),e.events?r||(r=e.events[t]):e.events={},e.events[t]=n,n?r||e.addEventListener(t,E):e.removeEventListener(t,E)):t in e&&"list"!==t&&"type"!==t&&"draggable"!==t&&"spellcheck"!==t&&"translate"!==t&&!o?e[t]=null==n?"":n:null!=n&&!1!==n&&e.setAttribute(t,n),null!=n&&!1!==n||e.removeAttribute(t)}function g(e,t,n){function r(){e.removeChild(function e(t,n){var r=n.attributes;if(r){for(var o=0;o<n.children.length;o++)e(t.childNodes[o],n.children[o]);r.ondestroy&&r.ondestroy(t)}return t}(t,n))}var o=n.attributes&&n.attributes.onremove;o?o(t,r):r()}}function Et(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function yt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Et(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Et(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}
/*
 * OS.js - JavaScript Cloud/Web Desktop Platform
 *
 * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * 1. Redistributions of source code must retain the above copyright notice, this
 *    list of conditions and the following disclaimer
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 *    this list of conditions and the following disclaimer in the documentation
 *    and/or other materials provided with the distribution
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR
 * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
 * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * @author  Anders Evenrud <andersevenrud@gmail.com>
 * @license Simplified BSD License
 */var gt=function(e){return e.replace(/\/$/,"").split("/").filter((function(e,t,n){return t<n.length-1})).join("/").replace(/(\/+)?$/,"/")},Ot=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.map((function(e,t){return t>0&&(e=e.replace(/^\/?/,"")),e.replace(/\/?$/,"")})).join("/")},At=function(e,t){return function(n,r){return"asc"===t?String(n[e]).localeCompare(r[e]):String(r[e]).localeCompare(n[e])}},Bt=function(e,t){return function(n,r){return"asc"===t?new Date(n[e])>new Date(r[e]):new Date(r[e])>new Date(n[e])}},St=function(e,t){return function(n,r){return n[e]<r[e]?-1:n[e]>r[e]?"asc"===t?1:0:"asc"===t?0:1}},bt=function(e){return"string"===e?At:"date"===e?Bt:St},Tt={size:bt("number"),mtime:bt("date"),ctime:bt("date"),atime:bt("date")},Pt=function(e){var t=[];return"/"!==(e.replace(/\/+/g,"/").replace(/^(\w+):/,"")||"/")&&t.push({isDirectory:!0,isFile:!1,mime:null,size:0,stat:{},filename:"..",path:gt(e)||"/"}),t},Rt=function(e,t,n){return new Promise((function(r,o){var i=new Blob([t],{type:n}),s=new FileReader;s.onerror=function(e){return o(e)},s.onloadend=function(){return r(s.result)},s[e](i)}))},wt=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];(isNaN(e)||"number"!=typeof e)&&(e=0);var n=t?1e3:1024,r=t?["kB","MB","GB","TB","PB","EB","ZB","YB"]:["KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"];if(e<n)return e+" B";var o=-1;do{e/=n,++o}while(e>=n);return"".concat(e.toFixed(1)," ").concat(r[o])},Nt=function(e,t){var n=e.path,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=r=yt({showHiddenFiles:!1,sortBy:"filename",sortDir:"asc"},r),i=o.sortDir,s=o.sortBy,a=o.filter;"function"!=typeof a&&(a=function(){return!0}),-1===["asc","desc"].indexOf(i)&&(i="asc");var u=r.showHiddenFiles?function(){return!0}:function(e){return"."!==e.filename.substr(0,1)},l=Tt[s]?Tt[s]:bt("string"),f=function(e){return yt(yt({},e),{},{humanSize:wt(e.size)})},d=Pt(n).sort(l(s,i)).map(f),p=t.filter((function(e){return e.isDirectory})).sort(l(s,i)).filter(u).filter(a).map(f),L=t.filter((function(e){return!e.isDirectory})).sort(l(s,i)).filter(u).filter(a).map(f);return[].concat(c()(d),c()(p),c()(L))},Ct=function(e,t,n){return"string"===n?Rt("readAsText",e,t):"uri"===n?Rt("readAsDataURL",e,t):"blob"===n?Promise.resolve(new Blob([e],{type:t})):Promise.resolve(e)},jt=function(e){return function(t){return t.isDirectory?{name:"folder"}:function(t){var n=Object.keys(e).find((function(e){return new RegExp(e).test(t.mime)}));return n?e[n]:{name:"application-x-executable"}}(t)}},kt=function(e){return yt({isDirectory:!1,isFile:!0,mime:"application/octet-stream",icon:null,size:-1,path:null,filename:null,label:null,stat:{},id:null,parent_id:null},e)},It=function(e){return e.split("/").reverse()[0]},Dt=function(e){var t=e.split("/");return 2===t.length?t[1]="":t.splice(t.length-1,1),t.join("/")},Mt=function(e){var t=String(e).replace(/\+/g,"/").match(/^([\w-_]+):+(.*)/),n=Array.from(t||[]).slice(1);return Qe()(n,1)[0]},xt=function(e){return function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return!(t instanceof Array)||t[n?"every":"some"]((function(t){return-1!==e.indexOf(t)}))}},Ft=function(e,t){var n=[],r=t[t.length-1]||{},o=-1!==["move","rename","copy"].indexOf(e),i=function(e){return"string"==typeof e?e:e.path};if(!(-1!==["readdir","download","url","exists","readfile","search","stat"].indexOf(e))){var s={method:e,source:i(t[0]),pid:r.pid};n.push(["osjs/vfs:directoryChanged",yt(yt({},s),{},{path:Dt(i(t[0]))})]),o&&n.push(["osjs/vfs:directoryChanged",yt(yt({},s),{},{path:Dt(i(t[1]))})])}return n},Ut=["image/png","image/jpe?g","image/webp","image/gif"],Ht=function(e){return e&&e.path},Gt=function(e){return Ht(e)&&Ut.some((function(t){return!!e.mime.match(t)}))},Kt=function(e,t){var n={top:0,left:0,right:0,bottom:0},r=function(e){return n[e.options.position]=e.$element.offsetHeight};return t.length>0?t.forEach(r):r(e),n},Wt=function(e){return e&&!e.getState("minimized")&&e.getState("focused")},Vt=function(e){var t,n={audio:(t=function(e,t){return Object.keys(e).reduce((function(n,r){return ie(l()({},r,"probably"===t.canPlayType(e[r])),n)}),{})})({mp3:"audio/mpeg",mp4:"audio/mp4",oga:"audio/ogg"},document.createElement("audio")),video:t({mp4:"video/mp4",ogv:"video/ogg"},document.createElement("video"))},r=function(t){var n=e.config("desktop.settings."+t);return e.make("osjs/settings").get("osjs/desktop",t,n)},o=function(){return r("sounds")};return{themeResource:function(t){var n=r("theme");return e.url("themes/".concat(n,"/").concat(t))},soundResource:function(t){if(!t.match(/\.([a-z]+)$/)){t+="."+(["oga","mp3"].find((function(e){return!0===n.audio[e]}))||"mp3")}var r=o();return r?e.url("sounds/".concat(r,"/").concat(t)):null},soundsEnabled:function(){return!!o()},icon:function(t){var n=r("icons");return e.url("icons/".concat(n,"/icons/").concat(t))}}};function $t(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=B()(e);if(t){var o=B()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return O()(this,n)}}function zt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Yt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zt(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}
/*
 * OS.js - JavaScript Cloud/Web Desktop Platform
 *
 * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * 1. Redistributions of source code must retain the above copyright notice, this
 *    list of conditions and the following disclaimer
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 *    this list of conditions and the following disclaimer in the documentation
 *    and/or other materials provided with the distribution
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR
 * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
 * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * @author  Anders Evenrud <andersevenrud@gmail.com>
 * @license Simplified BSD License
 */var Zt=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:250,n=!1;return function(r,o){return e=clearTimeout(e),e=setTimeout((function(){return n=!1}),t),n?(r.preventDefault(),o(r)):(n=!0,!1)}}(),qt=function(e){return function(t,n,r){var o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];Ht(n)?e.addEntry({entry:n,shortcut:o}):r.length>0&&e.uploadEntries(r)}},Xt=function(e){return e.target&&e.target.classList.contains("osjs-desktop-iconview__wrapper")},Qt=function(e){y()(n,e);var t=$t(n);function n(e){var r;return d()(this,n),(r=t.call(this,"DesktopIconView")).core=e,r.$root=null,r.iconview=null,r.root="home:/.desktop",r}return L()(n,[{key:"destroy",value:function(){this.$root&&this.$root.parentNode&&this.$root.remove(),this.iconview=null,this.$root=null,this.emit("destroy"),v()(B()(n.prototype),"destroy",this).call(this)}},{key:"_render",value:function(e){var t=this.root;return e&&(this.root=e),!this.$root||(this.root!==t&&this.iconview.reload(),!1)}},{key:"render",value:function(e){var t=this;if(this._render(e)){this.$root=document.createElement("div"),this.$root.className="osjs-desktop-iconview",this.core.$contents.appendChild(this.$root);var n=this.core.make("osjs/dnd").droppable,r=this.core.make("osjs/fs").icon,o=this.core.make("osjs/theme").icon,i=this.core.make("osjs/vfs"),s=i.copy,a=i.readdir,u=i.readfile,l=i.writefile,f=i.unlink,d=i.mkdir,p=function(e){return console.error(e)},L=function(e,t,n){var r=function(){var n=Ot(e,".shortcuts.json");return t(n).then((function(e){return JSON.parse(e)})).catch((function(e){return[]}))},o=function(t){var r=Ot(e,".shortcuts.json"),o=JSON.stringify(t||[]);return n(r,o).catch((function(){return 0}))};return{read:r,add:function(e){return r().then((function(t){return[].concat(c()(t),[e])})).then(o)},remove:function(e){return r().then((function(t){return t.splice(e,1),t})).then(o)}}}(e,u,l),h=function(e,t,n){var r=function(){return[]};return function(){return Promise.all([n.read().then((function(e){return e.map((function(e,t){return Yt({shortcut:t},e)}))})).catch(r),t(e,{showHiddenFiles:!1}).then((function(e){return e.map((function(e){return Yt({shortcut:!1},e)}))})).catch(r)]).then((function(e){var t;return(t=[]).concat.apply(t,c()(e))}))}}(e,a,L);this.iconview=vt({selected:-1,entries:[]},{setEntries:function(e){return{entries:e}},openDropContextMenu:function(e){var n=e.ev,r=e.data,o=e.files,i=e.droppedImage;t.createDropContextMenu(n,r,o,i)},openContextMenu:function(e){var n=e.ev,r=e.entry,o=e.index;return r?(t.createFileContextMenu(n,r),{selected:o}):(t.createRootContextMenu(n),{selected:-1})},openEntry:function(e){var n=e.entry,r=e.forceDialog;return n.isDirectory?t.core.run("FileManager",{path:n}):"osjs/application"===n.mime?t.core.run(n.filename):t.core.open(n,{useDefault:!0,forceDialog:r}),{selected:-1}},selectEntry:function(e){return{selected:e.index}},uploadEntries:function(e){},addEntry:function(t){var n=t.entry,r=t.shortcut;return function(t,o){var i="".concat(e,"/").concat(n.filename);return d(e).catch((function(){return!0})).then((function(){return r||"osjs/application"===n.mime?L.add(n):s(n,i).then((function(){return o.reload(!0)})).catch(p)})).then((function(){return o.reload(!0)})),{selected:-1}}},removeEntry:function(e){return function(t,n){return!1!==e.shortcut?L.remove(e.shortcut).then((function(){return n.reload(!0)})).catch(p):f(e).then((function(){return n.reload(!0)})).catch(p),{selected:-1}}},reload:function(e){return function(n,r){e&&t.core.config("vfs.watch")||h().then((function(e){return e.filter((function(e){return".."!==e.filename}))})).then((function(e){return r.setEntries(e)}))}}},function(e,t,n){return function(r,o){return mt("div",{class:"osjs-desktop-iconview__wrapper",oncontextmenu:function(e){Xt(e)&&o.openContextMenu({ev:e})},onclick:function(e){Xt(e)&&o.selectEntry({index:-1})},oncreate:function(e){n(e,{ondrop:function(e,t,n){Gt(t)||e.shiftKey&&Ht(t)?o.openDropContextMenu({ev:e,data:t,files:n}):qt(o)(e,t,n)}})}},r.entries.map((function(n,i){return mt("div",{class:"osjs-desktop-iconview__entry"+(r.selected===i?" osjs-desktop-iconview__entry--selected":""),oncontextmenu:function(e){return o.openContextMenu({ev:e,entry:n,index:i})},ontouchstart:function(e){return Zt(e,(function(){return o.openEntry({ev:e,entry:n,index:i})}))},ondblclick:function(e){return o.openEntry({ev:e,entry:n,index:i})},onclick:function(e){return o.selectEntry({ev:e,entry:n,index:i})}},[mt("div",{class:"osjs-desktop-iconview__entry__inner"},[mt("div",{class:"osjs-desktop-iconview__entry__icon"},[mt("img",{src:n.icon?n.icon:t(e(n).name),class:"osjs-desktop-iconview__entry__icon__icon"}),!1!==n.shortcut?mt("img",{src:t("emblem-symbolic-link"),class:"osjs-desktop-iconview__entry__icon__shortcut"}):null]),mt("div",{class:"osjs-desktop-iconview__entry__label"},n.filename)])])})))}}(r,o,n),this.$root),this.applySettings(),this.iconview.reload(),this._createWatcher()}}},{key:"createFileContextMenu",value:function(e,t){var n=this,r=this.core.make("osjs/locale").translate;this.core.make("osjs/contextmenu",{position:e,menu:[{label:r("LBL_OPEN"),onclick:function(){return n.iconview.openEntry({entry:t,forceDialog:!1})}},{label:r("LBL_OPEN_WITH"),onclick:function(){return n.iconview.openEntry({entry:t,forceDialog:!0})}},{label:!1!==t.shortcut?r("LBL_REMOVE_SHORTCUT"):r("LBL_DELETE"),onclick:function(){return n.iconview.removeEntry(t)}}]})}},{key:"createDropContextMenu",value:function(e,t,n){var r=this,o=this.core.make("osjs/desktop"),i=this.core.make("osjs/locale").translate,s=function(o){return qt(r.iconview)(e,t,n,o)},a=[{label:i("LBL_COPY"),onclick:function(){return s(!1)}},{label:i("LBL_CREATE_SHORTCUT"),onclick:function(){return s(!0)}}].concat(c()(o.createDropContextMenu(t)));this.core.make("osjs/contextmenu",{position:e,menu:a})}},{key:"createRootContextMenu",value:function(e){this.core.make("osjs/desktop").openContextMenu(e)}},{key:"_createWatcher",value:function(){var e=this,t=function(t){String(e.root).replace(/\/$/,"")===String(t.path).replace(/\/$/,"")&&e.iconview.reload()};this.core.on("osjs/vfs:directoryChanged",t),this.on("destroy",(function(){return e.core.off("osjs/vfs:directoryChanged",t)}))}},{key:"applySettings",value:function(){if(this.$root){var e,t=this.core.make("osjs/settings"),n=this.core.config("desktop.settings"),r=t.get("osjs/desktop","iconview.fontColorStyle",n.iconview.fontColorStyle),o=t.get("osjs/desktop","iconview.fontColor","#ffffff",n.iconview.fontColor),i=t.get("osjs/desktop","background.color",n.background.color),s={system:"inherit",invert:(e=i,"#"+e.match(/[a-f0-9]{2}/gi).map((function(e){return(255-parseInt(e,16)|0).toString(16).replace(/^([a-f0-9])$/,"0$1")})).join("")),custom:o};this.$root.style.color=s[r]}}}]),n}(T.EventEmitter),Jt=function(e,t){var n=e.make("osjs/locale").translate,r=function(e,t,n,r){var o=function(e,r){var o=e.results,i=e.index;return o.map((function(e,o){return mt("li",{onclick:function(){return r.open(o)},onupdate:function(e){o===i&&e.scrollIntoView()},class:["osjs-search-result",i===o?"osjs__active":""].join(" ")},[mt("img",{src:n(t.icon(e).name+".png")}),mt("span",{},"".concat(e.path," (").concat(e.mime,")"))])}))};return function(e,t){return mt("div",{class:"osjs-search-container osjs-notification",style:{display:e.visible?void 0:"none"}},[mt("input",{type:"text",placeholder:r("LBL_SEARCH_PLACEHOLDER"),class:"osjs-search-input",value:e.query,onblur:function(){e.value||setTimeout((function(){return t.toggle(!1)}),300)},oninput:function(e){return t.setQuery(e.target.value)},onkeydown:function(n){38===n.keyCode?t.setPreviousIndex():40===n.keyCode?t.setNextIndex():27===n.keyCode&&(t.resetIndex(),-1===e.index&&t.hide())},onkeypress:function(n){13===n.keyCode&&(e.index>=0?t.open(e.index):t.search(e.query.replace(/\*?$/,"*").replace(/^\*?/,"*")))}}),mt("div",{"data-error":!!e.error,class:"osjs-search-message",style:{display:e.error||e.status?"block":"none"}},e.error||e.status),mt("ol",{class:"osjs-search-results",style:{display:e.results.length?void 0:"none"}},o(e,t))])}}(0,e.make("osjs/fs"),e.make("osjs/theme").icon,n),o=new T.EventEmitter("SearchUI"),i=vt({query:"",index:-1,status:void 0,error:null,visible:!1,results:[]},{search:function(e){return o.emit("search",e),{status:n("LBL_SEARCH_WAIT")}},open:function(e){return function(t,n){var r=t.results[e];r&&o.emit("open",r),n.toggle(!1)}},resetIndex:function(){return function(){return{index:-1}}},setNextIndex:function(){return function(e){return{index:(e.index+1)%e.results.length}}},setPreviousIndex:function(){return function(e){return{index:e.index<=0?e.results.length-1:e.index-1}}},setError:function(e){return function(){return{error:e,status:void 0,index:-1}}},setResults:function(e){return function(){return{results:e,index:-1,status:n("LBL_SEARCH_RESULT",e.length)}}},setQuery:function(e){return function(){return{query:e}}},hide:function(){o.emit("hide")},toggle:function(e){return function(t){return{query:"",results:[],index:-1,status:void 0,error:null,visible:"boolean"==typeof e?e:!t.visible}}}},r,t);return o.on("error",(function(e){return i.setError(e)})),o.on("success",(function(e){return i.setResults(e)})),o.on("toggle",(function(e){return i.toggle(e)})),o.on("focus",(function(){var e=t.querySelector(".osjs-search-input");e&&e.focus()})),o},en=function(){function e(t){d()(this,e),this.core=t,this.ui=null,this.focusLastWindow=null,this.$element=document.createElement("div")}return L()(e,[{key:"destroy",value:function(){this.ui&&this.ui.destroy()}},{key:"init",value:function(){var e=this,t=this.core.make("osjs/theme").icon,n=this.core.make("osjs/locale").translate;this.$element.className="osjs-search",this.core.$root.appendChild(this.$element),this.core.make("osjs/tray").create({title:n("LBL_SEARCH_TOOLTOP","F3"),icon:t("system-search.png")},(function(){return e.show()})),this.ui=Jt(this.core,this.$element),this.ui.on("hide",(function(){return e.hide()})),this.ui.on("open",(function(t){return e.core.open(t)})),this.ui.on("search",(function(t){e.search(t).then((function(t){return e.ui.emit("success",t)})).catch((function(t){return e.ui.emit("error",t)}))}))}},{key:"search",value:function(e){var t=this.core.make("osjs/vfs"),n=this.core.make("osjs/fs").mountpoints().map((function(e){return"".concat(e.name,":/")})).map((function(n){return t.search({path:n},e).catch((function(e){return D.warn("Error while searching",e),[]}))}));return Promise.all(n).then((function(e){var t;return(t=[]).concat.apply(t,c()(e))}))}},{key:"focus",value:function(){this.ui&&this.ui.emit("focus")}},{key:"hide",value:function(){if(this.ui){this.ui.emit("toggle",!1);var e=Ae.lastWindow();this.focusLastWindow&&e&&e.focus()}}},{key:"show",value:function(){var e=this;if(this.ui){var t=Ae.lastWindow();this.focusLastWindow=t&&t.blur(),this.ui.emit("toggle",!0),setTimeout((function(){return e.focus()}),1)}}}]),e}();function tn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function nn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tn(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function rn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}
/*
 * OS.js - JavaScript Cloud/Web Desktop Platform
 *
 * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * 1. Redistributions of source code must retain the above copyright notice, this
 *    list of conditions and the following disclaimer
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 *    this list of conditions and the following disclaimer in the documentation
 *    and/or other materials provided with the distribution
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR
 * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
 * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * @author  Anders Evenrud <andersevenrud@gmail.com>
 * @license Simplified BSD License
 */();return function(){var n,r=B()(e);if(t){var o=B()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return O()(this,n)}}var on=function(e){y()(n,e);var t=rn(n);function n(e){var r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return d()(this,n),(r=t.call(this,"Desktop")).core=e,r.options=nn({contextmenu:[]},o),r.$theme=[],r.$icons=[],r.contextmenuEntries=[],r.search=e.config("search.enabled")?new en(e):null,r.iconview=new Qt(r.core),r.keyboardContext=null,r.subtract={left:0,top:0,right:0,bottom:0},r}return L()(n,[{key:"destroy",value:function(){this.search&&(this.search=this.search.destroy()),this.iconview&&this.iconview.destroy(),this._removeIcons(),this._removeTheme(),v()(B()(n.prototype),"destroy",this).call(this)}},{key:"init",value:function(){this.initConnectionEvents(),this.initUIEvents(),this.initDragEvents(),this.initKeyboardEvents(),this.initGlobalKeyboardEvents(),this.initMouseEvents(),this.initBaseEvents(),this.initLocales(),this.initDeveloperTray()}},{key:"initConnectionEvents",value:function(){var e=this;this.core.on("osjs/core:disconnect",(function(t){D.warn("Connection closed",t);var n=e.core.make("osjs/locale").translate;e.core.make("osjs/notification",{title:n("LBL_CONNECTION_LOST"),message:n("LBL_CONNECTION_LOST_MESSAGE")})})),this.core.on("osjs/core:connect",(function(t,n){if(D.debug("Connection opened"),n){var r=e.core.make("osjs/locale").translate;e.core.make("osjs/notification",{title:r("LBL_CONNECTION_RESTORED"),message:r("LBL_CONNECTION_RESTORED_MESSAGE")})}})),this.core.on("osjs/core:connection-failed",(function(t){D.warn("Connection failed");var n=e.core.make("osjs/locale").translate;e.core.make("osjs/notification",{title:n("LBL_CONNECTION_FAILED"),message:n("LBL_CONNECTION_FAILED_MESSAGE")})}))}},{key:"initUIEvents",value:function(){var e=this;this.core.on(["osjs/panel:create","osjs/panel:destroy"],(function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];e.subtract=Kt(t,n);try{e._updateCSS(),e._clampWindows()}catch(e){D.warn("Panel event error",e)}e.core.emit("osjs/desktop:transform",e.getRect())})),this.core.on("osjs/window:transitionend",(function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];e.emit.apply(e,["theme:window:transitionend"].concat(n))})),this.core.on("osjs/window:change",(function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];e.emit.apply(e,["theme:window:change"].concat(n))}))}},{key:"initDeveloperTray",value:function(){var e=this;if(this.core.config("development")){var t=this.core.make("osjs/tray").create({title:"OS.js developer tools"},(function(t){return e.onDeveloperMenu(t)}));this.core.on("destroy",(function(){return t.destroy()}))}}},{key:"initDragEvents",value:function(){var e=this;(0,this.core.make("osjs/dnd").droppable)(this.core.$contents,{strict:!0,ondrop:function(t,n,r){Gt(n)&&e.onDropContextMenu(t,n)}})}},{key:"initKeyboardEvents",value:function(){var e=this,t=function(t,n){return function(e,t){return e&&e.$element.contains(t)}(t,n)||function(t){return e.keyboardContext&&e.keyboardContext.contains(t)}(n)};["keydown","keyup","keypress"].forEach((function(t){e.core.$root.addEventListener(t,(function(e){return function(e,t){var n=Ae.lastWindow();Wt(n)&&n.emit(e,t,n)}(t,e)}))})),this.core.$root.addEventListener("keydown",(function(n){var r,o,i,s;if(n.target)if(114===n.keyCode)n.preventDefault(),e.search&&e.search.show();else if(9===n.keyCode){var a=n.target.tagName,c=-1!==["INPUT","TEXTAREA","SELECT","BUTTON"].indexOf(a),u=Ae.lastWindow();t(u,n.target)&&c?"TEXTAREA"===a&&(r=n.target,o=r.selectionStart,i=r.selectionEnd,s=r.value,r.value=s.substring(0,o)+"\t"+s.substring(i,s.length),o++,r.selectionStart=o,r.selectionEnd=o):n.preventDefault()}}))}},{key:"initGlobalKeyboardEvents",value:function(){var e=this,t=[],n=this.core.config("desktop.settings.keybindings",{}),r=function(){t=e.core.make("osjs/settings").get("osjs/desktop","keybindings",n)};window.addEventListener("keydown",(function(n){Object.keys(t).some((function(r){var o=t[r];ht(o,n)&&e.core.emit("osjs/desktop:keybinding:"+r,n)}))})),this.core.on("osjs/settings:load",r),this.core.on("osjs/settings:save",r),this.core.on("osjs/core:started",r);this.core.on("osjs/desktop:keybinding:close-window",(function(){var e=Ae.lastWindow();Wt(e)&&e.close()}))}},{key:"initMouseEvents",value:function(){var e=this;this.core.$contents.addEventListener("contextmenu",(function(t){t.target===e.core.$contents&&e.onContextMenu(t)})),window.addEventListener("mousedown",(function(){var t=!1,n=function(){t||(t=!0,e.core.$root.setAttribute("data-mousemove",String(!0)))};window.addEventListener("mousemove",n),window.addEventListener("mouseup",(function r(){t=!1,e.core.$root.setAttribute("data-mousemove",String(!1)),window.removeEventListener("mousemove",n),window.removeEventListener("mouseup",r)}))}))}},{key:"initBaseEvents",value:function(){var e,t=this;window.addEventListener("resize",(function(){clearTimeout(e),e=setTimeout((function(){t._updateCSS(),t._clampWindows(!0)}),200)})),history.pushState(null,null,document.URL),window.addEventListener("popstate",(function(){history.pushState(null,null,document.URL)})),this.core.$root.addEventListener("touchmove",(function(e){return e.preventDefault()}))}},{key:"initLocales",value:function(){var e=this,t=this.core.config("locale.rtl"),n=function(){var n=e.core.make("osjs/locale").getLocale().split("_")[0].toLowerCase(),r=-1!==t.indexOf(n);e.core.$root.setAttribute("data-dir",r?"rtl":"ltr")};this.core.on("osjs/settings:load",n),this.core.on("osjs/settings:save",n),this.core.on("osjs/core:started",n)}},{key:"start",value:function(){this.search&&this.search.init(),this._updateCSS()}},{key:"_updateCSS",value:function(){var e=this.core.config("windows.mobile"),t=!!e&&this.core.$root.offsetWidth<=e;this.core.$root.setAttribute("data-mobile",t),this.core.$contents&&(this.core.$contents.style.top="".concat(this.subtract.top,"px"),this.core.$contents.style.left="".concat(this.subtract.left,"px"),this.core.$contents.style.right="".concat(this.subtract.right,"px"),this.core.$contents.style.bottom="".concat(this.subtract.bottom,"px"))}},{key:"_clampWindows",value:function(e){e&&!this.core.config("windows.clampToViewport")||Ae.getWindows().forEach((function(e){return e.clampToViewport()}))}},{key:"addContextMenu",value:function(e){this.contextmenuEntries=this.contextmenuEntries.concat(e)}},{key:"applySettings",value:function(e){var t,n=this,r=this.core.config("desktop.lock"),o=this.core.config("desktop.settings");if(r)t=o;else{var i=e||this.core.make("osjs/settings").get("osjs/desktop");t=b()(o,i,{arrayMerge:function(e,t){return t}})}var s,a,c,u=function(e,t){if(n.core.has(e)){var r=n.core.make(e);r.removeAll(),t.forEach((function(e){return r.create(e)}))}};return a=(s=t).font,c=s.background,n.core.$root.style.fontFamily="".concat(a,", sans-serif"),function(e,t){var n=e.$root,r={backgroundRepeat:"no-repeat",backgroundPosition:"50% 50%",backgroundSize:"auto",backgroundColor:t.color,backgroundImage:"none"};"cover"===t.style||"contain"===t.style?r.backgroundSize=t.style:"repeat"===t.style&&(r.backgroundRepeat="repeat"),"color"!==t.style&&(void 0===t.src?r.backgroundImage=void 0:"string"==typeof t.src?r.backgroundImage="url(".concat(t.src,")"):t.src&&e.make("osjs/vfs").url(t.src).then((function(e){setTimeout((function(){return n.style.backgroundImage="url(".concat(e,")")}),1)})).catch((function(e){return D.warn("Error while setting wallpaper from VFS",e)}))),Object.keys(r).forEach((function(e){return n.style[e]=r[e]}))}(n.core,c),u("osjs/panels",(t.panels||[]).slice(-1)),u("osjs/widgets",t.widgets),this.applyTheme(t.theme),this.applyIcons(t.icons),this.applyIconView(t.iconview),this.core.emit("osjs/desktop:applySettings"),nn({},t)}},{key:"_removeTheme",value:function(){this.emit("theme:destroy"),this.off(["theme:init","theme:destroy","theme:window:change","theme:window:transitionend"]),this.$theme.forEach((function(e){e&&e.parentNode&&e.remove()})),this.$theme=[]}},{key:"_removeIcons",value:function(){this.$icons.forEach((function(e){e&&e.parentNode&&e.remove()})),this.$icons=[]}},{key:"applyIconView",value:function(e){this.iconview&&(e.enabled?this.iconview.render(e.path):this.iconview.destroy())}},{key:"applyIcons",value:function(e){var t=this;return e=e||this.core.config("desktop.icons"),this._applyTheme(e).then((function(e){var n=e.elements;e.errors,e.callback,e.metadata;t._removeIcons(),t.$icons=Object.values(n),t.emit("icons:init")}))}},{key:"applyTheme",value:function(e){var t=this;return e=e||this.core.config("desktop.theme"),this._applyTheme(e).then((function(e){var n=e.elements,r=(e.errors,e.callback),o=e.metadata;if(t._removeTheme(),r&&o)try{r(t.core,t,{},o)}catch(e){D.warn("Exception while calling theme callback",e)}t.$theme=Object.values(n),t.emit("theme:init")}))}},{key:"_applyTheme",value:function(e){return this.core.make("osjs/packages").launch(e).then((function(e){return e.errors.length&&D.error(e.errors),e}))}},{key:"_applySettingsByKey",value:function(e,t){var n=this;return this.core.make("osjs/settings").set("osjs/desktop",e,t).save().then((function(){return n.applySettings()}))}},{key:"createDropContextMenu",value:function(e){var t=this.core.make("osjs/locale").translate,n=this.core.make("osjs/settings"),r=this.core.make("osjs/desktop"),o=[];return Gt(e)&&o.push({label:t("LBL_DESKTOP_SET_AS_WALLPAPER"),onclick:function(){return n.set("osjs/desktop","background.src",e).save().then((function(){return r.applySettings()}))}}),o}},{key:"onDeveloperMenu",value:function(e){var t=this,n=this.core.make("osjs/locale").translate,r=this.core.make("osjs/settings").get(),o=Object.keys(r).map((function(e){return{label:e,onclick:function(){t.core.make("osjs/settings").clear(e).then((function(){return t.applySettings()}))}}}));this.core.make("osjs/contextmenu").show({position:e,menu:[{label:n("LBL_KILL_ALL"),onclick:function(){return Ne.destroyAll()}},{label:n("LBL_APPLICATIONS"),items:Ne.getApplications().map((function(e){return{label:"".concat(e.metadata.name," (").concat(e.pid,")"),items:[{label:n("LBL_KILL"),onclick:function(){return e.destroy()}},{label:n("LBL_RELOAD"),onclick:function(){return e.relaunch()}}]}}))},{label:"Clear Storage",items:o}]})}},{key:"onDropContextMenu",value:function(e,t){var n=this.createDropContextMenu(t);this.core.make("osjs/contextmenu",{position:e,menu:n})}},{key:"onContextMenu",value:function(e){var t,n=this,r=this.core.config("desktop.lock"),o=(t=[]).concat.apply(t,c()(this.contextmenuEntries.map((function(e){return"function"==typeof e?e():e})))),i=this.core.config("desktop.contextmenu"),s=this.core.make("osjs/settings").get("osjs/desktop","iconview.enabled");if(!1!==i&&!1!==i.enabled){var a=!0===i||i.defaults,u=this.core.make("osjs/locale").translate,l=this.core.make("osjs/locale").translatableFlat,f=this.core.make("osjs/packages").getPackages((function(e){return"theme"===e.type})),d=r?[]:[{label:u("LBL_DESKTOP_SELECT_WALLPAPER"),onclick:function(){n.core.make("osjs/dialog","file",{mime:["^image"]},(function(e,t){"ok"===e&&n._applySettingsByKey("background.src",t)}))}},{label:u("LBL_DESKTOP_SELECT_THEME"),items:f.map((function(e){return{label:l(e.title,e.name),onclick:function(){n._applySettingsByKey("theme",e.name)}}}))}];s&&this.iconview&&d.push({label:u("LBL_REFRESH"),onclick:function(){return n.iconview.iconview.reload()}});var p="function"===a?i.defaults(this,d):a?d:[],L="function"==typeof this.options.contextmenu?this.options.contextmenu(this,d):this.options.contextmenu||[],h=[].concat(c()(p),c()(L),c()(o));h.length&&this.core.make("osjs/contextmenu").show({menu:h,position:e})}}},{key:"setKeyboardContext",value:function(e){this.keyboardContext=e}},{key:"getRect",value:function(){var e=this.core.$root,t=this.subtract,n=t.left,r=t.top,o=t.right,i=t.bottom;return{width:e.offsetWidth-n-o,height:e.offsetHeight-r-i,top:r,bottom:i,left:n,right:o}}}]),n}(T.EventEmitter);function sn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function an(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sn(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}
/*
 * OS.js - JavaScript Cloud/Web Desktop Platform
 *
 * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * 1. Redistributions of source code must retain the above copyright notice, this
 *    list of conditions and the following disclaimer
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 *    this list of conditions and the following disclaimer in the documentation
 *    and/or other materials provided with the distribution
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR
 * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
 * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * @author  Anders Evenrud <andersevenrud@gmail.com>
 * @license Simplified BSD License
 */var cn=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};d()(this,e);var o=t.make("osjs/locale").translate("LBL_NOTIFICATION");this.core=t,this.$root=n,this.$element=document.createElement("div"),this.destroyed=!1,this.options=an({icon:null,title:o,message:o,timeout:5e3,native:t.config("notifications.native",!1),sound:"message",className:""},r),this.core.emit("osjs/notification:create",this)}return L()(e,[{key:"destroy",value:function(){this.destroyed||(this.destroyed=!0,this.core.emit("osjs/notification:destroy",this),this.$element.remove(),this.$element=null,this.$root=null)}},{key:"render",value:function(){var e=this,t=function(){return e.destroy()},n=function(){return e.$element.classList.add("osjs-notification"),e.options.className&&e.$element.classList.add(e.options.className),e.options.timeout&&setTimeout((function(){return e.destroy()}),e.options.timeout),e.$element.addEventListener("click",t),e.$root.appendChild(e.$element),vt(e.options,{},(function(e){return mt("div",{class:"osjs-notification-wrapper","data-has-icon":!!e.icon,style:{backgroundImage:e.icon?"url(".concat(e.icon,")"):void 0}},[mt("div",{class:"osjs-notification-title"},e.title),mt("div",{class:"osjs-notification-message"},e.message)])}),e.$element),Promise.resolve(!0)};return this.options.native?function(e,t){var n=window.Notification,r=function(){var r=new n(e.title,{body:e.message,icon:e.icon});return r.onclick=t,r};if(ce){if("granted"===n.permission)return Promise.resolve(r());if("denied"!==n.permission)return new Promise((function(e,t){n.requestPermission((function(n){return"granted"===n?e(!0):t(n)}))})).then(r)}return Promise.reject("Unsupported")}(this.options,t).catch((function(e){return D.warn("Error on native notification",e),n()})):(this.options.sound&&this.core.make("osjs/sounds").play(this.options.sound),n())}}]),e}();function un(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}
/*
 * OS.js - JavaScript Cloud/Web Desktop Platform
 *
 * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * 1. Redistributions of source code must retain the above copyright notice, this
 *    list of conditions and the following disclaimer
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 *    this list of conditions and the following disclaimer in the documentation
 *    and/or other materials provided with the distribution
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR
 * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
 * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * @author  Anders Evenrud <andersevenrud@gmail.com>
 * @license Simplified BSD License
 */
var ln=function(){function e(t){d()(this,e),this.core=t,this.$element=null}return L()(e,[{key:"destroy",value:function(){this.$element.remove(),this.$element=null}},{key:"init",value:function(){var e=this;this.$element=document.createElement("div"),this.$element.classList.add("osjs-notifications"),this.core.$root.appendChild(this.$element),this.core.on("osjs/desktop:applySettings",(function(){e.setElementStyles()})),this.setElementStyles()}},{key:"create",value:function(e){if(!e)throw new Error("Notification options not given");var t=new cn(this.core,this.$element,e);return t.render(),t}},{key:"setElementStyles",value:function(){var e=fe(this.createElementStyles());this.$element.style.cssText=e}},{key:"createElementStyles",value:function(){var e=this.core.config("desktop.settings.notifications.position","top-right"),t=this.core.make("osjs/settings").get("osjs/desktop","notifications.position",e);return 2!==t.split("-").length?{}:["left","right","top","bottom"].reduce((function(e,n){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?un(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):un(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}(l()({},n,-1===t.indexOf(n)?"auto":"0"),e)}),{})}}]),e}();function fn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function dn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fn(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}
/*
 * OS.js - JavaScript Cloud/Web Desktop Platform
 *
 * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * 1. Redistributions of source code must retain the above copyright notice, this
 *    list of conditions and the following disclaimer
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 *    this list of conditions and the following disclaimer in the documentation
 *    and/or other materials provided with the distribution
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR
 * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
 * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * @author  Anders Evenrud <andersevenrud@gmail.com>
 * @license Simplified BSD License
 */var pn=de(),Ln=!!pn&&{passive:!0},hn={maximize:function(e){return e.maximize()?null:e.restore()},minimize:function(e){return e.minimize()},close:function(e){return e.close()}},_n=function(){function e(t){d()(this,e),this.core=t,this.lastAction=null,this.$lofi=document.createElement("div"),this.$lofi.className="osjs-window-behavior-lofi"}return L()(e,[{key:"init",value:function(e){var t=this,n=function(n){return t.mousedown(n,e)},r=function(n){return t.mousedown(n,e)},o=function(n){return t.click(n,e)},i=function(n){return t.dblclick(n,e)},s=function(n){n.stopPropagation(),n.preventDefault(),t.iconDblclick(n,e)},a=function(n){n.stopPropagation(),n.preventDefault(),t.iconClick(n,e)},c=function(n){e&&e.emit("transitionend"),t.core.emit("osjs/window:transitionend",n,e)};e.$element.addEventListener("touchstart",n,Ln),e.$element.addEventListener("mousedown",r),e.$element.addEventListener("click",o),e.$element.addEventListener("dblclick",i),e.$element.addEventListener("transitionend",c),e.$icon&&(e.$icon.addEventListener("dblclick",s),e.$icon.addEventListener("click",a)),e.on("resized,rendered",(function(){e.setState("media",W(e))})),e.on("destroy",(function(){e.$element&&(e.$element.removeEventListener("touchstart",n,Ln),e.$element.removeEventListener("mousedown",r),e.$element.removeEventListener("click",o),e.$element.removeEventListener("dblclick",i),e.$element.removeEventListener("transitionend",c)),e.$icon&&(e.$icon.removeEventListener("dblclick",s),e.$icon.removeEventListener("click",a))}));var u=function(e,t,n){var r=10+t.left,o=10+t.top,i=r+e.wid%20*10,s=function(e,r){return"number"==typeof n[e]&&Number.isInteger(n[e])?Math.max(t[e],n[e]):r};return{top:s("top",o+e.wid%20*10),left:s("left",i)}}(e,{top:0,left:0},e.state.position),l=u.top,f=u.left;e.state.position.top=l,e.state.position.left=f,e.state.media=W(e)}},{key:"click",value:function(e,t){if(!this.lastAction&&e.target.classList.contains("osjs-window-button")){var n=e.target.getAttribute("data-action");hn[n](t)}}},{key:"dblclick",value:function(e,t){this.lastAction||e.target.classList.contains("osjs-window-header")&&(t.state.maximized?t.restore():t.state.minimized?t.raise():t.maximize())}},{key:"mousedown",value:function(e,t){var n,r=this,o=!1,i=t.attributes,s=i.moveable,a=i.resizable,c=t.state.maximized,u=this.core.config("windows"),l=u.lofi,f=u.moveKeybinding,d=_t(e),p=d.clientX,L=d.clientY,h=d.touch,_=d.target,m=ht(f,e)?t.$element.contains(_):_.classList.contains("osjs-window-header"),v=this.core.has("osjs/desktop")?this.core.make("osjs/desktop").getRect():{top:0,left:0},E=_.classList.contains("osjs-window-resize")?K(t,_):null,y=m?function(e,t){var n=e.state.position;return function(e,r){return{top:Math.max(n.top+r,t.top),left:n.left+e}}}(t,{top:0,left:0}):null,g=function(e){if(pn||e.preventDefault(),!(c||!s&&y||!a&&E)){var i=_t(e),u=E?Math.max(v.left,i.clientX):i.clientX,f=E?Math.max(v.top,i.clientY):i.clientY,d=u-p,h=f-L;if(E){var _=E(d,h),m=_.width,g=_.height,O=_.top,A=_.left;n=function(){t._setState("dimension",{width:m,height:g},!1),t._setState("position",{top:O,left:A},!1)},l?(r.$lofi.style.top="".concat(O,"px"),r.$lofi.style.left="".concat(A,"px"),r.$lofi.style.width="".concat(m,"px"),r.$lofi.style.height="".concat(g,"px")):n(),r.lastAction="resize"}else if(y){var B=y(d,h);n=function(){t._setState("position",B,!1)},l?(r.$lofi.style.top="".concat(B.top,"px"),r.$lofi.style.left="".concat(B.left,"px")):n(),r.lastAction="move"}r.lastAction&&(t._setState("move"===r.lastAction?"moving":"resizing",!0),o||(r.core.$root.setAttribute("data-window-action",String(!0)),o=!0))}},O=function e(){h?(document.removeEventListener("touchmove",g,Ln),document.removeEventListener("touchend",e,Ln)):(document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",e)),l&&(r.$lofi.remove(),n&&n(),n=void 0),"move"===r.lastAction?(t.emit("moved",dn({},t.state.position),t),t._setState("moving",!1)):"resize"===r.lastAction&&(t.emit("resized",dn({},t.state.dimension),t),t._setState("resizing",!1)),r.core.$root.setAttribute("data-window-action",String(!1))};t.focus()||t.setNextZindex(),(y||E)&&(h?(document.addEventListener("touchmove",g,Ln),document.addEventListener("touchend",O,Ln)):(document.addEventListener("mousemove",g),document.addEventListener("mouseup",O))),this.lastAction=null,this.core.has("osjs/contextmenu")&&this.core.make("osjs/contextmenu").hide(),l&&(this.$lofi.style.zIndex=t.state.zIndex+1,this.$lofi.style.top="".concat(t.state.position.top,"px"),this.$lofi.style.left="".concat(t.state.position.left,"px"),this.$lofi.style.width="".concat(t.state.dimension.width,"px"),this.$lofi.style.height="".concat(t.state.dimension.height,"px"),this.$lofi.parentNode||document.body.appendChild(this.$lofi))}},{key:"iconDblclick",value:function(e,t){t.close()}},{key:"iconClick",value:function(e,t){var n=t.state,r=n.minimized,o=n.maximized,i=t.attributes,s=i.minimizable,a=i.maximizable,c=i.closeable,u=this.core.make("osjs/locale").translate;this.core.make("osjs/contextmenu",{position:e,menu:[{label:u(r?"LBL_RAISE":"LBL_MINIMIZE"),disabled:!s,onclick:function(){return r?t.raise():t.minimize()}},{label:u(o?"LBL_RESTORE":"LBL_MAXIMIZE"),disabled:!a,onclick:function(){return o?t.restore():t.maximize()}},{label:u("LBL_CLOSE"),disabled:!c,onclick:function(){return t.close()}}]})}}]),e}(),mn=n(13),vn=n.n(mn);function En(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function yn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?En(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):En(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}
/*
 * OS.js - JavaScript Cloud/Web Desktop Platform
 *
 * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * 1. Redistributions of source code must retain the above copyright notice, this
 *    list of conditions and the following disclaimer
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 *    this list of conditions and the following disclaimer in the documentation
 *    and/or other materials provided with the distribution
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR
 * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
 * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * @author  Anders Evenrud <andersevenrud@gmail.com>
 * @license Simplified BSD License
 */var gn=function(e,t,n){return t.map((function(t){return mt("div",{class:"osjs-login-field osjs-login-field-"+t.tagName},mt(t.tagName,function(e,t,n){return n=n?"disabled":void 0,"input"===t.tagName&&"submit"!==t.attributes.type?yn({autocapitalize:"off",autocomplete:"new-"+t.attributes.name,disabled:n,oncreate:function(n){return n.value=e[t.attributes.name]||t.value||""}},t.attributes):yn({disabled:n},t.attributes)}(e,t,n),function(e){return"select"===e.tagName&&e.choices?e.choices.map((function(e){return mt("option",{current:e.current?"current":void 0,value:e.value},e.label)})):e.children||[]}(t)))}))},On=function(e){var t=e.logo,n=t.src,r=t.position,o=function(){return mt("div",{class:"osjs-login-logo","data-position":r,style:{backgroundImage:"url('".concat(n,"')")}})};return function(t,i){var s=[];(e.title&&s.push(mt("div",{class:"osjs-login-header"},mt("span",{},e.title))),n&&-1!==["top","middle"].indexOf(r))&&s["top"===r?"unshift":"push"](o());var a=function(e){return r===e?mt("div",{"data-position":r},o()):null},c=function(t){var i=gn(t,e.fields,t.loading);return n&&"bottom"===r&&i.push(o()),e.stamp&&i.push(mt("div",{class:"osjs-login-stamp"},e.stamp)),i}(t),u=[].concat(s,[mt("div",{class:"osjs-login-error",style:{display:t.error?"block":"none"}},mt("span",{},t.error)),mt("form",{loading:!1,method:"post",action:"#",autocomplete:"off",onsubmit:i.submit},c)]);return mt("div",{class:"osjs-login",id:e.id,style:{display:t.hidden?"none":void 0}},[a("left"),mt("div",{class:"osjs-login-content"},u),a("right")].filter((function(e){return!!e})))}},An=function(e,t,n,r){var o=new T.EventEmitter("LoginUI"),i=On(e),s=vt(yn({hidden:n},t),{setLoading:function(e){return{loading:e}},setError:function(e){return{error:e,hidden:!1}},submit:function(e){return function(t){if(e.preventDefault(),!t.loading){var n=Array.from(e.target.elements).filter((function(e){return"submit"!==e.type})).reduce((function(e,t){return yn(yn({},e),{},l()({},t.name,t.value))}),{});o.emit("login:post",n)}}}},i,r);return o.on("login:start",(function(){return s.setLoading(!0)})),o.on("login:stop",(function(){return s.setLoading(!1)})),o.on("login:error",(function(e){return s.setError(e)})),o};function Bn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Sn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}
/*
 * OS.js - JavaScript Cloud/Web Desktop Platform
 *
 * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * 1. Redistributions of source code must retain the above copyright notice, this
 *    list of conditions and the following disclaimer
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 *    this list of conditions and the following disclaimer in the documentation
 *    and/or other materials provided with the distribution
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR
 * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
 * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * @author  Anders Evenrud <andersevenrud@gmail.com>
 * @license Simplified BSD License
 */();return function(){var n,r=B()(e);if(t){var o=B()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return O()(this,n)}}var bn=function(e){y()(n,e);var t=Sn(n);function n(e,r){var o;return d()(this,n),(o=t.call(this,"Login")).$container=null,o.core=e,o.options=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Bn(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({id:"osjs-login",title:"Welcome to OS.js",stamp:e.config("version"),logo:{position:"top",src:null},fields:[{tagName:"input",attributes:{name:"username",type:"text",placeholder:"Username"}},{tagName:"input",attributes:{name:"password",type:"password",placeholder:"Password"}},{tagName:"input",attributes:{type:"submit",value:"Login"}}]},r),o}return L()(n,[{key:"init",value:function(e){this.$container=document.createElement("div"),this.$container.id=this.options.id,this.$container.className="osjs-login-base",this.core.$root.classList.add("login"),this.core.$root.appendChild(this.$container),this.render(e)}},{key:"destroy",value:function(){this.core.$root.classList.remove("login"),this.$container&&(this.$container.remove(),this.$container=null),v()(B()(n.prototype),"destroy",this).call(this)}},{key:"render",value:function(e){var t=this,n=this.core.config("auth.login",{}),r=An(this.options,n,e,this.$container);r.on("register:post",(function(e){return t.emit("register:post",e)})),r.on("login:post",(function(e){return t.emit("login:post",e)})),this.on("login:start",(function(){return r.emit("login:start")})),this.on("login:stop",(function(){return r.emit("login:stop")})),this.on("login:error",(function(e){return r.emit("login:error",e)}))}}]),n}(T.EventEmitter),Tn=function(e,t){return{login:function(e){return Promise.resolve(e)}}};
/*
 * OS.js - JavaScript Cloud/Web Desktop Platform
 *
 * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * 1. Redistributions of source code must retain the above copyright notice, this
 *    list of conditions and the following disclaimer
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 *    this list of conditions and the following disclaimer in the documentation
 *    and/or other materials provided with the distribution
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR
 * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
 * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * @author  Anders Evenrud <andersevenrud@gmail.com>
 * @license Simplified BSD License
 */function Pn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}
/*
 * OS.js - JavaScript Cloud/Web Desktop Platform
 *
 * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * 1. Redistributions of source code must retain the above copyright notice, this
 *    list of conditions and the following disclaimer
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 *    this list of conditions and the following disclaimer in the documentation
 *    and/or other materials provided with the distribution
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR
 * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
 * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * @author  Anders Evenrud <andersevenrud@gmail.com>
 * @license Simplified BSD License
 */
var Rn={server:function(e,t){var n=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.request(t,{method:"POST",body:JSON.stringify(n)},"json")};return{register:function(e){return n("/register",e)},login:function(e){return n("/login",e)},logout:function(){return n("/logout")}}},localStorage:Tn},wn=function(e,t){var n=e.config("auth.ui",{});return t.login?t.login(e,t.config||{}):new bn(e,t.ui||n)},Nn=function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pn(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({login:function(){return Promise.reject(new Error("Not implemented"))},logout:function(){return Promise.reject(new Error("Not implemented"))},register:function(){return Promise.reject(new Error("Not implemented"))},init:function(){return Promise.resolve(!0)},destroy:function(){}},(e.config("standalone")?Tn:"function"==typeof t.adapter?t.adapter:Rn[t.adapter||"server"])(e,t.config||{}))},Cn=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};d()(this,e),this.ui=wn(t,n),this.adapter=Nn(t,n),this.callback=function(){},this.core=t}return L()(e,[{key:"init",value:function(){var e=this;return this.ui.on("login:post",(function(t){return e.login(t)})),this.ui.on("register:post",(function(t){return e.register(t)})),this.adapter.init()}},{key:"destroy",value:function(){this.ui.destroy()}},{key:"shutdown",value:function(e){try{this.core.destroy()}catch(e){D.warn("Exception on destruction",e)}this.core.emit("osjs/core:logged-out"),e&&setTimeout((function(){window.location.reload()}),1)}},{key:"show",value:function(e){var t=this.core.config("auth.login",{}),n=t.username&&t.password,r=this.core.config("auth.cookie");if(this.callback=e,this.ui.init(n),n)return this.login(t);if(r.enabled){var o=vn.a.get(r.name);if(console.warn(o),o)return this.login(JSON.parse(o))}return Promise.resolve(!0)}},{key:"login",value:function(e){var t=this;return this.ui.emit("login:start"),this.adapter.login(e).then((function(n){if(n){var r=t.core.config("auth.cookie");return r.enabled?vn.a.set(r.name,JSON.stringify(e),{expires:r.expires,sameSite:"strict"}):vn.a.remove(r.name),t.ui.destroy(),t.callback(n),t.core.emit("osjs/core:logged-in"),t.ui.emit("login:stop",n),!0}return!1})).catch((function(e){return t.core.config("development")&&D.warn("Exception on login",e),t.ui.emit("login:error","Login failed"),t.ui.emit("login:stop"),!1}))}},{key:"logout",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.adapter.logout(t).then((function(n){if(!n)return!1;var r=e.core.config("auth.cookie");return vn.a.remove(r.name),e.shutdown(t),!0}))}},{key:"register",value:function(e){var t=this;return this.ui.emit("register:start"),this.adapter.register(e).then((function(e){return!!e&&(t.ui.emit("register:stop",e),e)})).catch((function(e){return t.core.config("development")&&D.warn("Exception on registration",e),t.ui.emit("register:error","Registration failed"),t.ui.emit("register:stop"),!1}))}}]),e}(),jn=n(22),kn=n.n(jn),In=function(){function e(t){d()(this,e),this.core=t}return L()(e,[{key:"destroy",value:function(){}},{key:"save",value:function(){var e=Ne.getApplications().filter((function(e){return!1!==e.options.sessionable})).map((function(e){return e.getSession()}));return this.core.make("osjs/settings").set("osjs/session",null,e).save()}},{key:"load",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];t&&Ne.destroyAll();var n=this.core.make("osjs/settings").get("osjs/session");return!n||n instanceof Array||(n=Object.values(n)),n&&(console.group("Session::load()"),n.forEach((function(t){try{e.core.run(t.name,t.args,{restore:{windows:t.windows}})}catch(e){D.warn("Error while loading session entry",e)}})),console.groupEnd()),Promise.resolve(!0)}}]),e}();function Dn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Mn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Dn(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Dn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}
/*
 * OS.js - JavaScript Cloud/Web Desktop Platform
 *
 * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * 1. Redistributions of source code must retain the above copyright notice, this
 *    list of conditions and the following disclaimer
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 *    this list of conditions and the following disclaimer in the documentation
 *    and/or other materials provided with the distribution
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR
 * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
 * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * @author  Anders Evenrud <andersevenrud@gmail.com>
 * @license Simplified BSD License
 */var xn=function(){function e(t){d()(this,e),this.loaded=[],this.$root=t}return L()(e,[{key:"destroy",value:function(){this.loaded=[]}},{key:"load",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=function(e){return!n&&t.loaded.find((function(t){return t===e}))},o=e.filter((function(e){return!r(e)})).map((function(e){return D.debug("Packages::preload()",e),(e.match(/\.js$/)?le(t.$root,e):ue(t.$root,e)).then((function(t){return{success:!0,entry:e,el:t}})).catch((function(t){return{success:!1,entry:e,error:t}}))}));return Promise.all(o).then((function(e){return t._load(e,r)}))}},{key:"_load",value:function(e,t){var n=this,r=e.filter((function(e){return e.success}));r.forEach((function(e){t(e)||n.loaded.push(e)}));var o=e.filter((function(e){return!e.success}));return o.forEach((function(e){return D.warn("Failed loading",e.entry,e.error)})),{errors:o.map((function(e){return e.entry})),elements:r.reduce((function(e,t){return Mn(Mn({},e),{},l()({},t.entry,t.el))}),{})}}}]),e}();function Fn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Un(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fn(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}
/*
 * OS.js - JavaScript Cloud/Web Desktop Platform
 *
 * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * 1. Redistributions of source code must retain the above copyright notice, this
 *    list of conditions and the following disclaimer
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 *    this list of conditions and the following disclaimer in the documentation
 *    and/or other materials provided with the distribution
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR
 * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
 * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * @author  Anders Evenrud <andersevenrud@gmail.com>
 * @license Simplified BSD License
 */var Hn=function(e){var t=e.getUser(),n=e.config("packages.permissions",{}),r=[function(e){var n=!1===e.strictGroups?"some":"every";return!(e.groups instanceof Array)||e.groups[n]((function(e){return-1!==t.groups.indexOf(e)}))},function(e){var r=n[e.name];if(r&&r.groups instanceof Array){var o=!1===r.strictGroups?"some":"every";return r.groups[o]((function(e){return-1!==t.groups.indexOf(e)}))}return!0},function(e){return!(t.blacklist instanceof Array)||-1===t.blacklist.indexOf(e.name)}];return function(e){return r.every((function(t){return t(e)}))}};function Gn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Kn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Gn(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Gn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}
/*
 * OS.js - JavaScript Cloud/Web Desktop Platform
 *
 * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * 1. Redistributions of source code must retain the above copyright notice, this
 *    list of conditions and the following disclaimer
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 *    this list of conditions and the following disclaimer in the documentation
 *    and/or other materials provided with the distribution
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR
 * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
 * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * @author  Anders Evenrud <andersevenrud@gmail.com>
 * @license Simplified BSD License
 */var Wn=function(){function e(t){d()(this,e),this.core=t,this.packages=[],this.metadata=[],this._running=[],this.preloader=new xn(t.$resourceRoot),this.inited=!1}return L()(e,[{key:"destroy",value:function(){this.packages=[],this.metadata=[],this.preloader.destroy()}},{key:"init",value:function(){var e=this;D.debug("Packages::init()"),this.inited||this.core.on("osjs/core:started",(function(){return e._autostart()})),this.metadata=this.core.config("packages.metadata",[]).map((function(e){return Kn({type:"application"},e)})),this.inited=!0;var t=this.core.config("packages.manifest");return t?this.core.request(t,{},"json",!0).then((function(t){return e.addPackages(t)})).then((function(t){return e._preloadBackgroundFiles(t)})).then((function(){return!0})).catch((function(e){return D.error(e)})):Promise.resolve(!0)}},{key:"launch",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};D.debug("Packages::launch()",e,t,n);var r=this.core.make("osjs/locale").translate,o=this.metadata.find((function(t){return t.name===e}));if(!o)throw new Error(r("ERR_PACKAGE_NOT_FOUND",e));return-1!==["theme","icons","sounds"].indexOf(o.type)?this._launchTheme(e,o):this._launchApplication(e,o,t,n)}},{key:"_launchApplication",value:function(e,t,n,r){var o=this,i=!1;if(t.singleton){var s=Ne.getApplications().find((function(e){return e.metadata.name===t.name}));if(s)return s.emit("attention",n,r),i=!0,Promise.resolve(s);if(this._running.filter((function(t){return t===e})).length>0)return new Promise((function(t,s){o.core.once("osjs/application:".concat(e,":launched"),(function(e){i||e.emit("attention",n,r),t(e)}))}))}return this.core.emit("osjs/application:launch",e,n,r),this._running.push(e),this._launch(e,t,n,r)}},{key:"_launchTheme",value:function(e,t){var n=this,r=this._getPreloads(t,"preload","theme");return this.preloader.load(r).then((function(t){return Kn(Kn({elements:{}},t),n.packages.find((function(t){return t.metadata.name===e}))||{})}))}},{key:"_getPreloads",value:function(e,t,n){var r,o,i=this;return function(e){return(e||[]).map((function(e){return e.filename}))}((r=e.files,o=t,(r||[]).filter((function(e){return e.type===o})))).map((function(t){return i.core.url(t,{},Kn({type:n},e))}))}},{key:"_launch",value:function(e,t,n,r){var o=this,i=this.core.make("osjs/locale").translate,s=Hn(this.core),a=function(t){o.core.has("osjs/dialog")?o.core.make("osjs/dialog","alert",{type:"error",title:i("ERR_PACKAGE_EXCEPTION",e),message:i("ERR_PACKAGE_EXCEPTION",e),error:t},(function(){})):alert("".concat(i("ERR_PACKAGE_EXCEPTION",e),": ").concat(t.stack||t))},c=function(t){throw o.core.emit("osjs/application:launched",e,!1),o.core.emit("osjs/application:".concat(e,":launched"),!1),a(t),new Error(t)},u=this._getPreloads(t,"preload","apps");return s(t)||c(i("ERR_PACKAGE_PERMISSION_DENIED",e)),this.preloader.load(u,!0===r.forcePreload).then((function(t){var s=t.errors;s.length&&c(i("ERR_PACKAGE_LOAD",e,s.join(", ")));var u=o.packages.find((function(t){return t.metadata.name===e}));return u||c(i("ERR_PACKAGE_NO_RUNTIME",e)),function(t){var i;try{console.group("Packages::_launch()"),(i=t.callback(o.core,n,r,t.metadata))instanceof Ne?i.on("destroy",(function(){var t=o._running.findIndex((function(t){return t===e}));-1!==t&&o._running.splice(t,1)})):D.warn("The application",e,"did not return an Application instance from registration")}catch(t){a(t),D.warn("Exception when launching",e,t)}finally{o.core.emit("osjs/application:launched",e,i),o.core.emit("osjs/application:".concat(e,":launched"),i),console.groupEnd()}return i}(u)}))}},{key:"_autostart",value:function(){var e=this,t=this.metadata.filter((function(e){return!0===e.autostart})),n=this.core.config("application.autostart",[]).map((function(e){return"string"==typeof e?{name:e}:e}));[].concat(c()(t),c()(n)).forEach((function(t){var n=t.name,r=t.args;return e.launch(n,r||{})}))}},{key:"register",value:function(e,t){D.debug("Packages::register()",e);var n=this.core.make("osjs/locale").translate,r=this.metadata.find((function(t){return t.name===e}));if(!r)throw new Error(n("ERR_PACKAGE_NO_METADATA",e));var o=this.packages.findIndex((function(t){return t.metadata.name===e}));-1!==o&&this.packages.splice(o,1),this.packages.push({metadata:r,callback:t})}},{key:"addPackages",value:function(e){if(e instanceof Array){var t=this.core.config("packages.overrideMetadata",{}),n=function(e){return e.map((function(e){return Un(Un({type:"application"},e),{},{files:(e.files||[]).map((function(e){return"string"==typeof e?{filename:e,type:"preload"}:Un({type:"preload"},e)}))})}))}(e).map((function(e){return t[e.name]?Kn(Kn({},e),t[e.name]):e}));this.metadata=[].concat(c()(this.metadata),c()(n))}return this.getPackages()}},{key:"getPackages",value:function(e){e=e||function(){return!0};var t=this.metadata.map((function(e){return Kn({},e)})),n=this.core.config("packages.hidden",[]),r=Hn(this.core);return t.filter(r).filter((function(e){return!(n instanceof Array)||-1===n.indexOf(e.name)})).filter(e)}},{key:"getCompatiblePackages",value:function(e){return this.getPackages((function(t){return!!t.mimes&&!!t.mimes.find((function(t){try{return new RegExp(t).test(e)}catch(e){D.warn("Compability check failed",e)}return t===e}))}))}},{key:"_preloadBackgroundFiles",value:function(e){var t=this,n=e.reduce((function(e,n){return[].concat(c()(e),c()(t._getPreloads(n,"background","apps")))}),[]);return this.preloader.load(n).then((function(e){var t=e.errors;(void 0===t?[]:t).forEach((function(e){return D.error(e)}))}))}},{key:"running",value:function(){return this._running}}]),e}();function Vn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}
/*
 * OS.js - JavaScript Cloud/Web Desktop Platform
 *
 * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * 1. Redistributions of source code must retain the above copyright notice, this
 *    list of conditions and the following disclaimer
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 *    this list of conditions and the following disclaimer in the documentation
 *    and/or other materials provided with the distribution
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR
 * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
 * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * @author  Anders Evenrud <andersevenrud@gmail.com>
 * @license Simplified BSD License
 */
var $n=function(){function e(t){d()(this,e),this.core=t,this.entries=[]}return L()(e,[{key:"destroy",value:function(){this.entries=[]}},{key:"create",value:function(e,t){var n=this,r=this.core.make("osjs/locale").translate("LBL_TRAY"),o=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vn(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({key:null,icon:R,title:r,onclick:t=t||function(){},oncontextmenu:t,handler:t},e);return D.debug("Created new tray entry",o),this.entries.push(o),this.core.emit("osjs/tray:create",o),this.core.emit("osjs/tray:update",this.entries),{entry:o,update:function(e){Object.keys(e).forEach((function(t){return o[t]=e[t]})),n.core.emit("osjs/tray:update",n.entries)},destroy:function(){return n.remove(o)}}}},{key:"remove",value:function(e){var t=this.entries.findIndex((function(t){return t===e}));-1!==t&&(this.entries.splice(t,1),this.core.emit("osjs/tray:remove",e),this.core.emit("osjs/tray:update",this.entries))}},{key:"list",value:function(){return this.entries}},{key:"has",value:function(e){return-1!==this.entries.findIndex((function(t){return t.key===e}))}}]),e}(),zn=function(){function e(){d()(this,e),this.clipboard=void 0,this.clear()}return L()(e,[{key:"destroy",value:function(){this.clear()}},{key:"clear",value:function(){this.clipboard={data:void 0,type:void 0}}},{key:"set",value:function(e,t){this.clipboard={data:e,type:t}}},{key:"has",value:function(e){return e instanceof RegExp?"string"==typeof this.clipboard.type&&!!this.clipboard.type.match(e):this.clipboard.type===e}},{key:"get",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.clipboard.data,n="function"==typeof t?t():t;return e&&this.clear(),Promise.resolve(n)}}]),e}(),Yn=function(){function e(){d()(this,e),this.middleware={}}return L()(e,[{key:"destroy",value:function(){this.clear()}},{key:"clear",value:function(){this.middleware={}}},{key:"add",value:function(e,t){this.middleware[e]||(this.middleware[e]=[]),this.middleware[e].push(t)}},{key:"remove",value:function(e,t){this.middleware[e]&&(this.middleware[e]=this.middleware[e].filter((function(e){return e!==t})))}},{key:"get",value:function(e){return this.middleware[e]||[]}}]),e}(),Zn={ERR_REQUEST_STANDALONE:"Cannot make requests in standalone mode.",ERR_REQUEST_NOT_OK:"An error occured while performing a request: {0}",ERR_VFS_MOUNT_NOT_FOUND:"Filesystem '{0}' not found",ERR_VFS_MOUNT_NOT_FOUND_FOR:"Filesystem not found for '{0}'",ERR_VFS_MOUNT_NOT_MOUNTED:"Filesystem '{0}' not mounted",ERR_VFS_MOUNT_ALREADY_MOUNTED:"Filesystem '{0}' already mounted",ERR_VFS_PATH_FORMAT_INVALID:"Given path '{0}' does not match 'name:/path'",ERR_PACKAGE_PERMISSION_DENIED:"You are not permitted to run '{0}'",ERR_PACKAGE_NOT_FOUND:"Package Metadata '{0}' not found",ERR_PACKAGE_LOAD:"Package Loading '{0}' failed: {1}",ERR_PACKAGE_NO_RUNTIME:"Package Runtime '{0}' not found",ERR_PACKAGE_NO_METADATA:"Metadata not found for '{0}'. Is it in the manifest?",ERR_PACKAGE_EXCEPTION:"An exception occured in '{0}'",ERR_WINDOW_ID_EXISTS:"Window with ID '{0}' already exists",ERR_INVALID_LOCALE:"Invalid locale '{0}'",LBL_CONNECTION_LOST:"Connection Lost",LBL_CONNECTION_LOST_MESSAGE:"The connection to the OS.js was lost. Reconnecting....",LBL_CONNECTION_RESTORED:"Connection Restored",LBL_CONNECTION_RESTORED_MESSAGE:"The connection to the OS.js server was restored.",LBL_CONNECTION_FAILED:"Connection Failed",LBL_CONNECTION_FAILED_MESSAGE:"The connection to the OS.js could not be established. Some features might not work properly.",LBL_APP_CAT_DEVELOPMENT:"Development",LBL_APP_CAT_SCIENCE:"Science",LBL_APP_CAT_GAMES:"Games",LBL_APP_CAT_GRAPHICS:"Graphics",LBL_APP_CAT_NETWORK:"Network",LBL_APP_CAT_MULTIMEDIA:"Multimedia",LBL_APP_CAT_OFFICE:"Office",LBL_APP_CAT_SYSTEM:"System",LBL_APP_CAT_UTILITIES:"Utilities",LBL_APP_CAT_OTHER:"Other",LBL_LAUNCH_SELECT:"Select application",LBL_LAUNCH_SELECT_MESSAGE:"Select application for '{0}'",LBL_DESKTOP_SELECT_WALLPAPER:"Select wallpaper",LBL_DESKTOP_SELECT_THEME:"Select theme",LBL_SEARCH_TOOLTOP:"Search Filesystem ({0})",LBL_SEARCH_PLACEHOLDER:"Search filesystems...",LBL_SEARCH_WAIT:"Searching...",LBL_SEARCH_RESULT:"Showing {0} results",LBL_DESKTOP_SET_AS_WALLPAPER:"Set as wallpaper",LBL_FS_B:"B",LBL_FS_M:"M",LBL_FS_G:"G",LBL_FS_KIB:"KiB",LBL_FS_MIB:"MiB",LBL_FS_GIB:"GiB",LBL_TOP:"Top",LBL_LEFT:"Left",LBL_RIGHT:"Right",LBL_BOTTOM:"Bottom",LBL_MENU:"Menu",LBL_ERROR:"Error",LBL_INFO:"Info",LBL_MESSAGE:"Message",LBL_WARNINIG:"Warning",LBL_SUCCESS:"Success",LBL_FAILURE:"Failure",LBL_WINDOW:"Window",LBL_WINDOWS:"Windows",LBL_NOTIFICATION:"Notification",LBL_NOTIFICATIONS:"Notifications",LBL_TRAY:"Tray Entry",LBL_NAME:"Name",LBL_TYPE:"Type",LBL_SIZE:"Size",LBL_FILE:"File",LBL_NEW:"New",LBL_OPEN:"Open",LBL_OPEN_WITH:"Open with...",LBL_SAVE:"Save",LBL_SAVEAS:"Save As",LBL_OK:"OK",LBL_ABORT:"Abort",LBL_CANCEL:"Cancel",LBL_CLOSE:"Close",LBL_QUIT:"Quit",LBL_YES:"Yes",LBL_NO:"No",LBL_GO:"Go",LBL_MKDIR:"Create new directory",LBL_MKFILE:"Create new file",LBL_COPY:"Copy",LBL_PASTE:"Paste",LBL_CUT:"Cut",LBL_MOVE:"Move",LBL_RENAME:"Rename",LBL_DELETE:"Delete",LBL_DOWNLOAD:"Download",LBL_REFRESH:"Refresh",LBL_RELOAD:"Reload",LBL_HOME:"Home",LBL_VIEW:"View",LBL_HELP:"Help",LBL_ABOUT:"About",LBL_APPLICATION:"Application",LBL_APPLICATIONS:"Applications",LBL_KILL:"Kill",LBL_KILL_ALL:"Kill all",LBL_MINIMIZE:"Minimize",LBL_MAXIMIZE:"Maximize",LBL_RESTORE:"Restore",LBL_RAISE:"Raise",LBL_SHADE:"Shade",LBL_UNSHADE:"Unshade",LBL_ONTOP:"On top",LBL_RESIZE:"Resize",LBL_BACK:"Back",LBL_FORWARD:"Forward",LBL_UPLOAD:"Upload",LBL_IMAGE:"Image",LBL_CREATE_SHORTCUT:"Create shortcut",LBL_REMOVE_SHORTCUT:"Remove shortcut",LBL_EDIT:"Edit"},qn={ERR_REQUEST_STANDALONE:"Impossible d'effectuer des requtes en mode autonome.",ERR_REQUEST_NOT_OK:"Une erreur s'est produite en excutant une requte : {0}",ERR_VFS_MOUNT_NOT_FOUND:"Systme de fichier '{0}' absent",ERR_VFS_MOUNT_NOT_FOUND_FOR:"Systme de fichier pour '{0}' absent",ERR_VFS_MOUNT_NOT_MOUNTED:"Le systme de fichier '{0}' n'est pas encore mont",ERR_VFS_MOUNT_ALREADY_MOUNTED:"Le systme de fichier '{0}' est dj mont",ERR_VFS_PATH_FORMAT_INVALID:"Le dossier '{0}' ne correspond pas 'name:/path'",ERR_PACKAGE_NOT_FOUND:"Les mtadonnes du paquet '{0}' n'ont pas t touves",ERR_PACKAGE_LOAD:"Le chargement du paquet '{0}' a chou: {1}",ERR_PACKAGE_NO_RUNTIME:"Dure d'excution du paquet '{0}' absente",ERR_PACKAGE_NO_METADATA:"Mtadonnes absentes pour '{0}'. Sont-elles dans le manifeste ?",ERR_PACKAGE_EXCEPTION:"Une exception s'est produite dans '{0}'",ERR_WINDOW_ID_EXISTS:"La fntre avec l'identifiant '{0}' existe dj",ERR_INVALID_LOCALE:"Paramtre de langue invalide '{0}'",LBL_CONNECTION_LOST:"Connexion perdue",LBL_CONNECTION_LOST_MESSAGE:"La connexion  OS.js a t perdue. Reconnexion...",LBL_CONNECTION_RESTORED:"Connexion restaure",LBL_CONNECTION_RESTORED_MESSAGE:"La connexion  OS.js a t restaure.",LBL_APP_CAT_DEVELOPMENT:"Dveloppement",LBL_APP_CAT_SCIENCE:"Science",LBL_APP_CAT_GAMES:"Jeux",LBL_APP_CAT_GRAPHICS:"Graphisme",LBL_APP_CAT_NETWORK:"Rseau",LBL_APP_CAT_MULTIMEDIA:"Multimdia",LBL_APP_CAT_OFFICE:"Bureautique",LBL_APP_CAT_SYSTEM:"Systme",LBL_APP_CAT_UTILITIES:"Utilitaires",LBL_APP_CAT_OTHER:"Autre",LBL_LAUNCH_SELECT:"Slectionner l'application",LBL_LAUNCH_SELECT_MESSAGE:"Slectionner l'application pour '{0}'",LBL_DESKTOP_SELECT_WALLPAPER:"Slectionner le fond d'cran",LBL_DESKTOP_SELECT_THEME:"Slectionner le thme",LBL_SEARCH_TOOLTOP:"Recherche d'un systme de fichier ({0})",LBL_SEARCH_PLACEHOLDER:"Recherche des systmes de fichiers...",LBL_SEARCH_WAIT:"Recherche...",LBL_SEARCH_RESULT:"Affichage des rsultats {0}",LBL_FS_B:"B",LBL_FS_M:"M",LBL_FS_G:"G",LBL_FS_KIB:"KiB",LBL_FS_MIB:"MiB",LBL_FS_GIB:"GiB",LBL_TOP:"En Haut",LBL_LEFT:" Gauche",LBL_RIGHT:" Droite",LBL_BOTTOM:"En Bas",LBL_MENU:"Menu",LBL_ERROR:"Erreur",LBL_INFO:"Info",LBL_MESSAGE:"Message",LBL_WARNINIG:"Attention",LBL_SUCCESS:"Succs",LBL_FAILURE:"chec",LBL_WINDOW:"Fentre",LBL_WINDOWS:"Fentres",LBL_NOTIFICATION:"Notification",LBL_NOTIFICATIONS:"Notifications",LBL_TRAY:"Accs au plateau",LBL_NAME:"Nom",LBL_TYPE:"Type",LBL_SIZE:"Taille",LBL_FILE:"Fichier",LBL_NEW:"Nouveau",LBL_OPEN:"Ouvrir",LBL_SAVE:"Sauvegarder",LBL_SAVEAS:"Sauvegarder comme",LBL_OK:"OK",LBL_ABORT:"Abandonner",LBL_CANCEL:"Annuler",LBL_CLOSE:"Fermer",LBL_QUIT:"Quitter",LBL_YES:"Oui",LBL_NO:"Non",LBL_GO:"C'est parti !",LBL_MKDIR:"Crer nouveau dossier",LBL_MKFILE:"Crer nouveau fichier",LBL_COPY:"Copier",LBL_PASTE:"Coller",LBL_CUT:"Couper",LBL_MOVE:"Dplacer",LBL_RENAME:"Renommer",LBL_DELETE:"Supprimer",LBL_DOWNLOAD:"Tlcharger",LBL_REFRESH:"Rafrachir",LBL_RELOAD:"Recharger",LBL_HOME:"Accueil",LBL_VIEW:"Aperu",LBL_HELP:"Aide",LBL_ABOUT:" propos",LBL_APPLICATION:"Application",LBL_APPLICATIONS:"Applications",LBL_KILL:"Tuer",LBL_KILL_ALL:"Tuer tout"},Xn={ERR_REQUEST_STANDALONE:"Kan ikke gjre sprringer i standalone modus.",ERR_REQUEST_NOT_OK:"En feil oppstod under sprring: {0}",ERR_VFS_MOUNT_NOT_FOUND:"Filsystem '{0}' ikke funnet",ERR_VFS_MOUNT_NOT_FOUND_FOR:"Filsystem ikke funnet for '{0}'",ERR_VFS_MOUNT_NOT_MOUNTED:"Filsystem '{0}' ikke montert",ERR_VFS_MOUNT_ALREADY_MOUNTED:"Filesystem '{0}' allerede montert",ERR_VFS_PATH_FORMAT_INVALID:"Angitt sti '{0}' tilfredstiller ikke format 'name:/path'",ERR_PACKAGE_NOT_FOUND:"Pakke Metadata '{0}' ikke funnet",ERR_PACKAGE_LOAD:"Pakke Lasting '{0}' feilet: {1}",ERR_PACKAGE_NO_RUNTIME:"Pakke Runtime '{0}' ikke funnet",ERR_PACKAGE_NO_METADATA:"Metadata ikke funnet for '{0}'. Er den i manifestet?",ERR_PACKAGE_EXCEPTION:"En unntaksfeil oppstod i '{0}'",ERR_WINDOW_ID_EXISTS:"Vindu med ID '{0}' eksisterer allerede",ERR_INVALID_LOCALE:"Ugyldig lokalisering '{0}'",LBL_CONNECTION_LOST:"Tilkobling tapt",LBL_CONNECTION_LOST_MESSAGE:"Tilkobling til OS.js var tapt. Kobler til p nytt....",LBL_CONNECTION_RESTORED:"Tilkobling gjenopprettet",LBL_CONNECTION_RESTORED_MESSAGE:"Tilkobling til OS.js var gjenopprettet.",LBL_CONNECTION_FAILED:"Tilkobling feilet",LBL_CONNECTION_FAILED_MESSAGE:"Tilkobling til OS.js var ikke vellykket. Noen egenskaper er utilgjenglig.",LBL_APP_CAT_DEVELOPMENT:"Utvikling",LBL_APP_CAT_SCIENCE:"Vitenskap",LBL_APP_CAT_GAMES:"Spill",LBL_APP_CAT_GRAPHICS:"Grafikk",LBL_APP_CAT_NETWORK:"Nettverk",LBL_APP_CAT_MULTIMEDIA:"Multimedia",LBL_APP_CAT_OFFICE:"Kontor",LBL_APP_CAT_SYSTEM:"System",LBL_APP_CAT_UTILITIES:"Verkty",LBL_APP_CAT_OTHER:"Andre",LBL_LAUNCH_SELECT:"Velg applikasjon",LBL_LAUNCH_SELECT_MESSAGE:"Velg applikasjon for '{0}'",LBL_DESKTOP_SELECT_WALLPAPER:"Velg bakgrunnsbilde",LBL_DESKTOP_SELECT_THEME:"Velg tema",LBL_SEARCH_TOOLTOP:"Sk i filsystemer ({0})",LBL_SEARCH_PLACEHOLDER:"Sker filsystemer...",LBL_SEARCH_WAIT:"Sker...",LBL_SEARCH_RESULT:"Viser {0} resultater",LBL_DESKTOP_SET_AS_WALLPAPER:"Sett som bakgrunnsbilde",LBL_FS_B:"B",LBL_FS_M:"M",LBL_FS_G:"G",LBL_FS_KIB:"KiB",LBL_FS_MIB:"MiB",LBL_FS_GIB:"GiB",LBL_TOP:"Topp",LBL_LEFT:"Venstre",LBL_RIGHT:"Hyre",LBL_BOTTOM:"Bunn",LBL_MENU:"Meny",LBL_ERROR:"Feil",LBL_INFO:"Info",LBL_MESSAGE:"Melding",LBL_WARNINIG:"Advarsel",LBL_SUCCESS:"Velykket",LBL_FAILURE:"Svikt",LBL_WINDOW:"Vindu",LBL_WINDOWS:"Vinduer",LBL_NOTIFICATION:"Notifikasjon",LBL_NOTIFICATIONS:"Notifikasjoner",LBL_TRAY:"Tray Oppfring",LBL_NAME:"Navn",LBL_TYPE:"Type",LBL_SIZE:"Strrelse",LBL_FILE:"Fil",LBL_NEW:"Ny",LBL_OPEN:"pne",LBL_OPEN_WITH:"pne med...",LBL_SAVE:"Lagre",LBL_SAVEAS:"Lagre Som",LBL_OK:"OK",LBL_ABORT:"Abort",LBL_CANCEL:"Avbryt",LBL_CLOSE:"Lukk",LBL_QUIT:"Slutt",LBL_YES:"Ja",LBL_NO:"Nei",LBL_GO:"G",LBL_MKDIR:"Lag ny mappe",LBL_MKFILE:"Lag ny fil",LBL_COPY:"Kopier",LBL_PASTE:"Lim inn",LBL_CUT:"Kutt",LBL_MOVE:"Flytt",LBL_RENAME:"Navngi",LBL_DELETE:"Slett",LBL_DOWNLOAD:"Last ned",LBL_REFRESH:"Gjenoppfrisk",LBL_RELOAD:"Last p nytt",LBL_HOME:"Hjem",LBL_VIEW:"Visning",LBL_HELP:"Hjelp",LBL_ABOUT:"Om",LBL_APPLICATION:"Applikasjon",LBL_APPLICATIONS:"Applikasjoner",LBL_KILL:"Drep",LBL_KILL_ALL:"Drep alle",LBL_MINIMIZE:"Minimisr",LBL_MAXIMIZE:"Maksimisr",LBL_RESTORE:"Gjenopprett",LBL_RAISE:"Lft",LBL_SHADE:"Rull opp",LBL_UNSHADE:"Rull ned",LBL_ONTOP:"Alltid verst",LBL_RESIZE:"Endre strrelse",LBL_BACK:"Tilbake",LBL_FORWARD:"Frem",LBL_UPLOAD:"Last opp",LBL_IMAGE:"Bilde",LBL_CREATE_SHORTCUT:"Lag til snarvei",LBL_REMOVE_SHORTCUT:"Fjern snarvei",LBL_EDIT:"Rediger"},Qn={ERR_REQUEST_STANDALONE:"Zahteve v samostojnem nainu niso mogoe.",ERR_REQUEST_NOT_OK:"Pri zahtevi je prilo do napake: {0}",ERR_VFS_MOUNT_NOT_FOUND:"Datoteni sistem '{0}' ni najden",ERR_VFS_MOUNT_NOT_FOUND_FOR:"Datoteni sistem ni najden '{0}'",ERR_VFS_MOUNT_NOT_MOUNTED:"Datoteni sistem '{0}' ni nameen",ERR_VFS_MOUNT_ALREADY_MOUNTED:"Datoteni sistem '{0}' e nameen",ERR_VFS_PATH_FORMAT_INVALID:"Podana pot '{0}' se ne ujema z 'name:/path'",ERR_PACKAGE_NOT_FOUND:"Metapodatki paketa '{0}' niso najdeni",ERR_PACKAGE_LOAD:"Pri nalaganju pageta '{0}' je prilo do napake: {1}",ERR_PACKAGE_NO_RUNTIME:"Koda paketa '{0}' ni najdena",ERR_PACKAGE_NO_METADATA:"Metapodatki '{0}' niso najdeni. Ali so v datoteki manifest?",ERR_PACKAGE_EXCEPTION:"Sproena je bila izjema v '{0}'",ERR_WINDOW_ID_EXISTS:"Okno z ID-jem '{0}' e obstaja",ERR_INVALID_LOCALE:"Neveljaven prevod '{0}'",LBL_CONNECTION_LOST:"Izguba povezave",LBL_CONNECTION_LOST_MESSAGE:"Povezava do strenika je bila izgubljena. Ponovno povezovanje ...",LBL_CONNECTION_RESTORED:"Vzpostavitev povezave",LBL_CONNECTION_RESTORED_MESSAGE:"Povezava do strenika je bila ponovno vzpostavljena.",LBL_CONNECTION_FAILED:"Povezava ni uspela",LBL_CONNECTION_FAILED_MESSAGE:"Povezave z OS.js ni bilo mogoe vzpostaviti. Nekatere funkcije morda ne bodo delovale pravilno.",LBL_APP_CAT_DEVELOPMENT:"Razvoj",LBL_APP_CAT_SCIENCE:"Znanost",LBL_APP_CAT_GAMES:"Igre",LBL_APP_CAT_GRAPHICS:"Grafika",LBL_APP_CAT_NETWORK:"Omreje",LBL_APP_CAT_MULTIMEDIA:"Multimedija",LBL_APP_CAT_OFFICE:"Pisarna",LBL_APP_CAT_SYSTEM:"Sistem",LBL_APP_CAT_UTILITIES:"Orodja",LBL_APP_CAT_OTHER:"Drugo",LBL_LAUNCH_SELECT:"Izberite aplikacijo",LBL_LAUNCH_SELECT_MESSAGE:"Izberite aplikacijo za '{0}'",LBL_DESKTOP_SELECT_WALLPAPER:"Izberite ozadje",LBL_DESKTOP_SELECT_THEME:"Izberite temo",LBL_SEARCH_TOOLTOP:"Ii datoteni sistem ({0})",LBL_SEARCH_PLACEHOLDER:"Iskanje po datotenih sistemih ...",LBL_SEARCH_WAIT:"Iskanje ...",LBL_SEARCH_RESULT:"Prikaz {0} rezultatov",LBL_FS_B:"B",LBL_FS_M:"M",LBL_FS_G:"G",LBL_FS_KIB:"KiB",LBL_FS_MIB:"MiB",LBL_FS_GIB:"GiB",LBL_TOP:"Zgoraj",LBL_LEFT:"Levo",LBL_RIGHT:"Desno",LBL_BOTTOM:"Spodaj",LBL_MENU:"Meni",LBL_ERROR:"Napaka",LBL_INFO:"Informacije",LBL_MESSAGE:"Sporoilo",LBL_WARNINIG:"Opozorilo",LBL_SUCCESS:"Uspeh",LBL_FAILURE:"Neuspeh",LBL_WINDOW:"Okno",LBL_WINDOWS:"Okna",LBL_NOTIFICATION:"Obvestilo",LBL_NOTIFICATIONS:"Obvestila",LBL_TRAY:"Element vrstice",LBL_NAME:"Ime",LBL_TYPE:"Vrsta",LBL_SIZE:"Velikost",LBL_FILE:"Datoteka",LBL_NEW:"Novo",LBL_OPEN:"Odpri",LBL_SAVE:"Shrani",LBL_SAVEAS:"Shrani kot",LBL_OK:"V redu",LBL_ABORT:"Prekini",LBL_CANCEL:"Preklii",LBL_CLOSE:"Zapri",LBL_QUIT:"Izklopi",LBL_YES:"Da",LBL_NO:"Ne",LBL_GO:"Pojdi",LBL_MKDIR:"Ustvari novo mapo",LBL_MKFILE:"Ustvari novo datoteko",LBL_COPY:"Kopiraj",LBL_PASTE:"Prilepi",LBL_CUT:"Izrei",LBL_MOVE:"Premakni",LBL_RENAME:"Preimenuj",LBL_DELETE:"Izbrii",LBL_DOWNLOAD:"Prenesi",LBL_REFRESH:"Osvei",LBL_RELOAD:"Osvei",LBL_HOME:"Domov",LBL_VIEW:"Pogled",LBL_HELP:"Pomo",LBL_ABOUT:"O programu",LBL_APPLICATION:"Aplikacija",LBL_APPLICATIONS:"Aplikacije",LBL_KILL:"Konaj",LBL_KILL_ALL:"Konaj vse",LBL_MINIMIZE:"Pomanjaj",LBL_MAXIMIZE:"Poveaj",LBL_RESTORE:"Obnovi",LBL_RAISE:"Dvigni",LBL_SHADE:"Zaseni",LBL_UNSHADE:"Odseni",LBL_ONTOP:"Na vrhu",LBL_RESIZE:"Spremeni velikost",LBL_BACK:"Nazaj",LBL_FORWARD:"Naprej",LBL_UPLOAD:"Naloi",LBL_IMAGE:"Slika"},Jn={ERR_REQUEST_STANDALONE:"Khng th gi yu cu  ch  c lp.",ERR_REQUEST_NOT_OK:" xy ra li khi thc hin yu cu: {0}",ERR_VFS_MOUNT_NOT_FOUND:"Khng tm thy h thng tp tin '{0}'",ERR_VFS_MOUNT_NOT_FOUND_FOR:"Khng tm thy h thng tp tin cho '{0}'",ERR_VFS_MOUNT_NOT_MOUNTED:"H thng tp tin '{0}' khng c gn kt",ERR_VFS_MOUNT_ALREADY_MOUNTED:"H thng tp tin '{0}'  c gn kt",ERR_VFS_PATH_FORMAT_INVALID:"nh dng ng dn '{0}' khng khp vi 'name:/path'",ERR_PACKAGE_NOT_FOUND:"Khng tm thy siu d liu ca gi '{0}'",ERR_PACKAGE_LOAD:"Ti gi '{0}' tht bi: {1}",ERR_PACKAGE_NO_RUNTIME:"Khng tm thy Runtime ca gi '{0}'",ERR_PACKAGE_NO_METADATA:"Khng tm thy siu d liu cho '{0}'. Bn c chc n  c bo co trong manifest khng?",ERR_PACKAGE_EXCEPTION:" xy ra li trong '{0}'",ERR_WINDOW_ID_EXISTS:"Ca s vi ID '{0}'  tn ti",ERR_INVALID_LOCALE:"Ngn ng khng hp l '{0}'",LBL_CONNECTION_LOST:"Mt kt ni",LBL_CONNECTION_LOST_MESSAGE:"Kt ni vi OS.js  b mt. ang kt ni li....",LBL_CONNECTION_RESTORED:" khi phc kt ni",LBL_CONNECTION_RESTORED_MESSAGE:"Kt ni vi my ch OS.js  c khi phc.",LBL_CONNECTION_FAILED:"Kt ni tht bi",LBL_CONNECTION_FAILED_MESSAGE:"Khng th kt ni n my ch OS.js. Mt s tnh nng c th khng hot ng n nh.",LBL_APP_CAT_DEVELOPMENT:"Pht trin",LBL_APP_CAT_SCIENCE:"Khoa hc",LBL_APP_CAT_GAMES:"Tr chi",LBL_APP_CAT_GRAPHICS:" ha",LBL_APP_CAT_NETWORK:"Mng",LBL_APP_CAT_MULTIMEDIA:"a phng tin",LBL_APP_CAT_OFFICE:"Vn phng",LBL_APP_CAT_SYSTEM:"H thng",LBL_APP_CAT_UTILITIES:"Tin ch",LBL_APP_CAT_OTHER:"ng dng khc",LBL_LAUNCH_SELECT:"Chn ng dng",LBL_LAUNCH_SELECT_MESSAGE:"Chn ng dng  m tp tin '{0}'",LBL_DESKTOP_SELECT_WALLPAPER:"Thay i hnh nn",LBL_DESKTOP_SELECT_THEME:"Thay i ch ",LBL_SEARCH_TOOLTOP:"Tm kim d liu ({0})",LBL_SEARCH_PLACEHOLDER:"Tm kim...",LBL_SEARCH_WAIT:"ang tm kim...",LBL_SEARCH_RESULT:"ang hin th {0} kt qu",LBL_FS_B:"B",LBL_FS_M:"M",LBL_FS_G:"G",LBL_FS_KIB:"KiB",LBL_FS_MIB:"MiB",LBL_FS_GIB:"GiB",LBL_TOP:"Pha trn",LBL_LEFT:"Tri",LBL_RIGHT:"Phi",LBL_BOTTOM:"Pha di",LBL_MENU:"Menu",LBL_ERROR:"Li",LBL_INFO:"Thng tin",LBL_MESSAGE:"Thng bo",LBL_WARNINIG:"Cnh bo",LBL_SUCCESS:"Thnh cng",LBL_FAILURE:"Tht bi",LBL_WINDOW:"Ca s",LBL_WINDOWS:"Cc ca s",LBL_NOTIFICATION:"Thng bo",LBL_NOTIFICATIONS:"Cc thng bo",LBL_TRAY:"Mc khay h thng",LBL_NAME:"Tn",LBL_TYPE:"Kiu",LBL_SIZE:"Kch thc",LBL_FILE:"Tp tin",LBL_NEW:"Mi",LBL_OPEN:"M",LBL_SAVE:"Lu",LBL_SAVEAS:"Lu nh",LBL_OK:"OK",LBL_ABORT:"Hy thao tc",LBL_CANCEL:"Hy b",LBL_CLOSE:"ng",LBL_QUIT:"Thot",LBL_YES:"C",LBL_NO:"Khng",LBL_GO:"i",LBL_MKDIR:"To th mc mi",LBL_MKFILE:"To tp mi",LBL_COPY:"Sao chp",LBL_PASTE:"Dn",LBL_CUT:"Ct",LBL_MOVE:"Di chuyn",LBL_RENAME:"i tn",LBL_DELETE:"Xa",LBL_DOWNLOAD:"Ti v",LBL_REFRESH:"Lm mi",LBL_RELOAD:"Ti li",LBL_HOME:"Trang ch",LBL_VIEW:"Xem",LBL_HELP:"Hng dn",LBL_ABOUT:"Thng tin",LBL_APPLICATION:"ng dng",LBL_APPLICATIONS:"Cc ng dng",LBL_KILL:"ng",LBL_KILL_ALL:"ng tt c",LBL_MINIMIZE:"Thu nh",LBL_MAXIMIZE:"Ti a",LBL_RESTORE:"Phc hi",LBL_RAISE:"Nng ln",LBL_SHADE:"Lm m",LBL_UNSHADE:"B lm m",LBL_ONTOP:" trn cng",LBL_RESIZE:"Thay i kch thc",LBL_BACK:"Li",LBL_FORWARD:"Tin",LBL_UPLOAD:"Ti ln",LBL_IMAGE:"nh"},er={ERR_REQUEST_STANDALONE:"Cannot make requests in standalone mode.",ERR_REQUEST_NOT_OK:"An error occured while performing a request: {0}",ERR_VFS_MOUNT_NOT_FOUND:"Filesystem '{0}' nicht gefunden",ERR_VFS_MOUNT_NOT_FOUND_FOR:"Filesystem fr '{0}' nicht gefunden",ERR_VFS_MOUNT_NOT_MOUNTED:"Filesystem '{0}' nicht gemountet",ERR_VFS_MOUNT_ALREADY_MOUNTED:"Filesystem '{0}' schon gemountet",ERR_VFS_PATH_FORMAT_INVALID:"Given path '{0}' does not match 'name:/path'",ERR_PACKAGE_NOT_FOUND:"Paket-Metadaten  '{0}' nicht gefunden",ERR_PACKAGE_LOAD:"Paket Laden '{0}' ist fehlgeschlagen: {1}",ERR_PACKAGE_NO_RUNTIME:"Paketlaufzeit '{0}' nicht gefunden",ERR_PACKAGE_NO_METADATA:"Metadaten fr '{0}' nicht gefunden. Ist es in der Manifest?",ERR_PACKAGE_EXCEPTION:"Eine Ausnahme trat in '{0}' auf.",ERR_WINDOW_ID_EXISTS:"Fenster mit der ID '{0}' existiert schon",ERR_INVALID_LOCALE:"Invalid locale '{0}'",LBL_CONNECTION_LOST:"Verbindung unterbrochen",LBL_CONNECTION_LOST_MESSAGE:"Die Verbindung zu OS.js wurde unterbrochen. Wiederverbinden... ",LBL_CONNECTION_RESTORED:"Verbindung wiederhergestellt",LBL_CONNECTION_RESTORED_MESSAGE:"Die Verbindung OS.js server was restored.",LBL_APP_CAT_DEVELOPMENT:"IT-Entwicklung",LBL_APP_CAT_SCIENCE:"Wissenschaft",LBL_APP_CAT_GAMES:"Spiels",LBL_APP_CAT_GRAPHICS:"Grafiken",LBL_APP_CAT_NETWORK:"Netzwerk",LBL_APP_CAT_MULTIMEDIA:"Multimedia",LBL_APP_CAT_OFFICE:"Office",LBL_APP_CAT_SYSTEM:"System",LBL_APP_CAT_UTILITIES:"Dienstprogramme",LBL_APP_CAT_OTHER:"Andere",LBL_LAUNCH_SELECT:"Applikation auswhlen",LBL_LAUNCH_SELECT_MESSAGE:"Applikation fr '{0}' auswhlen",LBL_DESKTOP_SELECT_WALLPAPER:"Wallpaper auswhlen",LBL_DESKTOP_SELECT_THEME:"Theme auswhlen",LBL_SEARCH_TOOLTOP:"Dateisysteme ({0}) finden",LBL_SEARCH_PLACEHOLDER:"Dateisysteme finden...",LBL_SEARCH_WAIT:"Suche...",LBL_SEARCH_RESULT:"Anzeige von {0} Ergebnissen",LBL_FS_B:"B",LBL_FS_M:"M",LBL_FS_G:"G",LBL_FS_KIB:"KiB",LBL_FS_MIB:"MiB",LBL_FS_GIB:"GiB",LBL_TOP:"Oben",LBL_LEFT:"Links",LBL_RIGHT:"Rechts",LBL_BOTTOM:"Unten",LBL_MENU:"Men",LBL_ERROR:"Error",LBL_INFO:"Info",LBL_MESSAGE:"Message",LBL_WARNINIG:"Warnung",LBL_SUCCESS:"Success",LBL_FAILURE:"Failure",LBL_WINDOW:"Fenster",LBL_WINDOWS:"Fenster",LBL_NOTIFICATION:"Benachrichtigung",LBL_NOTIFICATIONS:"Benachrichtigungen",LBL_TRAY:"Infobereich-Eintrag",LBL_NAME:"Name",LBL_TYPE:"Typ",LBL_SIZE:"Gre",LBL_FILE:"Datei",LBL_NEW:"Neue",LBL_OPEN:"ffnen",LBL_SAVE:"Speichern",LBL_SAVEAS:"Speichern als",LBL_OK:"OK",LBL_ABORT:"Abbrechen",LBL_CANCEL:"Beenden",LBL_CLOSE:"Schlieen",LBL_QUIT:"Verlassen",LBL_YES:"Ja",LBL_NO:"Nein",LBL_GO:"Los",LBL_MKDIR:"Neues Verzeichnis erstellen",LBL_MKFILE:"Neue Datei erstellen",LBL_COPY:"Kopieren",LBL_PASTE:"Einfgen",LBL_CUT:"Ausschneiden",LBL_MOVE:"Verschieben",LBL_RENAME:"Umbenennen",LBL_DELETE:"Lschen",LBL_DOWNLOAD:"Herunterladen",LBL_REFRESH:"Aktualisieren",LBL_RELOAD:"Neu laden",LBL_HOME:"Startseite",LBL_VIEW:"Ansicht",LBL_HELP:"Hilfe",LBL_ABOUT:"ber",LBL_APPLICATION:"Anwendungsprogramme",LBL_APPLICATIONS:"Anwendungsprogrammen",LBL_KILL:"Beenden",LBL_KILL_ALL:"Beenden alle"},tr={ERR_REQUEST_STANDALONE:"",ERR_REQUEST_NOT_OK:"{0}",ERR_VFS_MOUNT_NOT_FOUND:" '{0}' ",ERR_VFS_MOUNT_NOT_FOUND_FOR:"'{0}'",ERR_VFS_MOUNT_NOT_MOUNTED:" '{0}' ",ERR_VFS_MOUNT_ALREADY_MOUNTED:" '{0}' ",ERR_VFS_PATH_FORMAT_INVALID:"'{0}''name:/path'",ERR_PACKAGE_NOT_FOUND:"'{0}'",ERR_PACKAGE_LOAD:" '{0}'  {1}",ERR_PACKAGE_NO_RUNTIME:" '{0}' ",ERR_PACKAGE_NO_METADATA:" '{0}' manifest",ERR_PACKAGE_EXCEPTION:"'{0}'",ERR_WINDOW_ID_EXISTS:"ID'{0}'",ERR_INVALID_LOCALE:" '{0}'",LBL_CONNECTION_LOST:"",LBL_CONNECTION_LOST_MESSAGE:"OS.js....",LBL_CONNECTION_RESTORED:"",LBL_CONNECTION_RESTORED_MESSAGE:"OS.js",LBL_CONNECTION_FAILED:"",LBL_CONNECTION_FAILED_MESSAGE:"OS.js ",LBL_APP_CAT_DEVELOPMENT:"",LBL_APP_CAT_SCIENCE:"",LBL_APP_CAT_GAMES:"",LBL_APP_CAT_GRAPHICS:"",LBL_APP_CAT_NETWORK:"",LBL_APP_CAT_MULTIMEDIA:"",LBL_APP_CAT_OFFICE:"",LBL_APP_CAT_SYSTEM:"",LBL_APP_CAT_UTILITIES:"",LBL_APP_CAT_OTHER:"",LBL_LAUNCH_SELECT:"",LBL_LAUNCH_SELECT_MESSAGE:"'{0}'",LBL_DESKTOP_SELECT_WALLPAPER:"",LBL_DESKTOP_SELECT_THEME:"",LBL_SEARCH_TOOLTOP:" ({0})",LBL_SEARCH_PLACEHOLDER:"...",LBL_SEARCH_WAIT:"...",LBL_SEARCH_RESULT:"{0}",LBL_FS_B:"B",LBL_FS_M:"M",LBL_FS_G:"G",LBL_FS_KIB:"KB",LBL_FS_MIB:"MB",LBL_FS_GIB:"GB",LBL_TOP:"",LBL_LEFT:"",LBL_RIGHT:"",LBL_BOTTOM:"",LBL_MENU:"",LBL_ERROR:"",LBL_INFO:"",LBL_MESSAGE:"",LBL_WARNINIG:"",LBL_SUCCESS:"",LBL_FAILURE:"",LBL_WINDOW:"",LBL_WINDOWS:"",LBL_NOTIFICATION:"",LBL_NOTIFICATIONS:"",LBL_TRAY:"",LBL_NAME:"",LBL_TYPE:"",LBL_SIZE:"",LBL_FILE:"",LBL_NEW:"",LBL_OPEN:"",LBL_SAVE:"",LBL_SAVEAS:"",LBL_OK:"",LBL_ABORT:"",LBL_CANCEL:"",LBL_CLOSE:"",LBL_QUIT:"",LBL_YES:"",LBL_NO:"",LBL_GO:"",LBL_MKDIR:"",LBL_MKFILE:"",LBL_COPY:"",LBL_PASTE:"",LBL_CUT:"",LBL_MOVE:"",LBL_RENAME:"",LBL_DELETE:"",LBL_DOWNLOAD:"",LBL_REFRESH:"",LBL_RELOAD:"",LBL_HOME:"",LBL_VIEW:"",LBL_HELP:"",LBL_ABOUT:"",LBL_APPLICATION:"",LBL_APPLICATIONS:"",LBL_KILL:"",LBL_KILL_ALL:"",LBL_MINIMIZE:"",LBL_MAXIMIZE:"",LBL_RESTORE:"",LBL_RAISE:"",LBL_SHADE:"",LBL_UNSHADE:"",LBL_ONTOP:"",LBL_RESIZE:"",LBL_BACK:"",LBL_FORWARD:"",LBL_UPLOAD:"",LBL_IMAGE:""},nr={ERR_REQUEST_STANDALONE:"       .",ERR_REQUEST_NOT_OK:"       : {0}",ERR_VFS_MOUNT_NOT_FOUND:"  '{0}'  ",ERR_VFS_MOUNT_NOT_FOUND_FOR:"   '{0}'  ",ERR_VFS_MOUNT_NOT_MOUNTED:"  '{0}'  ",ERR_VFS_MOUNT_ALREADY_MOUNTED:"  '{0}'     ",ERR_VFS_PATH_FORMAT_INVALID:" '{0}'     'name:/path'",ERR_PACKAGE_NOT_FOUND:"  '{0}'  ",ERR_PACKAGE_LOAD:"  '{0}'   : {1}",ERR_PACKAGE_NO_RUNTIME:"   '{0}'  ",ERR_PACKAGE_NO_METADATA:"  '{0}'  .     ?",ERR_PACKAGE_EXCEPTION:"   '{0}'",ERR_WINDOW_ID_EXISTS:"   '{0}'   ",ERR_INVALID_LOCALE:"  '{0}'",LBL_CONNECTION_LOST:"   ",LBL_CONNECTION_LOST_MESSAGE:"    .    ....",LBL_CONNECTION_RESTORED:"  ",LBL_CONNECTION_RESTORED_MESSAGE:"     .",LBL_CONNECTION_FAILED:"    ",LBL_CONNECTION_FAILED_MESSAGE:"     .",LBL_APP_CAT_DEVELOPMENT:"",LBL_APP_CAT_SCIENCE:"",LBL_APP_CAT_GAMES:"",LBL_APP_CAT_GRAPHICS:"",LBL_APP_CAT_NETWORK:"",LBL_APP_CAT_MULTIMEDIA:" ",LBL_APP_CAT_OFFICE:"",LBL_APP_CAT_SYSTEM:"",LBL_APP_CAT_UTILITIES:"",LBL_APP_CAT_OTHER:"",LBL_LAUNCH_SELECT:"  ",LBL_LAUNCH_SELECT_MESSAGE:"    '{0}'",LBL_DESKTOP_SELECT_WALLPAPER:"  ",LBL_DESKTOP_SELECT_THEME:" ",LBL_SEARCH_TOOLTOP:"   ({0})",LBL_SEARCH_PLACEHOLDER:"  ...",LBL_SEARCH_WAIT:"  ...",LBL_SEARCH_RESULT:" {0} ",LBL_FS_B:"B",LBL_FS_M:"M",LBL_FS_G:"G",LBL_FS_KIB:"",LBL_FS_MIB:"",LBL_FS_GIB:"",LBL_TOP:"",LBL_LEFT:"",LBL_RIGHT:"",LBL_BOTTOM:"",LBL_MENU:" ",LBL_ERROR:"",LBL_INFO:"",LBL_MESSAGE:"",LBL_WARNINIG:"",LBL_SUCCESS:"",LBL_FAILURE:"",LBL_WINDOW:"",LBL_WINDOWS:" ",LBL_NOTIFICATION:"",LBL_NOTIFICATIONS:" ",LBL_TRAY:" ",LBL_NAME:"",LBL_TYPE:"",LBL_SIZE:"",LBL_FILE:"",LBL_NEW:"",LBL_OPEN:"",LBL_OPEN_WITH:"  ...",LBL_SAVE:"",LBL_SAVEAS:" ",LBL_OK:"",LBL_ABORT:"",LBL_CANCEL:"",LBL_CLOSE:"",LBL_QUIT:"",LBL_YES:"",LBL_NO:"",LBL_GO:"",LBL_MKDIR:"  ",LBL_MKFILE:"  ",LBL_COPY:"",LBL_PASTE:"",LBL_CUT:"",LBL_MOVE:"",LBL_RENAME:"",LBL_DELETE:"",LBL_DOWNLOAD:"",LBL_REFRESH:"",LBL_RELOAD:" ",LBL_HOME:"",LBL_VIEW:"",LBL_HELP:"",LBL_ABOUT:"",LBL_APPLICATION:" ",LBL_APPLICATIONS:"  ",LBL_KILL:"  ",LBL_KILL_ALL:"   ",LBL_MINIMIZE:"",LBL_MAXIMIZE:"",LBL_RESTORE:"",LBL_RAISE:"",LBL_SHADE:" ",LBL_UNSHADE:" ",LBL_ONTOP:" ",LBL_RESIZE:"",LBL_BACK:"",LBL_FORWARD:"",LBL_UPLOAD:"",LBL_IMAGE:"",LBL_CREATE_SHORTCUT:" ",LBL_REMOVE_SHORTCUT:" ",LBL_EDIT:""},rr={ERR_REQUEST_STANDALONE:"No  possvel fazer solicitaes autnomas.",ERR_REQUEST_NOT_OK:"Ocorreu um erro ao executar a solicitao: {0}",ERR_VFS_MOUNT_NOT_FOUND:"Sistema de arquivo '{0}' no encontrado",ERR_VFS_MOUNT_NOT_FOUND_FOR:"Sistema de arquivo no encontrado para '{0}'",ERR_VFS_MOUNT_NOT_MOUNTED:"Sistema de arquivo '{0}' no montado",ERR_VFS_MOUNT_ALREADY_MOUNTED:"Sistema de arquivo '{0}' j montado",ERR_VFS_PATH_FORMAT_INVALID:"O caminho especificado '{0}' no corresponde 'name:/path'",ERR_PACKAGE_NOT_FOUND:"Metadados do pacote '{0}' no encontrados",ERR_PACKAGE_LOAD:"Carregamento do pacote '{0}' falhou: {1}",ERR_PACKAGE_NO_RUNTIME:"Tempo de execuo do pacote '{0}' no encontrado",ERR_PACKAGE_NO_METADATA:"Metadados no encontrado para '{0}'. Est no manifesto?",ERR_PACKAGE_EXCEPTION:"Ocorreu uma exceo em '{0}'",ERR_WINDOW_ID_EXISTS:"Janela com ID '{0}' J existe",ERR_INVALID_LOCALE:"Cdigo de idioma invlido '{0}'",LBL_CONNECTION_LOST:"Conexo perdida",LBL_CONNECTION_LOST_MESSAGE:"A conexo com OS.js foi perdida. Reconectando....",LBL_CONNECTION_RESTORED:"Conexo restaurada",LBL_CONNECTION_RESTORED_MESSAGE:"A conexo com o servidor OS.js foi restaurada.",LBL_CONNECTION_FAILED:"Falha na conexo",LBL_CONNECTION_FAILED_MESSAGE:"A conexo com OS.js no pode ser estabelecida. Alguns recursos podem no funcionar corretamente.",LBL_APP_CAT_DEVELOPMENT:"Desenvolvimento",LBL_APP_CAT_SCIENCE:"Cincia",LBL_APP_CAT_GAMES:"Jogos",LBL_APP_CAT_GRAPHICS:"Grfico",LBL_APP_CAT_NETWORK:"Rede",LBL_APP_CAT_MULTIMEDIA:"Multimedia",LBL_APP_CAT_OFFICE:"Escritrio",LBL_APP_CAT_SYSTEM:"Sistema",LBL_APP_CAT_UTILITIES:"Utilidades",LBL_APP_CAT_OTHER:"Outros",LBL_LAUNCH_SELECT:"Selecionar aplicativo",LBL_LAUNCH_SELECT_MESSAGE:"Selecionar aplicativo para '{0}'",LBL_DESKTOP_SELECT_WALLPAPER:"Selecionar papel de parede",LBL_DESKTOP_SELECT_THEME:"Selecionar tema",LBL_SEARCH_TOOLTOP:"Pesquisar no sistema de arquivos ({0})",LBL_SEARCH_PLACEHOLDER:"Pesquisar...",LBL_SEARCH_WAIT:"Buscando...",LBL_SEARCH_RESULT:"Mostrando {0} resultados",LBL_FS_B:"B",LBL_FS_M:"M",LBL_FS_G:"G",LBL_FS_KIB:"KiB",LBL_FS_MIB:"MiB",LBL_FS_GIB:"GiB",LBL_TOP:"Topo",LBL_LEFT:"Esquerda",LBL_RIGHT:"Direita",LBL_BOTTOM:"Inferior",LBL_MENU:"Menu",LBL_ERROR:"Erro",LBL_INFO:"Informao",LBL_MESSAGE:"Mensagem",LBL_WARNINIG:"Ateno",LBL_SUCCESS:"Sucesso",LBL_FAILURE:"Falha",LBL_WINDOW:"Janela",LBL_WINDOWS:"Janelas",LBL_NOTIFICATION:"Notificao",LBL_NOTIFICATIONS:"Notificaes",LBL_TRAY:"Entrada",LBL_NAME:"Nome",LBL_TYPE:"Tipo",LBL_SIZE:"Tamanho",LBL_FILE:"Arquivo",LBL_NEW:"Novo",LBL_OPEN:"Abrir",LBL_OPEN_WITH:"Abrir com...",LBL_SAVE:"Salvar",LBL_SAVEAS:"Salvar como",LBL_OK:"OK",LBL_ABORT:"Abortar",LBL_CANCEL:"Cancelar",LBL_CLOSE:"Fechar",LBL_QUIT:"Sair",LBL_YES:"Sim",LBL_NO:"No",LBL_GO:"Ir",LBL_MKDIR:"Criar novo diretrio",LBL_MKFILE:"Criar novo arquivo",LBL_COPY:"Copiar",LBL_PASTE:"Colar",LBL_CUT:"Recortar",LBL_MOVE:"Mover",LBL_RENAME:"Renomear",LBL_DELETE:"Deletar",LBL_DOWNLOAD:"Download",LBL_REFRESH:"Atualizar",LBL_RELOAD:"Recarregar",LBL_HOME:"Home",LBL_VIEW:"Visualizao",LBL_HELP:"Ajuda",LBL_ABOUT:"Sobre",LBL_APPLICATION:"Aplicativo",LBL_APPLICATIONS:"Aplicativos",LBL_KILL:"Finalizar",LBL_KILL_ALL:"Finalizar tudo",LBL_MINIMIZE:"Minimizar",LBL_MAXIMIZE:"Maximizar",LBL_RESTORE:"Restaurar",LBL_RAISE:"Levantar",LBL_SHADE:"Sombra",LBL_UNSHADE:"Tirar sombra",LBL_ONTOP:"No topo",LBL_RESIZE:"Redimensionar",LBL_BACK:"Voltar",LBL_FORWARD:"Avanar",LBL_UPLOAD:"Enviar",LBL_IMAGE:"Imagem",LBL_CREATE_SHORTCUT:"Criar atalho",LBL_REMOVE_SHORTCUT:"Remover atalho",LBL_EDIT:"Editar"},or={ERR_REQUEST_STANDALONE:"     .",ERR_REQUEST_NOT_OK:"   : {0}",ERR_VFS_MOUNT_NOT_FOUND:"  '{0}'  ",ERR_VFS_MOUNT_NOT_FOUND_FOR:"     '{0}'",ERR_VFS_MOUNT_NOT_MOUNTED:"  '{0}'  ",ERR_VFS_MOUNT_ALREADY_MOUNTED:"  '{0}'  ",ERR_VFS_PATH_FORMAT_INVALID:"  '{0}'    ':/'",ERR_PACKAGE_NOT_FOUND:"  '{0}'  ",ERR_PACKAGE_LOAD:"   '{0}': {1}",ERR_PACKAGE_NO_RUNTIME:"  '{0}'  ",ERR_PACKAGE_NO_METADATA:"    '{0}'. Is it in the manifest?",ERR_PACKAGE_EXCEPTION:"   '{0}'",ERR_WINDOW_ID_EXISTS:"  ID '{0}'  ",ERR_INVALID_LOCALE:"  '{0}'",LBL_CONNECTION_LOST:" ",LBL_CONNECTION_LOST_MESSAGE:"  OS.js  . ....",LBL_CONNECTION_RESTORED:" ",LBL_CONNECTION_RESTORED_MESSAGE:"   OS.js  .",LBL_CONNECTION_FAILED:" ",LBL_CONNECTION_FAILED_MESSAGE:"  OS.js    .      .",LBL_APP_CAT_DEVELOPMENT:"",LBL_APP_CAT_SCIENCE:"",LBL_APP_CAT_GAMES:"",LBL_APP_CAT_GRAPHICS:"",LBL_APP_CAT_NETWORK:"",LBL_APP_CAT_MULTIMEDIA:"",LBL_APP_CAT_OFFICE:"",LBL_APP_CAT_SYSTEM:"",LBL_APP_CAT_UTILITIES:"",LBL_APP_CAT_OTHER:"",LBL_LAUNCH_SELECT:" ",LBL_LAUNCH_SELECT_MESSAGE:"  '{0}'",LBL_DESKTOP_SELECT_WALLPAPER:" ",LBL_DESKTOP_SELECT_THEME:" ",LBL_SEARCH_TOOLTOP:"   ({0})",LBL_SEARCH_PLACEHOLDER:"  ...",LBL_SEARCH_WAIT:"...",LBL_SEARCH_RESULT:" {0} ",LBL_FS_B:"",LBL_FS_M:"",LBL_FS_G:"",LBL_FS_KIB:"",LBL_FS_MIB:"",LBL_FS_GIB:"",LBL_TOP:"",LBL_LEFT:"",LBL_RIGHT:"",LBL_BOTTOM:"",LBL_MENU:"",LBL_ERROR:"",LBL_INFO:"",LBL_MESSAGE:"",LBL_WARNINIG:"",LBL_SUCCESS:"",LBL_FAILURE:"",LBL_WINDOW:"",LBL_WINDOWS:"",LBL_NOTIFICATION:"",LBL_NOTIFICATIONS:"",LBL_TRAY:"",LBL_NAME:"",LBL_TYPE:"",LBL_SIZE:"",LBL_FILE:"",LBL_NEW:"",LBL_OPEN:"",LBL_OPEN_WITH:" ...",LBL_SAVE:"",LBL_SAVEAS:" ",LBL_OK:"",LBL_ABORT:"",LBL_CANCEL:"",LBL_CLOSE:"",LBL_QUIT:"",LBL_YES:"",LBL_NO:"",LBL_GO:"",LBL_MKDIR:" ",LBL_MKFILE:" ",LBL_COPY:"",LBL_PASTE:"",LBL_CUT:"",LBL_MOVE:"",LBL_RENAME:"",LBL_DELETE:"",LBL_DOWNLOAD:"",LBL_REFRESH:"",LBL_RELOAD:"",LBL_HOME:"",LBL_VIEW:"",LBL_HELP:"",LBL_ABOUT:" ",LBL_APPLICATION:"",LBL_APPLICATIONS:"",LBL_KILL:"",LBL_KILL_ALL:" ",LBL_MINIMIZE:"",LBL_MAXIMIZE:"",LBL_RESTORE:"",LBL_RAISE:"Raise",LBL_SHADE:"Shade",LBL_UNSHADE:"Unshade",LBL_ONTOP:" ",LBL_RESIZE:"",LBL_BACK:"",LBL_FORWARD:"",LBL_UPLOAD:"",LBL_IMAGE:"",LBL_CREATE_SHORTCUT:" ",LBL_REMOVE_SHORTCUT:" "},ir={ERR_REQUEST_STANDALONE:"Bamsz modda talepde bulunulamaz.",ERR_REQUEST_NOT_OK:"Talep gerekletirilirken bir hata olutu: {0}",ERR_VFS_MOUNT_NOT_FOUND:"'{0}' isimli dosya sistemi bulunamad",ERR_VFS_MOUNT_NOT_FOUND_FOR:"'{0}' iin dosya sistemi bulunamad",ERR_VFS_MOUNT_NOT_MOUNTED:"'{0}' isimli dosya sistemi karlmad",ERR_VFS_MOUNT_ALREADY_MOUNTED:"'{0}' isimli dosya sistemi zaten karld",ERR_VFS_PATH_FORMAT_INVALID:"'{0}' olarak verilen yol, 'name:/path' ile elemiyor",ERR_PACKAGE_PERMISSION_DENIED:"'{0}' dosyasn altrmaya iznin yok",ERR_PACKAGE_NOT_FOUND:"'{0}' isimli paket meta verisi bulunamad",ERR_PACKAGE_LOAD:"'{0}' paketinin yklenmesi baarsz: {1}",ERR_PACKAGE_NO_RUNTIME:"'{0}' paketinin runtime verisi bulunamad",ERR_PACKAGE_NO_METADATA:"'{0}' iin meta verisi bulunamad. Manifest'de olabilir mi?",ERR_PACKAGE_EXCEPTION:"'{0}' konumunda beklenmeyen bir durum gerekleti",ERR_WINDOW_ID_EXISTS:"'{0}' ID'sine sahip olan bir pencere zaten var",ERR_INVALID_LOCALE:"Geersiz yer '{0}'",LBL_CONNECTION_LOST:"Balant Koptu",LBL_CONNECTION_LOST_MESSAGE:"OS.js'ye olan balant koptu. Yeniden balanlyor....",LBL_CONNECTION_RESTORED:"Balant Yenilendi",LBL_CONNECTION_RESTORED_MESSAGE:"OS.js'ye olan balant yenilendi.",LBL_CONNECTION_FAILED:"Balant Baarsz",LBL_CONNECTION_FAILED_MESSAGE:"OS.js'ye balanlamyor. eitli zellikler doru almayabilir.",LBL_APP_CAT_DEVELOPMENT:"Gelitirme",LBL_APP_CAT_SCIENCE:"Bilim",LBL_APP_CAT_GAMES:"Oyun",LBL_APP_CAT_GRAPHICS:"Grafik",LBL_APP_CAT_NETWORK:"A",LBL_APP_CAT_MULTIMEDIA:"Multimedya",LBL_APP_CAT_OFFICE:"Ofis",LBL_APP_CAT_SYSTEM:"Sistem",LBL_APP_CAT_UTILITIES:"Aralar",LBL_APP_CAT_OTHER:"Dier",LBL_LAUNCH_SELECT:"Uygulama se",LBL_LAUNCH_SELECT_MESSAGE:"'{0}' iin uygulama se",LBL_DESKTOP_SELECT_WALLPAPER:"Arkaplan se",LBL_DESKTOP_SELECT_THEME:"Tema se",LBL_SEARCH_TOOLTOP:"Dosya sistemi ({0}) ara",LBL_SEARCH_PLACEHOLDER:"Dosya sistemlerini ara...",LBL_SEARCH_WAIT:"Aranyor...",LBL_SEARCH_RESULT:"{0} kadar sonu gsteriliyor",LBL_DESKTOP_SET_AS_WALLPAPER:"Arkaplan olarak ayarla",LBL_FS_B:"B",LBL_FS_M:"M",LBL_FS_G:"G",LBL_FS_KIB:"KiB",LBL_FS_MIB:"MiB",LBL_FS_GIB:"GiB",LBL_TOP:"st",LBL_LEFT:"Sol",LBL_RIGHT:"Sa",LBL_BOTTOM:"Alt",LBL_MENU:"Men",LBL_ERROR:"Hata",LBL_INFO:"Bilgi",LBL_MESSAGE:"Mesaj",LBL_WARNINIG:"Uyar",LBL_SUCCESS:"Baar",LBL_FAILURE:"Kusur",LBL_WINDOW:"Pencere",LBL_WINDOWS:"Pencereler",LBL_NOTIFICATION:"Bildiri",LBL_NOTIFICATIONS:"Bildiriler",LBL_TRAY:"Tray Girii",LBL_NAME:"sim",LBL_TYPE:"Tr",LBL_SIZE:"Boyut",LBL_FILE:"Dosya",LBL_NEW:"Yeni",LBL_OPEN:"A",LBL_OPEN_WITH:"ununla a:",LBL_SAVE:"Kaydet",LBL_SAVEAS:"Farkl Kaydet",LBL_OK:"Tamam",LBL_ABORT:"Durdur",LBL_CANCEL:"ptal",LBL_CLOSE:"Kapat",LBL_QUIT:"k",LBL_YES:"Evet",LBL_NO:"Hayr",LBL_GO:"Git",LBL_MKDIR:"Yeni dizin olutur",LBL_MKFILE:"Yeni dosya olutur",LBL_COPY:"Kopyala",LBL_PASTE:"Yaptr",LBL_CUT:"Kes",LBL_MOVE:"Ta",LBL_RENAME:"Yeniden Adlandr",LBL_DELETE:"Sil",LBL_DOWNLOAD:"ndir",LBL_REFRESH:"Yenile",LBL_RELOAD:"Yeniden Ykle",LBL_HOME:"Ev",LBL_VIEW:"Gster",LBL_HELP:"Yardm",LBL_ABOUT:"Hakknda",LBL_APPLICATION:"Uygulama",LBL_APPLICATIONS:"Uygulamalar",LBL_KILL:"ldr",LBL_KILL_ALL:"Hepsini ldr",LBL_MINIMIZE:"Klt",LBL_MAXIMIZE:"Byt",LBL_RESTORE:"Onar",LBL_RAISE:"Ykselt",LBL_SHADE:"rt",LBL_UNSHADE:"rtme",LBL_ONTOP:"Tepe",LBL_RESIZE:"Yeniden boyutlandr",LBL_BACK:"Geri",LBL_FORWARD:"leri",LBL_UPLOAD:"Ykle",LBL_IMAGE:"mge",LBL_CREATE_SHORTCUT:"Ksayol olutur",LBL_REMOVE_SHORTCUT:"Ksayolu sil",LBL_EDIT:"Dzenle"},sr={ERR_REQUEST_STANDALONE:"Det gr inte att gra frfrgningar i fristende lge.",ERR_REQUEST_NOT_OK:"Ett fel uppstod nr en begran utfrdes: {0}",ERR_VFS_MOUNT_NOT_FOUND:"Filsystemet '{0}' hittades inte",ERR_VFS_MOUNT_NOT_FOUND_FOR:"Filsystemet hittades inte fr '{0}'",ERR_VFS_MOUNT_NOT_MOUNTED:"Filsystemet '{0}' inte monterat",ERR_VFS_MOUNT_ALREADY_MOUNTED:"Filsystemet '{0}' redan monterat",ERR_VFS_PATH_FORMAT_INVALID:"Angiven vg '{0}' matchar inte 'name:/path'",ERR_PACKAGE_PERMISSION_DENIED:"Du har inte tilltelse att starta '{0}'",ERR_PACKAGE_NOT_FOUND:"Paketmetadata '{0}' hittades inte",ERR_PACKAGE_LOAD:"Paketladdning '{0}' misslyckades: {1}",ERR_PACKAGE_NO_RUNTIME:"Paketets krtid '{0}' hittades inte",ERR_PACKAGE_NO_METADATA:"Metadata hittades inte fr '{0}'. r det i manifestet?",ERR_PACKAGE_EXCEPTION:"Ett undantag intrffade i '{0}'",ERR_WINDOW_ID_EXISTS:"Fnster med ID '{0}' existerar redan",ERR_INVALID_LOCALE:"Ogiltigt sprk '{0}'",LBL_CONNECTION_LOST:"Anslutning frlorad",LBL_CONNECTION_LOST_MESSAGE:"Anslutningen till OS.js frlorades. teransluter ....",LBL_CONNECTION_RESTORED:"Anslutning terstlld",LBL_CONNECTION_RESTORED_MESSAGE:"Anslutningen till OS.js-servern terstlldes.",LBL_CONNECTION_FAILED:"Anslutningen misslyckades",LBL_CONNECTION_FAILED_MESSAGE:"Anslutningen till OS.js kunde inte upprttas. Vissa funktioner kanske inte fungerar ordentligt.",LBL_APP_CAT_DEVELOPMENT:"Utveckling",LBL_APP_CAT_SCIENCE:"Vetenskap",LBL_APP_CAT_GAMES:"Spel",LBL_APP_CAT_GRAPHICS:"Grafik",LBL_APP_CAT_NETWORK:"Ntverk",LBL_APP_CAT_MULTIMEDIA:"Multimedia",LBL_APP_CAT_OFFICE:"Kontor",LBL_APP_CAT_SYSTEM:"Systemet",LBL_APP_CAT_UTILITIES:"Verktyg",LBL_APP_CAT_OTHER:"vrigt",LBL_LAUNCH_SELECT:"Vlj applikation",LBL_LAUNCH_SELECT_MESSAGE:"Vlj applikation fr '{0}'",LBL_DESKTOP_SELECT_WALLPAPER:"Vlj bakgrund",LBL_DESKTOP_SELECT_THEME:"Vlj tema",LBL_SEARCH_TOOLTOP:"Sk filsystem ({0})",LBL_SEARCH_PLACEHOLDER:"Sk filsystemen...",LBL_SEARCH_WAIT:"Sker...",LBL_SEARCH_RESULT:"Visar {0} resultat",LBL_DESKTOP_SET_AS_WALLPAPER:"Anvnd som bakgrund",LBL_FS_B:"B",LBL_FS_M:"M",LBL_FS_G:"G",LBL_FS_KIB:"KiB",LBL_FS_MIB:"MiB",LBL_FS_GIB:"GiB",LBL_TOP:"Topp",LBL_LEFT:"Vnster",LBL_RIGHT:"Hger",LBL_BOTTOM:"Botten",LBL_MENU:"Meny",LBL_ERROR:"Fel",LBL_INFO:"Info",LBL_MESSAGE:"Meddelande",LBL_WARNINIG:"Varning",LBL_SUCCESS:"Framgng",LBL_FAILURE:"Fel",LBL_WINDOW:"Fnster",LBL_WINDOWS:"Fnster",LBL_NOTIFICATION:"Meddelande",LBL_NOTIFICATIONS:"Meddelanden",LBL_TRAY:"Fackinmatning",LBL_NAME:"Namn",LBL_TYPE:"Typ",LBL_SIZE:"Storlek",LBL_FILE:"Fil",LBL_NEW:"Ny",LBL_OPEN:"ppna",LBL_OPEN_WITH:"ppna med...",LBL_SAVE:"Spara",LBL_SAVEAS:"Spara som",LBL_OK:"OK",LBL_ABORT:"Avbryta",LBL_CANCEL:"Avbryt",LBL_CLOSE:"Stng",LBL_QUIT:"Sluta",LBL_YES:"Ja",LBL_NO:"Nej",LBL_GO:"G",LBL_MKDIR:"Skapa ny katalog",LBL_MKFILE:"Skapa ny fil",LBL_COPY:"Kopiera",LBL_PASTE:"Klistra in",LBL_CUT:"Klipp ut",LBL_MOVE:"Flytta",LBL_RENAME:"Dp om",LBL_DELETE:"Radera",LBL_DOWNLOAD:"Ladda ner",LBL_REFRESH:"Uppdatera",LBL_RELOAD:"Ladda om",LBL_HOME:"Hem",LBL_VIEW:"Se",LBL_HELP:"Hjlp",LBL_ABOUT:"Om",LBL_APPLICATION:"Anskan",LBL_APPLICATIONS:"Applikationer",LBL_KILL:"Dda",LBL_KILL_ALL:"Dda alla",LBL_MINIMIZE:"Minimera",LBL_MAXIMIZE:"Maximera",LBL_RESTORE:"terstll",LBL_RAISE:"Hj",LBL_SHADE:"Skugga",LBL_UNSHADE:"Avskugga",LBL_ONTOP:"verst",LBL_RESIZE:"ndra storlek",LBL_BACK:"Back",LBL_FORWARD:"Forward",LBL_UPLOAD:"Ladda upp",LBL_IMAGE:"Bild",LBL_CREATE_SHORTCUT:"Skapa genvg",LBL_REMOVE_SHORTCUT:"ta bort genvg",LBL_EDIT:"Redigera"},ar=n(23),cr=n.n(ar),ur=["file"];
/*
 * OS.js - JavaScript Cloud/Web Desktop Platform
 *
 * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * 1. Redistributions of source code must retain the above copyright notice, this
 *    list of conditions and the following disclaimer
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 *    this list of conditions and the following disclaimer in the documentation
 *    and/or other materials provided with the distribution
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR
 * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
 * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * @author  Anders Evenrud <andersevenrud@gmail.com>
 * @license Simplified BSD License
 */function lr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lr(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function dr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}
/*
 * OS.js - JavaScript Cloud/Web Desktop Platform
 *
 * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * 1. Redistributions of source code must retain the above copyright notice, this
 *    list of conditions and the following disclaimer
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 *    this list of conditions and the following disclaimer in the documentation
 *    and/or other materials provided with the distribution
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR
 * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
 * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * @author  Anders Evenrud <andersevenrud@gmail.com>
 * @license Simplified BSD License
 */();return function(){var n,r=B()(e);if(t){var o=B()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return O()(this,n)}}var pr=function(e){y()(n,e);var t=dr(n);function n(e,r,o){var i,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return d()(this,n),(i=t.call(this,"BasicApplication<"+r.name+">")).core=e,i.proc=r,i.win=o,i.options=fr({mimeTypes:r.metadata.mimes||[],loadMimeTypes:[],saveMimeTypes:[],defaultFilename:"New File"},s),i}return L()(n,[{key:"destroy",value:function(){this.off(),v()(B()(n.prototype),"destroy",this).call(this)}},{key:"init",value:function(){return this.proc.args.file?this.open(this.proc.args.file):this.create(),Promise.resolve(!0)}},{key:"getDialogOptions",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.file,r=cr()(t,ur),o=this.options,i=o.defaultFilename,s=o.mimeTypes,a=o.loadMimeTypes,c=o.saveMimeTypes,u=n||this.proc.args.file,l=this.core.config("vfs.defaultPath"),f=u?u.path:null,d="open"===e?a:c;return d.length||(d=s),[fr({type:e,mime:d,filename:f?It(f):i,path:f?Dt(f):l},r),{parent:this.win,attributes:{modal:!0}}]}},{key:"updateWindowTitle",value:function(){if(this.win){var e=(0,this.core.make("osjs/locale").translatableFlat)(this.proc.metadata.title),t=this._createTitle(e);this.win.setTitle(t)}}},{key:"createDialog",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this.getDialogOptions(e,n),o=Qe()(r,2),i=o[0],s=o[1];this.core.has("osjs/dialog")&&this.core.make("osjs/dialog","file",i,s,(function(e,n){"ok"===e&&t(n)}))}},{key:"open",value:function(e){this._setFile(e,"open-file")}},{key:"save",value:function(e){this._setFile(e,"save-file")}},{key:"create",value:function(){this.proc.args.file=null,this.emit("new-file"),this.updateWindowTitle()}},{key:"createNew",value:function(){this.create()}},{key:"createSaveDialog",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.createDialog("save",(function(t){return e.save(t)}),t)}},{key:"createOpenDialog",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.createDialog("open",(function(t){return e.open(t)}),t)}},{key:"_setFile",value:function(e,t){this.proc.args.file=fr({},e),this.emit(t,e),this.updateWindowTitle()}},{key:"_createTitle",value:function(e){var t=this.proc.args.file?It(this.proc.args.file.path):this.options.defaultFilename;return t?"".concat(e," - ").concat(t):e}}]),n}(T.EventEmitter);function Lr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function hr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}
/*
 * OS.js - JavaScript Cloud/Web Desktop Platform
 *
 * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * 1. Redistributions of source code must retain the above copyright notice, this
 *    list of conditions and the following disclaimer
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 *    this list of conditions and the following disclaimer in the documentation
 *    and/or other materials provided with the distribution
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR
 * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
 * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * @author  Anders Evenrud <andersevenrud@gmail.com>
 * @license Simplified BSD License
 */();return function(){var n,r=B()(e);if(t){var o=B()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return O()(this,n)}}var _r=function(e){y()(n,e);var t=hr(n);function n(e){var r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return d()(this,n),(r=t.call(this,e,o)).session=new In(e),r.tray=new $n(e),r.pm=new Wn(e),r.clipboard=new zn,r.middleware=new Yn,window.OSjs=r.createGlobalApi(),r}return L()(n,[{key:"provides",value:function(){return["osjs/application","osjs/basic-application","osjs/window","osjs/windows","osjs/event-handler","osjs/window-behaviour","osjs/dnd","osjs/dom","osjs/clipboard","osjs/middleware","osjs/tray","osjs/locale","osjs/packages","osjs/websocket","osjs/session","osjs/theme","osjs/sounds"]}},{key:"destroy",value:function(){this.tray.destroy(),this.pm.destroy(),this.clipboard.destroy(),this.middleware.destroy(),this.session.destroy(),v()(B()(n.prototype),"destroy",this).call(this)}},{key:"init",value:function(){var e=this;return this.registerContracts(),this.core.on("osjs/core:started",(function(){e.session.load()})),this.pm.init()}},{key:"start",value:function(){var e=this;this.core.config("development")&&(this.core.on("osjs/dist:changed",(function(t){e._onDistChanged(t)})),this.core.on("osjs/packages:package:changed",(function(t){e._onPackageChanged(t)}))),this.core.on("osjs/packages:metadata:changed",(function(){e.pm.init()}))}},{key:"registerContracts",value:function(){var e=this;this.core.instance("osjs/window",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Ae(e.core,t)})),this.core.instance("osjs/application",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Ne(e.core,t)})),this.core.instance("osjs/basic-application",(function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new pr(e.core,t,n,r)})),this.core.instance("osjs/websocket",(function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new q(e,t,n)})),this.core.instance("osjs/event-emitter",(function(e){return new T.EventEmitter(e)})),this.core.singleton("osjs/windows",(function(){return e.createWindowContract()})),this.core.singleton("osjs/locale",(function(){return e.createLocaleContract()})),this.core.singleton("osjs/dnd",(function(){return e.createDnDContract()})),this.core.singleton("osjs/dom",(function(){return e.createDOMContract()})),this.core.singleton("osjs/theme",(function(){return e.createThemeContract()})),this.core.singleton("osjs/sounds",(function(){return e.createSoundsContract()})),this.core.singleton("osjs/session",(function(){return e.createSessionContract()})),this.core.singleton("osjs/packages",(function(){return e.createPackagesContract()})),this.core.singleton("osjs/clipboard",(function(){return e.createClipboardContract()})),this.core.singleton("osjs/middleware",(function(){return e.createMiddlewareContract()})),this.core.instance("osjs/tray",(function(t,n){return void 0!==t?(D.warn("osjs/tray usage without .create() is deprecated"),e.tray.create(t,n)):e.createTrayContract()})),this.core.singleton("osjs/window-behavior",(function(){return"function"==typeof e.options.windowBehavior?e.options.windowBehavior(e.core):new _n(e.core)})),this.core.instance("osjs/event-handler",(function(){D.warn("osjs/event-handler is deprecated, use osjs/event-emitter");for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return kn()(T.EventEmitter,t)}))}},{key:"createGlobalApi",value:function(){var e=this,t=this.core.config("providers.globalBlacklist",[]),n=this.core.config("providers.globalWhitelist",[]);return Object.freeze({make:function(r){var o;if(e.core.has(r)){var i=t.length>0&&-1!==t.indexOf(r),s=n.length>0&&-1===n.indexOf(r);if(i||s)throw new Error("The provider '".concat(r,"' cannot be used via global scope"))}for(var a=arguments.length,c=new Array(a>1?a-1:0),u=1;u<a;u++)c[u-1]=arguments[u];return(o=e.core).make.apply(o,[r].concat(c))},register:function(t,n){return e.pm.register(t,n)},url:function(t,n,r){return e.core.url(t,n,r)},run:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return e.core.run(t,n,r)},open:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.core.open(t,n)},request:function(t,n,r){return e.core.request(t,n,r)},middleware:function(t,n){return e.middleware.add(t,n)}})}},{key:"_onDistChanged",value:function(e){var t=this.core.url(e).replace(/^\//,""),n=this.core.$resourceRoot.querySelectorAll("link[rel=stylesheet]"),r=Array.from(n).reduce((function(e,t){var n=t.getAttribute("href").split("?")[0].replace(/^\//,"");return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Lr(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Lr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}(l()({},n,t),e)}),{});r[t]&&(D.debug("Hot-reloading",t),setTimeout((function(){r[t].setAttribute("href",t)}),100))}},{key:"_onPackageChanged",value:function(e){Ne.getApplications().filter((function(t){return t.metadata.name===e})).forEach((function(e){return e.relaunch()}))}},{key:"createLocaleContract",value:function(){var e,t=this,n=b()(i,this.options.locales||{}),r=Ke(this.core)(n);return{format:(e=this.core,function(t,n){var r=Fe(e,"format."+n),o=r.defaultLocale,i=r.userLocale||o||n;return Ie()(t,i)}),translate:r,translatable:Ke(this.core),translatableFlat:Ge(this.core),getLocale:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"language",n=Fe(t.core,e);return n.userLocale||n.defaultLocale},setLocale:function(e){return e in n?t.core.make("osjs/settings").set("osjs/locale","language",e).save().then((function(){return t.core.emit("osjs/locale:change",e)})):Promise.reject(r("ERR_INVALID_LOCALE",e))}}}},{key:"createWindowContract",value:function(){var e=this;return{create:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Ae(e.core,t)},list:function(){return Ae.getWindows()},last:function(){return Ae.lastWindow()}}}},{key:"createDnDContract",value:function(){return r}},{key:"createDOMContract",value:function(){return{script:le,style:ue}}},{key:"createThemeContract",value:function(){var e=Vt(this.core),t=e.themeResource,n=e.icon;return{resource:t,icon:function(e){return n(e.replace(/(\.png)?$/,".png"))}}}},{key:"createSoundsContract",value:function(){var e=Vt(this.core),t=e.soundResource,n=e.soundsEnabled;return{resource:t,play:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(n()){var o=e.match(/^(\/|https?:)/)?e:t(e);if(o)return pe(o,r)}return!1}}}},{key:"createSessionContract",value:function(){var e=this;return{save:function(){return e.session.save()},load:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e.session.load(t)}}}},{key:"createPackagesContract",value:function(){var e=this;return{launch:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return e.pm.launch(t,n,r)},register:function(t,n){return e.pm.register(t,n)},addPackages:function(t){return e.pm.addPackages(t)},getPackages:function(t){return e.pm.getPackages(t)},getCompatiblePackages:function(t){return e.pm.getCompatiblePackages(t)},running:function(){return e.pm.running()}}}},{key:"createClipboardContract",value:function(){var e=this;return{clear:function(){return e.clipboard.clear()},set:function(t,n){return e.clipboard.set(t,n)},has:function(t){return e.clipboard.has(t)},get:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e.clipboard.get(t)}}}},{key:"createMiddlewareContract",value:function(){var e=this;return{add:function(t,n){return e.middleware.add(t,n)},get:function(t){return e.middleware.get(t)}}}},{key:"createTrayContract",value:function(){var e=this;return{create:function(t,n){return e.tray.create(t,n)},remove:function(t){return e.tray.remove(t)},list:function(){return e.tray.list()},has:function(t){return e.tray.has(t)}}}}]),n}(je.ServiceProvider);function mr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}
/*
 * OS.js - JavaScript Cloud/Web Desktop Platform
 *
 * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * 1. Redistributions of source code must retain the above copyright notice, this
 *    list of conditions and the following disclaimer
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 *    this list of conditions and the following disclaimer in the documentation
 *    and/or other materials provided with the distribution
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR
 * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
 * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * @author  Anders Evenrud <andersevenrud@gmail.com>
 * @license Simplified BSD License
 */();return function(){var n,r=B()(e);if(t){var o=B()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return O()(this,n)}}var vr=function(e){y()(n,e);var t=mr(n);function n(e){var r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return d()(this,n),(r=t.call(this,e,o||{})).desktop=new on(r.core,r.options),r}return L()(n,[{key:"destroy",value:function(){this.desktop=this.desktop.destroy()}},{key:"provides",value:function(){return["osjs/desktop"]}},{key:"init",value:function(){var e=this;this.desktop.init(),this.core.singleton("osjs/desktop",(function(){return e.createDesktopContract()})),this.core.on("osjs/core:started",(function(){e.desktop.applySettings()}))}},{key:"start",value:function(){this.desktop.start()}},{key:"createDesktopContract",value:function(){var e=this;return{setKeyboardContext:function(t){return e.desktop.setKeyboardContext(t)},openContextMenu:function(t){return e.desktop.onContextMenu(t)},addContextMenuEntries:function(t){return e.desktop.addContextMenu(t)},applySettings:function(t){return e.desktop.applySettings(t)},createDropContextMenu:function(t){return e.desktop.createDropContextMenu(t)},getRect:function(){return e.desktop.getRect()}}}}]),n}(je.ServiceProvider);function Er(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}
/*
 * OS.js - JavaScript Cloud/Web Desktop Platform
 *
 * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * 1. Redistributions of source code must retain the above copyright notice, this
 *    list of conditions and the following disclaimer
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 *    this list of conditions and the following disclaimer in the documentation
 *    and/or other materials provided with the distribution
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR
 * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
 * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * @author  Anders Evenrud <andersevenrud@gmail.com>
 * @license Simplified BSD License
 */();return function(){var n,r=B()(e);if(t){var o=B()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return O()(this,n)}}var yr=function(e){y()(n,e);var t=Er(n);function n(e){var r;return d()(this,n),(r=t.call(this,e)).notifications=new ln(e),r}return L()(n,[{key:"destroy",value:function(){this.notifications.destroy()}},{key:"provides",value:function(){return["osjs/notification"]}},{key:"init",value:function(){var e=this;return this.core.instance("osjs/notification",(function(t){return e.notifications.create(t)})),this.notifications.init()}}]),n}(je.ServiceProvider);function gr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}
/*
 * OS.js - JavaScript Cloud/Web Desktop Platform
 *
 * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * 1. Redistributions of source code must retain the above copyright notice, this
 *    list of conditions and the following disclaimer
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 *    this list of conditions and the following disclaimer in the documentation
 *    and/or other materials provided with the distribution
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR
 * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
 * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * @author  Anders Evenrud <andersevenrud@gmail.com>
 * @license Simplified BSD License
 */
var Or=function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gr(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({id:null},"string"==typeof e?{path:e}:e)},Ar=function(e,t){return function(n){return Promise.resolve(n.map((function(e){return kt(e)}))).then((function(n){return Nt(Or(e),n,{showHiddenFiles:!1!==t.showHiddenFiles,filter:t.filter})}))}},Br=function(e,t){return function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.readdir(Or(n),r,t).then(Ar(n,r))}},Sr=function(e,t){return function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"string",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return e.readfile(Or(n),r,o,t).then((function(e){return Ct(e.body,e.mime,r)}))}},br=function(e,t){return function(n,r){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=r instanceof ArrayBuffer||r instanceof Blob?r:new Blob([r],{type:"application/octet-stream"});return e.writefile(Or(n),i,o,t)}},Tr=function(e,t){return function(n,r){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return e.copy(Or(n),Or(r),o,t)}},Pr=function(e,t){return function(n,r){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return e.rename(Or(n),Or(r),o,t)}},Rr=Pr,wr=function(e,t){return function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.mkdir(Or(n),r,t)}},Nr=function(e,t){return function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.unlink(Or(n),r,t)}},Cr=function(e,t){return function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.exists(Or(n),r,t)}},jr=function(e,t){return function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.stat(Or(n),r,t).then((function(e){return kt(e)}))}},kr=function(e,t){return function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.url(Or(n),r,t)}},Ir=function(e,t){return function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"function"==typeof e.download&&!0!==r.readfile?e.download(Or(n),r,t):Sr(e)(n,"blob").then((function(e){var t=Or(n).path.split("/").splice(-1)[0],r=window.URL.createObjectURL(e),o=document.createElement("a");o.style.display="none",o.href=r,o.download=t,document.body.appendChild(o),o.click(),setTimeout((function(){window.URL.revokeObjectURL(r),o.remove()}),1)}))}},Dr=function(e,t){return function(n,r){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t.attributes&&!1===t.attributes.searchable?Promise.resolve([]):e.search(Or(n),r,o,t).then(Ar(n,o))}},Mr=function(e,t){return function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.touch(Or(n),r,t)}},xr={readdir:function(e,t){return Promise.resolve([])},readfile:function(e,t,n){return Promise.resolve({body:new ArrayBuffer,mime:"application/octet-stream"})},writefile:function(e,t,n){return Promise.resolve(-1)},copy:function(e,t,n){return Promise.resolve(!1)},rename:function(e,t,n){return Promise.resolve(!1)},mkdir:function(e,t){return Promise.resolve(!1)},unlink:function(e,t){return Promise.resolve(!1)},exists:function(e,t){return Promise.resolve(!1)},stat:function(e,t){return Promise.resolve({})},url:function(e,t){return Promise.resolve(null)},mount:function(e){return Promise.resolve(!0)},unmount:function(e){return Promise.resolve(!0)},search:function(e,t,n){return Promise.resolve([])},touch:function(e,t){return Promise.resolve(!1)}};function Fr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ur(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fr(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}
/*
 * OS.js - JavaScript Cloud/Web Desktop Platform
 *
 * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * 1. Redistributions of source code must retain the above copyright notice, this
 *    list of conditions and the following disclaimer
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 *    this list of conditions and the following disclaimer in the documentation
 *    and/or other materials provided with the distribution
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR
 * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
 * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * @author  Anders Evenrud <andersevenrud@gmail.com>
 * @license Simplified BSD License
 */var Hr=["exists","stat","readdir","readfile"],Gr=function(e){var t=function(e){return function(t,n,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return e.request("/vfs/".concat(t),Ur({body:n,method:-1!==Hr.indexOf(t)?"get":"post"},o),r).then((function(e){if("json"===r)return{mime:"application/json",body:e};if("writefile"===t)return e.json();var n=e.headers.get("content-type")||"application/octet-stream";return e.arrayBuffer().then((function(e){return{mime:n,body:e}}))}))}}(e);return function(e,t){var n=function(e){return function(n,r){var o=n.path;return t(e,{path:o,options:r},"json").then((function(e){return e.body}))}};return{readdir:function(e,n){var r=e.path;return t("readdir",{path:r,options:{}},"json").then((function(e){return e.body}))},readfile:function(e,n,r){var o=e.path;return t("readfile",{path:o,options:r})},writefile:function(e,n){var r=e.path,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=new FormData;return i.append("upload",n),i.append("path",r),i.append("options",o),t("writefile",i,void 0,{onProgress:o.onProgress,xhr:!!o.onProgress})},copy:function(e,n,r){return t("copy",{from:e.path,to:n.path,options:r},"json").then((function(e){return e.body}))},rename:function(e,n,r){return t("rename",{from:e.path,to:n.path,options:r},"json").then((function(e){return e.body}))},mkdir:n("mkdir"),unlink:n("unlink"),exists:n("exists"),stat:n("stat"),url:function(t,n){var r=t.path;return Promise.resolve(e.url("/vfs/readfile?path=".concat(encodeURIComponent(r))))},search:function(e,n,r){var o=e.path;return t("search",{root:o,pattern:n,options:r},"json").then((function(e){return e.body}))},touch:function(e,n){var r=e.path;return t("touch",{path:r,options:n},"json").then((function(e){return e.body}))},download:function(e){var t=e.path,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=encodeURIComponent(JSON.stringify({download:!0}));return Promise.resolve("/vfs/readfile?options=".concat(r,"&path=")+encodeURIComponent(t)).then((function(e){return(n.target||window).open(e)}))}}}(e,t)},Kr=function(e){var t=e.make("osjs/packages");return{readdir:function(n,r){var o=n.path;return Promise.resolve(t.getPackages()).then((function(t){return t.map((function(t){return{isDirectory:!1,isFile:!0,filename:t.name,mime:"osjs/application",path:"".concat(o.replace(/(\/+)?$/,"/")).concat(t.name),size:0,stat:{},icon:t.icon?e.url(t.icon,{},t):null}}))}))}}};function Wr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Vr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wr(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function $r(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}
/*
 * OS.js - JavaScript Cloud/Web Desktop Platform
 *
 * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * 1. Redistributions of source code must retain the above copyright notice, this
 *    list of conditions and the following disclaimer
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 *    this list of conditions and the following disclaimer in the documentation
 *    and/or other materials provided with the distribution
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR
 * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
 * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * @author  Anders Evenrud <andersevenrud@gmail.com>
 * @license Simplified BSD License
 */();return function(){var n,r=B()(e);if(t){var o=B()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return O()(this,n)}}var zr=function(e){y()(n,e);var t=$r(n);function n(e){var r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return d()(this,n),o=Vr({adapters:{},mounts:[]},o),(r=t.call(this,"Filesystem")).core=e,r.adapters=Vr(Vr({system:Gr,apps:Kr},r.core.config("vfs.adapters",{})),o.adapters),r.mounts=[],r.options={},r.proxy=Object.keys(s).reduce((function(e,t){return Vr(l()({},t,(function(){for(var e,n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(e=r)._request.apply(e,[t].concat(o))})),e)}),{}),r}return L()(n,[{key:"mountAll",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.mounts=this._getConfiguredMountpoints();var n=function(n){return t?e._mountpointAction(n):e._mountpointAction(n).catch((function(e){return D.warn("Error while mounting",n,e)}))};return Promise.all(this.mounts.map(n))}},{key:"addMountpoint",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.createMountpoint(e);return this.mounts.push(n),t?this.mount(n.name):Promise.resolve(!0)}},{key:"mount",value:function(e){return"string"==typeof e?this._mountAction(e,!1):this.addMountpoint(e)}},{key:"unmount",value:function(e){return this._mountAction(e,!0)}},{key:"_mountpointAction",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=n?"unmounted":"mounted",o=n?"unmount":"mount";return e._adapter[o]({},e).then((function(i){return i&&(e.mounted=!n,t.emit(r,e),t.core.emit("osjs/fs:"+o)),i}))}},{key:"_mountAction",value:function(e,t){var n=this;return Promise.resolve(this.mounts.find((function(t){return t.name===e}))).then((function(r){var o=n.core.make("osjs/locale").translate;if(!r)throw new Error(o("ERR_VFS_MOUNT_NOT_FOUND",e));if(t&&!r.mounted)throw new Error(o("ERR_VFS_MOUNT_NOT_MOUNTED",e));if(!t&&r.mounted)throw new Error(o("ERR_VFS_MOUNT_ALREADY_MOUNTED",e));return n._mountpointAction(r,t)}))}},{key:"request",value:function(){return this.proxy}},{key:"_request",value:function(e){for(var t,n=this,r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];var s="osjs/vfs:".concat(e),a=function(t){var r;((r=n.core).emit.apply(r,["".concat(s,":done")].concat(o)),!t&&n.core.config("vfs.watch"))&&Ft(e,o).forEach((function(e){var t=Qe()(e,2),r=t[0],o=t[1];return n.core.emit(r,o)}))};return(t=this.core).emit.apply(t,[s].concat(o)),this._requestAction.apply(this,[e].concat(o)).then((function(e){return a(),e})).catch((function(e){throw a(e),e}))}},{key:"_requestAction",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(-1!==["rename","move","copy"].indexOf(e)){var o=n[0],i=n[1],a=this.getMountpointFromPath(o),c=this.getMountpointFromPath(i),u=a.adapter===c.adapter;if(!u)return Sr(a._adapter,a)(o).then((function(e){return br(c._adapter,c)(i,e)})).then((function(t){return"rename"===e?Nr(a._adapter,a)(o).then((function(){return t})):t}))}var l=n[0],f=this.getMountpointFromPath(l);return s[e](f._adapter,f).apply(void 0,n)}},{key:"createMountpoint",value:function(e){var t=e.adapter||this.core.config("vfs.defaultAdapter"),n=Vr(Vr({},xr),this.adapters[t](this.core)),r=b()({enabled:!0,mounted:!1,adapter:t,attributes:{visibility:"global",local:!0,searchable:!0,readOnly:!1}},e);return Vr({_adapter:n,label:t,root:"".concat(r.name||t,":/")},r)}},{key:"getMountpointFromPath",value:function(e){var t="string"==typeof e?e:e.path,n=Mt(t),r=this.core.make("osjs/locale").translate;if(!n)throw new Error(r("ERR_VFS_PATH_FORMAT_INVALID",t));var o=this.mounts.find((function(e){return e.name===n}));if(!o)throw new Error(r("ERR_VFS_MOUNT_NOT_FOUND_FOR","".concat(n,":")));return o}},{key:"getMounts",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.core.getUser(),n=this.core.make("osjs/theme"),r=function(e){return e?"string"==typeof e?e:n.icon(e.name):n.icon("drive-harddisk")};return this.mounts.filter((function(t){return e||t.mounted})).filter((function(e){return!1!==e.enabled})).filter((function(e){var n=e.attributes?e.attributes.groups:[],r=!e.attributes||!1!==e.attributes.strictGroups;return xt(t.groups)(n,r)})).map((function(e){return{attributes:Vr({},e.attributes),icon:r(e.icon),name:e.name,label:e.label,root:e.root}}))}},{key:"_getConfiguredMountpoints",value:function(){var e=this;return[].concat(c()(this.core.config("vfs.mountpoints",[])),c()(this.options.mounts||[])).map((function(t){try{return e.createMountpoint(t)}catch(e){D.warn("Error while creating mountpoint",e)}return null})).filter((function(e,t,n){return n.findIndex((function(t){return t.label===e.label||t.root===e.label}))===t||(D.warn("Removed duplicate mountpoint",e),!1)})).filter((function(e){return null!==e}))}}]),n}(T.EventEmitter);function Yr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}
/*
 * OS.js - JavaScript Cloud/Web Desktop Platform
 *
 * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * 1. Redistributions of source code must retain the above copyright notice, this
 *    list of conditions and the following disclaimer
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 *    this list of conditions and the following disclaimer in the documentation
 *    and/or other materials provided with the distribution
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR
 * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
 * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * @author  Anders Evenrud <andersevenrud@gmail.com>
 * @license Simplified BSD License
 */();return function(){var n,r=B()(e);if(t){var o=B()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return O()(this,n)}}var Zr=function(e){y()(n,e);var t=Yr(n);function n(e){var r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return d()(this,n),(r=t.call(this,e)).fs=new zr(e,{adapters:o.adapters||{},mounts:o.mounts||[]}),r}return L()(n,[{key:"provides",value:function(){return["osjs/vfs","osjs/fs"]}},{key:"init",value:function(){var e=this;return this.core.singleton("osjs/vfs",(function(){return e.createVFSContract()})),this.core.singleton("osjs/fs",(function(){return e.createFilesystemContract()})),this.fs.mountAll(!1)}},{key:"createVFSContract",value:function(){return this.fs.request()}},{key:"createFilesystemContract",value:function(){var e=this,t=this.core.config("vfs.icons",{});return{basename:function(e){return It(e)},pathname:function(e){return Dt(e)},pathJoin:function(){return Ot.apply(o,arguments)},icon:jt(t),mountpoints:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e.fs.getMounts(t)},addMountpoint:function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return e.fs.addMountpoint(t,n)},mount:function(t){return e.fs.mount(t)},unmount:function(t){return e.fs.unmount(t)}}}}]),n}(je.ServiceProvider);function qr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}
/*
 * OS.js - JavaScript Cloud/Web Desktop Platform
 *
 * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * 1. Redistributions of source code must retain the above copyright notice, this
 *    list of conditions and the following disclaimer
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 *    this list of conditions and the following disclaimer in the documentation
 *    and/or other materials provided with the distribution
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR
 * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
 * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * @author  Anders Evenrud <andersevenrud@gmail.com>
 * @license Simplified BSD License
 */();return function(){var n,r=B()(e);if(t){var o=B()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return O()(this,n)}}var Xr=function(e){y()(n,e);var t=qr(n);function n(e){var r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return d()(this,n),(r=t.call(this,e)).auth=new Cn(e,o),r}return L()(n,[{key:"init",value:function(){var e=this;return this.core.singleton("osjs/auth",(function(){return e.createAuthContract()})),this.auth.init()}},{key:"destroy",value:function(){return this.auth.destroy(),v()(B()(n.prototype),"destroy",this).call(this)}},{key:"provides",value:function(){return["osjs/auth"]}},{key:"createAuthContract",value:function(){var e=this;return{show:function(t){return e.auth.show(t)},login:function(t){return e.auth.login(t)},logout:function(t){return e.auth.logout(t)},user:function(){return e.core.getUser()}}}}]),n}(je.ServiceProvider),Qr=n(15),Jr=n.n(Qr),eo=function(e){return{clear:function(e){return e?localStorage.removeItem(e):localStorage.clear(),Promise.resolve(!0)},save:function(e){return Object.keys(e).forEach((function(t){localStorage.setItem(t,JSON.stringify(e[t]))})),Promise.resolve(!0)},load:function(){return Promise.resolve(Object.keys(localStorage).reduce((function(e,t){var n=localStorage.getItem(t);try{n=JSON.parse(n)}catch(e){D.warn("localStorageAdapter parse error",e)}return Object.assign(e,l()({},t,n))}),{}))}}};function to(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function no(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?to(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):to(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}
/*
 * OS.js - JavaScript Cloud/Web Desktop Platform
 *
 * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * 1. Redistributions of source code must retain the above copyright notice, this
 *    list of conditions and the following disclaimer
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 *    this list of conditions and the following disclaimer in the documentation
 *    and/or other materials provided with the distribution
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR
 * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
 * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * @author  Anders Evenrud <andersevenrud@gmail.com>
 * @license Simplified BSD License
 */var ro={server:function(e){return{save:function(t){return e.request(e.url("/settings"),{method:"post",body:t},"json")},load:function(){return e.request(e.url("/settings"),{method:"get"},"json")}}},localStorage:eo},oo=function(){function e(t,n){d()(this,e),this.adapter=function(e,t){return no({load:function(){return Promise.reject(new Error("Not implemented"))},save:function(){return Promise.reject(new Error("Not implemented"))},init:function(){return Promise.resolve(!0)},clear:function(){return Promise.resolve(!0)},destroy:function(){}},(e.config("standalone")?eo:"function"==typeof t.adapter?t.adapter:ro[t.adapter||"localStorage"])(e,t.config))}(t,n),this.debounce=null,this.settings={},this.core=t}return L()(e,[{key:"init",value:function(){return this.adapter.init()}},{key:"save",value:function(){var e=this;return new Promise((function(t,n){if(e.debounce){var r=Qe()(e.debounce,2),o=r[0],i=r[1];o.resolve(!1),e.debounce=clearTimeout(i)}e.debounce=[{resolve:t,reject:n},setTimeout((function(){e.adapter.save(e.settings).then((function(){e.core.emit("osjs/settings:save"),t.apply(void 0,arguments)})).catch(n)}),100)]}))}},{key:"load",value:function(){var e=this,t=this.core.config("settings.defaults",{});return this.adapter.load().then((function(n){return e.settings=b()(t,n,{arrayMerge:function(e,t){return t}}),e.core.emit("osjs/settings:load"),!0})).catch((function(n){return D.warn("Failed to set settings",n),e.settings=t,!1}))}},{key:"get",value:function(e,t,n){if(void 0===e)return no({},this.settings);if(void 0===this.settings[e])return t?n:n||{};var r=Jr()(this.settings[e]);return t?r.get(t,n):r.get()||n}},{key:"set",value:function(e,t,n){if(-1!==this.core.config("settings.lock",[]).indexOf(e))return this;if(void 0===this.settings[e]&&(this.settings[e]={}),t)try{var r=Jr()(this.settings[e]);r.set(t,n),this.settings[e]=r.get()}catch(e){D.warn("Error while setting settings for",t,e)}else this.settings[e]=no({},n);return this}},{key:"clear",value:function(e){var t=this;return this.adapter.clear(e).then((function(n){return n&&t.settings[e]&&delete t.settings[e],n}))}}]),e}();function io(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function so(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?io(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):io(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ao(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}
/*
 * OS.js - JavaScript Cloud/Web Desktop Platform
 *
 * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * 1. Redistributions of source code must retain the above copyright notice, this
 *    list of conditions and the following disclaimer
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 *    this list of conditions and the following disclaimer in the documentation
 *    and/or other materials provided with the distribution
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR
 * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
 * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * @author  Anders Evenrud <andersevenrud@gmail.com>
 * @license Simplified BSD License
 */();return function(){var n,r=B()(e);if(t){var o=B()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return O()(this,n)}}var co=function(e){y()(n,e);var t=ao(n);function n(e){var r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return d()(this,n),(r=t.call(this,e)).settings=new oo(e,so({config:{}},o)),r}return L()(n,[{key:"provides",value:function(){return["osjs/settings"]}},{key:"init",value:function(){var e=this;return this.core.singleton("osjs/settings",(function(){return e.createSettingsContract()})),this.settings.init()}},{key:"createSettingsContract",value:function(){var e=this;return{save:function(){return e.settings.save()},load:function(){return e.settings.load()},clear:function(t){return e.settings.clear(t)},get:function(t,n,r){return e.settings.get(t,n,r)},set:function(t,n,r){return e.settings.set(t,n,r)}}}}]),n}(je.ServiceProvider);
/**
 * OS.js - JavaScript Cloud/Web Desktop Platform
 *
 * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * 1. Redistributions of source code must retain the above copyright notice, this
 *    list of conditions and the following disclaimer
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 *    this list of conditions and the following disclaimer in the documentation
 *    and/or other materials provided with the distribution
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR
 * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
 * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * @author Anders Evenrud <andersevenrud@gmail.com>
 * @license Simplified BSD License
 * @preserve Copyright (c) Anders Evenrud <andersevenrud@gmail.com>
 */}])}));
//# sourceMappingURL=main.js.map